(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(t,e,i)=>{"use strict";var s=t.r(55363),n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},r=s.useState,h=s.useEffect,l=s.useLayoutEffect,o=s.useDebugValue;function a(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!n(t,i)}catch(t){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var i=e(),s=r({inst:{value:i,getSnapshot:e}}),n=s[0].inst,u=s[1];return l(function(){n.value=i,n.getSnapshot=e,a(n)&&u({inst:n})},[t,i,e]),h(function(){return a(n)&&u({inst:n}),t(function(){a(n)&&u({inst:n})})},[t]),o(i),i};i.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:u},2239,(t,e,i)=>{"use strict";e.exports=t.r(55838)},18058,t=>{"use strict";var e,i,s,n,r,h,l,o,a,u,c,d,f,p,m,g,v,b,_,w,y,x,S,P,M,O,C,k,E,D,N,T,V,R,j=t.i(93423),z=t.i(55363);function B(t){for(var e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];throw Error("number"==typeof t?"[MobX] minified error nr: "+t+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}function L(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:t.g}t.i(2632);var A=Object.assign,F=Object.getOwnPropertyDescriptor,I=Object.defineProperty,Y=Object.prototype,W=[];Object.freeze(W);var U={};Object.freeze(U);var G="undefined"!=typeof Proxy,q=Object.toString();function $(){G||B("Proxy not available")}function Q(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var J=function(){};function H(t){return"function"==typeof t}function K(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function X(t){return null!==t&&"object"==typeof t}function Z(t){if(!X(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var i=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i.toString()===q}function tt(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function te(t,e,i){I(t,e,{enumerable:!1,writable:!0,configurable:!0,value:i})}function ti(t,e,i){I(t,e,{enumerable:!1,writable:!1,configurable:!0,value:i})}function ts(t,e){var i="isMobX"+t;return e.prototype[i]=!0,function(t){return X(t)&&!0===t[i]}}function tn(t){return null!=t&&"[object Map]"===Object.prototype.toString.call(t)}function tr(t){return null!=t&&"[object Set]"===Object.prototype.toString.call(t)}var th=void 0!==Object.getOwnPropertySymbols,tl="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:th?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function to(t){return null===t?null:"object"==typeof t?""+t:t}function ta(t,e){return Y.hasOwnProperty.call(t,e)}var tu=Object.getOwnPropertyDescriptors||function(t){var e={};return tl(t).forEach(function(i){e[i]=F(t,i)}),e};function tc(t,e,i){return i?t|=e:t&=~e,t}function td(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function tf(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s.key),s)}}function tp(t,e,i){return e&&tf(t.prototype,e),i&&tf(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function tm(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return td(t,void 0);var i=({}).toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?td(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tg(){return(tg=Object.assign.bind()).apply(null,arguments)}function tv(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tb(t,e)}function tb(t,e){return(tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var t_=Symbol("mobx-stored-annotations");function tw(t){return Object.assign(function(e,i){if(tx(i))return t.decorate_20223_(e,i);ty(e,i,t)},t)}function ty(t,e,i){ta(t,t_)||te(t,t_,tg({},t[t_])),"override"!==i.annotationType_&&(t[t_][e]=i)}function tx(t){return"object"==typeof t&&"string"==typeof t.kind}var tS=Symbol("mobx administration"),tP=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=w.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},e.reportObserved=function(){return eR(this)},e.reportChanged=function(){eT(),ej(this),eV()},e.toString=function(){return this.name_},tp(t,[{key:"isBeingObserved",get:function(){return!!(this.flags_&t.isBeingObservedMask_)},set:function(e){this.flags_=tc(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return!!(this.flags_&t.isPendingUnobservationMask_)},set:function(e){this.flags_=tc(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return+!!(this.flags_&t.diffValueMask_)},set:function(e){this.flags_=tc(this.flags_,t.diffValueMask_,1===e)}}])}();tP.isBeingObservedMask_=1,tP.isPendingUnobservationMask_=2,tP.diffValueMask_=4;var tM=ts("Atom",tP);function tO(t,e,i){void 0===e&&(e=J),void 0===i&&(i=J);var s=new tP(t);return e!==J&&e1("onBO",s,e,void 0),i!==J&&e0(s,i),s}var tC=function(t,e){return i0(t,e)},tk=function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e};function tE(t,e,i){if(ie(t))return t;if(Array.isArray(t))return t8.array(t,{name:i});if(Z(t))return t8.object(t,void 0,{name:i});if(tn(t))return t8.map(t,{name:i});if(tr(t))return t8.set(t,{name:i});if("function"==typeof t&&!eX(t)&&!it(t))if(tt(t))return e8(t);else return eH(i,t);return t}function tD(t){return t}function tN(t,e){return{annotationType_:t,options_:e,make_:tT,extend_:tV,decorate_20223_:tR}}function tT(t,e,i,s){if(null!=(n=this.options_)&&n.bound)return+(null!==this.extend_(t,e,i,!1));if(s===t.target_)return 2*(null!==this.extend_(t,e,i,!1));if(eX(i.value))return 1;var n,r=tj(t,this,e,i,!1);return I(s,e,r),2}function tV(t,e,i,s){var n=tj(t,this,e,i);return t.defineProperty_(e,n,s)}function tR(t,e){var i,s=e.kind,n=e.name,r=e.addInitializer,h=this,l=function(t){var e,i,s,r;return el(null!=(e=null==(i=h.options_)?void 0:i.name)?e:n.toString(),t,null!=(s=null==(r=h.options_)?void 0:r.autoAction)&&s)};return"field"==s?function(t){var e,i=t;return eX(i)||(i=l(i)),null!=(e=h.options_)&&e.bound&&((i=i.bind(this)).isMobxAction=!0),i}:"method"==s?(eX(t)||(t=l(t)),null!=(i=this.options_)&&i.bound&&r(function(){var t=this[n].bind(this);t.isMobxAction=!0,this[n]=t}),t):void B("Cannot apply '"+h.annotationType_+"' to '"+String(n)+"' (kind: "+s+"):\n'"+h.annotationType_+"' can only be used on properties with a function value.")}function tj(t,e,i,s,n){void 0===n&&(n=eE.safeDescriptors),e.annotationType_,s.value;var r,h,l,o,a,u,c,d,f=s.value;return null!=(r=e.options_)&&r.bound&&(f=f.bind(null!=(d=t.proxy_)?d:t.target_)),{value:el(null!=(h=null==(l=e.options_)?void 0:l.name)?h:i.toString(),f,null!=(o=null==(a=e.options_)?void 0:a.autoAction)&&o,null!=(u=e.options_)&&u.bound?null!=(c=t.proxy_)?c:t.target_:void 0),configurable:!n||t.isPlainObject_,enumerable:!1,writable:!n}}function tz(t,e){return{annotationType_:t,options_:e,make_:tB,extend_:tL,decorate_20223_:tA}}function tB(t,e,i,s){if(s===t.target_)return 2*(null!==this.extend_(t,e,i,!1));if(null!=(n=this.options_)&&n.bound&&(!ta(t.target_,e)||!it(t.target_[e]))&&null===this.extend_(t,e,i,!1))return 0;if(it(i.value))return 1;var n,r=tF(t,this,e,i,!1,!1);return I(s,e,r),2}function tL(t,e,i,s){var n,r=tF(t,this,e,i,null==(n=this.options_)?void 0:n.bound);return t.defineProperty_(e,r,s)}function tA(t,e){var i,s=e.name,n=e.addInitializer;return it(t)||(t=e8(t)),null!=(i=this.options_)&&i.bound&&n(function(){var t=this[s].bind(this);t.isMobXFlow=!0,this[s]=t}),t}function tF(t,e,i,s,n,r){void 0===r&&(r=eE.safeDescriptors),e.annotationType_,s.value;var h,l=s.value;return it(l)||(l=e8(l)),n&&((l=l.bind(null!=(h=t.proxy_)?h:t.target_)).isMobXFlow=!0),{value:l,configurable:!r||t.isPlainObject_,enumerable:!1,writable:!r}}function tI(t,e){return{annotationType_:t,options_:e,make_:tY,extend_:tW,decorate_20223_:tU}}function tY(t,e,i){return+(null!==this.extend_(t,e,i,!1))}function tW(t,e,i,s){var n,r;return n=this,r=i,n.annotationType_,r.get,t.defineComputedProperty_(e,tg({},this.options_,{get:i.get,set:i.set}),s)}function tU(t,e){var i=this,s=e.name;return(0,e.addInitializer)(function(){var e=iB(this)[tS],n=tg({},i.options_,{get:t,context:this});n.name||(n.name="ObservableObject."+s.toString()),e.values_.set(s,new ed(n))}),function(){return this[tS].getObservablePropValue_(s)}}function tG(t,e){return{annotationType_:t,options_:e,make_:tq,extend_:t$,decorate_20223_:tQ}}function tq(t,e,i){return+(null!==this.extend_(t,e,i,!1))}function t$(t,e,i,s){var n,r,h;return h=this,h.annotationType_,t.defineObservableProperty_(e,i.value,null!=(n=null==(r=this.options_)?void 0:r.enhancer)?n:tE,s)}function tQ(t,e){var i=this,s=e.kind,n=e.name,r=new WeakSet;function h(t,e){var s,h,l=iB(t)[tS],o=new ec(e,null!=(s=null==(h=i.options_)?void 0:h.enhancer)?s:tE,"ObservableObject."+n.toString(),!1);l.values_.set(n,o),r.add(t)}if("accessor"==s)return{get:function(){return r.has(this)||h(this,t.get.call(this)),this[tS].getObservablePropValue_(n)},set:function(t){return r.has(this)||h(this,t),this[tS].setObservablePropValue_(n,t)},init:function(t){return r.has(this)||h(this,t),t}}}var tJ=tH();function tH(t){return{annotationType_:"true",options_:t,make_:tK,extend_:tX,decorate_20223_:tZ}}function tK(t,e,i,s){if(i.get)return ei.make_(t,e,i,s);if(i.set){var n,r,h,l,o,a=eX(i.set)?i.set:el(e.toString(),i.set);return s===t.target_?2*(null!==t.defineProperty_(e,{configurable:!eE.safeDescriptors||t.isPlainObject_,set:a})):(I(s,e,{configurable:!0,set:a}),2)}if(s!==t.target_&&"function"==typeof i.value)return tt(i.value)?(null!=(l=this.options_)&&l.autoBind?e8.bound:e8).make_(t,e,i,s):(null!=(h=this.options_)&&h.autoBind?eH.bound:eH).make_(t,e,i,s);var u=(null==(n=this.options_)?void 0:n.deep)===!1?t8.ref:t8;return"function"==typeof i.value&&null!=(r=this.options_)&&r.autoBind&&(i.value=i.value.bind(null!=(o=t.proxy_)?o:t.target_)),u.make_(t,e,i,s)}function tX(t,e,i,s){var n,r,h;return i.get?ei.extend_(t,e,i,s):i.set?t.defineProperty_(e,{configurable:!eE.safeDescriptors||t.isPlainObject_,set:el(e.toString(),i.set)},s):("function"==typeof i.value&&null!=(n=this.options_)&&n.autoBind&&(i.value=i.value.bind(null!=(h=t.proxy_)?h:t.target_)),((null==(r=this.options_)?void 0:r.deep)===!1?t8.ref:t8).extend_(t,e,i,s))}function tZ(t,e){B("'"+this.annotationType_+"' cannot be used as a decorator")}var t0={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(t0);var t1=tG("observable"),t2=tG("observable.ref",{enhancer:tD}),t3=tG("observable.shallow",{enhancer:function(t,e,i){return null==t||iF(t)||iP(t)||ik(t)||iT(t)?t:Array.isArray(t)?t8.array(t,{name:i,deep:!1}):Z(t)?t8.object(t,void 0,{name:i,deep:!1}):tn(t)?t8.map(t,{name:i,deep:!1}):tr(t)?t8.set(t,{name:i,deep:!1}):void 0}}),t5=tG("observable.struct",{enhancer:function(t,e){return i0(t,e)?e:t}}),t4=tw(t1);function t6(t){var e,i,s;return!0===t.deep?tE:!1===t.deep?tD:(e=t.defaultDecorator)&&null!=(i=null==(s=e.options_)?void 0:s.enhancer)?i:tE}function t9(t,e,i){return tx(e)?t1.decorate_20223_(t,e):K(e)?void ty(t,e,t1):ie(t)?t:Z(t)?t8.object(t,e,i):Array.isArray(t)?t8.array(t,e):tn(t)?t8.map(t,e):tr(t)?t8.set(t,e):"object"==typeof t&&null!==t?t:t8.box(t,e)}A(t9,t4);var t8=A(t9,{box:function(t,e){var i=e||t0;return new ec(t,t6(i),i.name,!0,i.equals)},array:function(t,e){var i=e||t0;return(!1===eE.useProxies||!1===i.proxy?function(t,e,i){return new i$(t,e,i)}:function(t,e,i,s){return void 0===i&&(i="ObservableArray"),void 0===s&&(s=!1),$(),iX(function(){var n=new iv(i,e,s,!1);ti(n.values_,tS,n);var r=new Proxy(n.values_,ig);return n.proxy_=r,t&&t.length&&n.spliceWithArray_(0,0,t),r})})(t,t6(i),i.name)},map:function(t,e){var i=e||t0;return new iC(t,t6(i),i.name)},set:function(t,e){var i=e||t0;return new iN(t,t6(i),i.name)},object:function(t,e,i){return iX(function(){var s,n,r,h;return e3(!1===eE.useProxies||(null==i?void 0:i.proxy)===!1?iB({},i):(s={},n=i,$(),null!=(h=(r=(s=iB(s,n))[tS]).proxy_)?h:r.proxy_=new Proxy(s,is)),t,e)})},ref:tw(t2),shallow:tw(t3),deep:t4,struct:tw(t5)}),t7="computed",et=tI(t7),ee=tI("computed.struct",{equals:tC}),ei=function(t,e){if(tx(e))return et.decorate_20223_(t,e);if(K(e))return ty(t,e,et);if(Z(t))return tw(tI(t7,t));var i=Z(e)?e:{};return i.get=t,i.name||(i.name=t.name||""),new ed(i)};Object.assign(ei,et),ei.struct=tw(ee);var es=0,en=1,er=null!=(b=null==(_=F(function(){},"name"))?void 0:_.configurable)&&b,eh={value:"action",configurable:!0,writable:!1,enumerable:!1};function el(t,e,i,s){function n(){return eo(t,i,e,s||this,arguments)}return void 0===i&&(i=!1),n.isMobxAction=!0,n.toString=function(){return e.toString()},er&&(eh.value=t,I(n,"name",eh)),n}function eo(t,e,i,s,n){var r,h,l,o,a,u,c=(r=e,h=eE.trackingDerivation,l=!r||!h,eT(),o=eE.allowStateChanges,l&&(ey(),o=ea(!0)),es=(a={runAsAction_:l,prevDerivation_:h,prevAllowStateChanges_:o,prevAllowStateReads_:eS(!0),notifySpy_:!1,startTime_:0,actionId_:en++,parentActionId_:es}).actionId_,a);try{return i.apply(s,n)}catch(t){throw c.error_=t,t}finally{es!==(u=c).actionId_&&B(30),es=u.parentActionId_,void 0!==u.error_&&(eE.suppressReactionErrors=!0),eu(u.prevAllowStateChanges_),eP(u.prevAllowStateReads_),eV(),u.runAsAction_&&ex(u.prevDerivation_),eE.suppressReactionErrors=!1}}function ea(t){var e=eE.allowStateChanges;return eE.allowStateChanges=t,e}function eu(t){eE.allowStateChanges=t}var ec=function(t){function e(e,i,s,n,r){var h;return void 0===s&&(s="ObservableValue"),void 0===n&&(n=!0),void 0===r&&(r=tk),(h=t.call(this,s)||this).enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=i,h.name_=s,h.equals=r,h.value_=i(e,void 0,s),h}tv(e,t);var i=e.prototype;return i.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},i.set=function(t){this.value_,(t=this.prepareNewValue_(t))!==eE.UNCHANGED&&this.setNewValue_(t)},i.prepareNewValue_=function(t){if(ev(this),ir(this)){var e=il(this,{object:this,type:im,newValue:t});if(!e)return eE.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?eE.UNCHANGED:t},i.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),io(this)&&iu(this,{type:im,object:this,newValue:t,oldValue:e})},i.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},i.intercept_=function(t){return ih(this,t)},i.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:im,newValue:this.value_,oldValue:void 0}),ia(this,t)},i.raw=function(){return this.value_},i.toJSON=function(){return this.get()},i.toString=function(){return this.name_+"["+this.value_+"]"},i.valueOf=function(){return to(this.get())},i[Symbol.toPrimitive]=function(){return this.valueOf()},e}(tP),ed=function(){function t(t){this.dependenciesState_=w.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=w.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ep(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=y.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||B(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=el("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?tC:tk),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){var t;t=this,t.lowestObserverState_===w.UP_TO_DATE_&&(t.lowestObserverState_=w.POSSIBLY_STALE_,t.observers_.forEach(function(t){t.dependenciesState_===w.UP_TO_DATE_&&(t.dependenciesState_=w.POSSIBLY_STALE_,t.onBecomeStale_())}))},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},e.get=function(){if(this.isComputing&&B(32,this.name_,this.derivation),0!==eE.inBatch||0!==this.observers_.size||this.keepAlive_){if(eR(this),eg(this)){var t,e=eE.trackingContext;this.keepAlive_&&!e&&(eE.trackingContext=this),this.trackAndCompute()&&(t=this,t.lowestObserverState_!==w.STALE_&&(t.lowestObserverState_=w.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===w.POSSIBLY_STALE_?e.dependenciesState_=w.STALE_:e.dependenciesState_===w.UP_TO_DATE_&&(t.lowestObserverState_=w.UP_TO_DATE_)}))),eE.trackingContext=e}}else eg(this)&&(this.warnAboutUntrackedRead_(),eT(),this.value_=this.computeValue_(!1),eV());var i=this.value_;if(em(i))throw i.cause;return i},e.set=function(t){if(this.setter_){this.isRunningSetter&&B(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter=!1}}else B(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===w.NOT_TRACKING_,i=this.computeValue_(!0),s=e||em(t)||em(i)||!this.equals_(t,i);return s&&(this.value_=i),s},e.computeValue_=function(t){this.isComputing=!0;var e,i=ea(!1);if(t)e=eb(this,this.derivation,this.scope_);else if(!0===eE.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new ep(t)}return eu(i),this.isComputing=!1,e},e.suspend_=function(){this.keepAlive_||(e_(this),this.value_=void 0)},e.observe_=function(t,e){var i=this,s=!0,n=void 0;return function(t,e){void 0===e&&(e=U);var i,s,n,r,h,l=null!=(i=null==(s=e)?void 0:s.name)?i:"Autorun";if(e.scheduler||e.delay){var o,a=(o=e).scheduler?o.scheduler:o.delay?function(t){return setTimeout(t,o.delay)}:eZ,u=!1;h=new ez(l,function(){u||(u=!0,a(function(){u=!1,h.isDisposed||h.track(c)}))},e.onError,e.requiresObservable)}else h=new ez(l,function(){this.track(c)},e.onError,e.requiresObservable);function c(){t(h)}return null!=(n=e)&&null!=(n=n.signal)&&n.aborted||h.schedule_(),h.getDisposer_(null==(r=e)?void 0:r.signal)}(function(){var r=i.get();if(!s||e){var h=ey();t({observableKind:"computed",debugObjectName:i.name_,type:im,object:i,newValue:r,oldValue:n}),ex(h)}s=!1,n=r})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return to(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},tp(t,[{key:"isComputing",get:function(){return!!(this.flags_&t.isComputingMask_)},set:function(e){this.flags_=tc(this.flags_,t.isComputingMask_,e)}},{key:"isRunningSetter",get:function(){return!!(this.flags_&t.isRunningSetterMask_)},set:function(e){this.flags_=tc(this.flags_,t.isRunningSetterMask_,e)}},{key:"isBeingObserved",get:function(){return!!(this.flags_&t.isBeingObservedMask_)},set:function(e){this.flags_=tc(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return!!(this.flags_&t.isPendingUnobservationMask_)},set:function(e){this.flags_=tc(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return+!!(this.flags_&t.diffValueMask_)},set:function(e){this.flags_=tc(this.flags_,t.diffValueMask_,1===e)}}])}();ed.isComputingMask_=1,ed.isRunningSetterMask_=2,ed.isBeingObservedMask_=4,ed.isPendingUnobservationMask_=8,ed.diffValueMask_=16;var ef=ts("ComputedValue",ed);(e=w||(w={}))[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_",(i=y||(y={}))[i.NONE=0]="NONE",i[i.LOG=1]="LOG",i[i.BREAK=2]="BREAK";var ep=function(t){this.cause=void 0,this.cause=t};function em(t){return t instanceof ep}function eg(t){switch(t.dependenciesState_){case w.UP_TO_DATE_:return!1;case w.NOT_TRACKING_:case w.STALE_:return!0;case w.POSSIBLY_STALE_:for(var e=eS(!0),i=ey(),s=t.observing_,n=s.length,r=0;r<n;r++){var h=s[r];if(ef(h)){if(eE.disableErrorBoundaries)h.get();else try{h.get()}catch(t){return ex(i),eP(e),!0}if(t.dependenciesState_===w.STALE_)return ex(i),eP(e),!0}}return eM(t),ex(i),eP(e),!1}}function ev(t){}function eb(t,e,i){var s,n=eS(!0);eM(t),t.newObserving_=Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++eE.runId;var r=eE.trackingDerivation;if(eE.trackingDerivation=t,eE.inBatch++,!0===eE.disableErrorBoundaries)s=e.call(i);else try{s=e.call(i)}catch(t){s=new ep(t)}return eE.inBatch--,eE.trackingDerivation=r,function(t){for(var e=t.observing_,i=t.observing_=t.newObserving_,s=w.UP_TO_DATE_,n=0,r=t.unboundDepsCount_,h=0;h<r;h++){var l=i[h];0===l.diffValue&&(l.diffValue=1,n!==h&&(i[n]=l),n++),l.dependenciesState_>s&&(s=l.dependenciesState_)}for(i.length=n,t.newObserving_=null,r=e.length;r--;){var o=e[r];0===o.diffValue&&eD(o,t),o.diffValue=0}for(;n--;){var a,u,c=i[n];1===c.diffValue&&(c.diffValue=0,a=c,u=t,a.observers_.add(u),a.lowestObserverState_>u.dependenciesState_&&(a.lowestObserverState_=u.dependenciesState_))}s!==w.UP_TO_DATE_&&(t.dependenciesState_=s,t.onBecomeStale_())}(t),eP(n),s}function e_(t){var e=t.observing_;t.observing_=[];for(var i=e.length;i--;)eD(e[i],t);t.dependenciesState_=w.NOT_TRACKING_}function ew(t){var e=ey();try{return t()}finally{ex(e)}}function ey(){var t=eE.trackingDerivation;return eE.trackingDerivation=null,t}function ex(t){eE.trackingDerivation=t}function eS(t){var e=eE.allowStateReads;return eE.allowStateReads=t,e}function eP(t){eE.allowStateReads=t}function eM(t){if(t.dependenciesState_!==w.UP_TO_DATE_){t.dependenciesState_=w.UP_TO_DATE_;for(var e=t.observing_,i=e.length;i--;)e[i].lowestObserverState_=w.UP_TO_DATE_}}var eO=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},eC=!0,ek=!1,eE=((s=L()).__mobxInstanceCount>0&&!s.__mobxGlobals&&(eC=!1),s.__mobxGlobals&&s.__mobxGlobals.version!==new eO().version&&(eC=!1),eC)?s.__mobxGlobals?(s.__mobxInstanceCount+=1,s.__mobxGlobals.UNCHANGED||(s.__mobxGlobals.UNCHANGED={}),s.__mobxGlobals):(s.__mobxInstanceCount=1,s.__mobxGlobals=new eO):(setTimeout(function(){ek||B(35)},1),new eO);function eD(t,e){t.observers_.delete(e),0===t.observers_.size&&eN(t)}function eN(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,eE.pendingUnobservations.push(t))}function eT(){eE.inBatch++}function eV(){if(0==--eE.inBatch){eL();for(var t=eE.pendingUnobservations,e=0;e<t.length;e++){var i=t[e];i.isPendingUnobservation=!1,0===i.observers_.size&&(i.isBeingObserved&&(i.isBeingObserved=!1,i.onBUO()),i instanceof ed&&i.suspend_())}eE.pendingUnobservations=[]}}function eR(t){var e=eE.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&eE.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(0===t.observers_.size&&eE.inBatch>0&&eN(t),!1)}function ej(t){t.lowestObserverState_!==w.STALE_&&(t.lowestObserverState_=w.STALE_,t.observers_.forEach(function(t){t.dependenciesState_===w.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=w.STALE_}))}var ez=function(){function t(t,e,i,s){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=w.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=y.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=i,this.requiresObservable_=s}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,eE.pendingReactions.push(this),eL())},e.runReaction_=function(){if(!this.isDisposed){eT(),this.isScheduled=!1;var t=eE.trackingContext;if(eE.trackingContext=this,eg(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}eE.trackingContext=t,eV()}},e.track=function(t){if(!this.isDisposed){eT(),this.isRunning=!0;var e=eE.trackingContext;eE.trackingContext=this;var i=eb(this,t,void 0);eE.trackingContext=e,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&e_(this),em(i)&&this.reportExceptionInDerivation_(i.cause),eV()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)return void this.errorHandler_(t,this);if(eE.disableErrorBoundaries)throw t;eE.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",t),eE.globalReactionErrorHandlers.forEach(function(i){return i(t,e)})},e.dispose=function(){!this.isDisposed&&(this.isDisposed=!0,this.isRunning||(eT(),e_(this),eV()))},e.getDisposer_=function(t){var e=this,i=function i(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",i)};return null==t||null==t.addEventListener||t.addEventListener("abort",i),i[tS]=this,"dispose"in Symbol&&"symbol"==typeof Symbol.dispose&&(i[Symbol.dispose]=i),i},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1)},tp(t,[{key:"isDisposed",get:function(){return!!(this.flags_&t.isDisposedMask_)},set:function(e){this.flags_=tc(this.flags_,t.isDisposedMask_,e)}},{key:"isScheduled",get:function(){return!!(this.flags_&t.isScheduledMask_)},set:function(e){this.flags_=tc(this.flags_,t.isScheduledMask_,e)}},{key:"isTrackPending",get:function(){return!!(this.flags_&t.isTrackPendingMask_)},set:function(e){this.flags_=tc(this.flags_,t.isTrackPendingMask_,e)}},{key:"isRunning",get:function(){return!!(this.flags_&t.isRunningMask_)},set:function(e){this.flags_=tc(this.flags_,t.isRunningMask_,e)}},{key:"diffValue",get:function(){return+!!(this.flags_&t.diffValueMask_)},set:function(e){this.flags_=tc(this.flags_,t.diffValueMask_,1===e)}}])}();ez.isDisposedMask_=1,ez.isScheduledMask_=2,ez.isTrackPendingMask_=4,ez.isRunningMask_=8,ez.diffValueMask_=16;var eB=function(t){return t()};function eL(){eE.inBatch>0||eE.isRunningReactions||eB(eA)}function eA(){eE.isRunningReactions=!0;for(var t=eE.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var i=t.splice(0),s=0,n=i.length;s<n;s++)i[s].runReaction_()}eE.isRunningReactions=!1}var eF=ts("Reaction",ez),eI="action",eY="autoAction",eW="<unnamed action>",eU=tN(eI),eG=tN("action.bound",{bound:!0}),eq=tN(eY,{autoAction:!0}),e$=tN("autoAction.bound",{autoAction:!0,bound:!0});function eQ(t){return function(e,i){return H(e)?el(e.name||eW,e,t):H(i)?el(e,i,t):tx(i)?(t?eq:eU).decorate_20223_(e,i):K(i)?ty(e,i,t?eq:eU):K(e)?tw(tN(t?eY:eI,{name:e,autoAction:t})):void 0}}var eJ=eQ(!1);Object.assign(eJ,eU);var eH=eQ(!0);function eK(t){return eo(t.name||eW,!1,t,this,void 0)}function eX(t){return H(t)&&!0===t.isMobxAction}Object.assign(eH,eq),eJ.bound=tw(eG),eH.bound=tw(e$);var eZ=function(t){return t()};function e0(t,e,i){return e1("onBUO",t,e,i)}function e1(t,e,i,s){var n="function"==typeof s?iH(e,i):iH(e),r=H(s)?s:i,h=t+"L";return n[h]?n[h].add(r):n[h]=new Set([r]),function(){var t=n[h];t&&(t.delete(r),0===t.size&&delete n[h])}}var e2="always";function e3(t,e,i,s){var n=tu(e);return iX(function(){var e=iB(t,s)[tS];tl(n).forEach(function(t){e.extend_(t,n[t],!i||!(t in i)||i[t])})}),t}var e5=0;function e4(){this.message="FLOW_CANCELLED"}e4.prototype=Object.create(Error.prototype);var e6=tz("flow"),e9=tz("flow.bound",{bound:!0}),e8=Object.assign(function(t,e){if(tx(e))return e6.decorate_20223_(t,e);if(K(e))return ty(t,e,e6);var i=t.name||"<unnamed flow>",s=function(){var e,s=arguments,n=++e5,r=eJ(i+" - runid: "+n+" - init",t).apply(this,s),h=void 0,l=new Promise(function(t,s){var l=0;function o(t){var e;h=void 0;try{e=eJ(i+" - runid: "+n+" - yield "+l++,r.next).call(r,t)}catch(t){return s(t)}u(e)}function a(t){var e;h=void 0;try{e=eJ(i+" - runid: "+n+" - yield "+l++,r.throw).call(r,t)}catch(t){return s(t)}u(e)}function u(e){return H(null==e?void 0:e.then)?void e.then(u,s):e.done?t(e.value):(h=Promise.resolve(e.value)).then(o,a)}e=s,o(void 0)});return l.cancel=eJ(i+" - runid: "+n+" - cancel",function(){try{h&&e7(h);var t=r.return(void 0),i=Promise.resolve(t.value);i.then(J,J),e7(i),e(new e4)}catch(t){e(t)}}),l};return s.isMobXFlow=!0,s},e6);function e7(t){H(t.cancel)&&t.cancel()}function it(t){return(null==t?void 0:t.isMobXFlow)===!0}function ie(t){return!!t&&(iF(t)||!!t[tS]||tM(t)||eF(t)||ef(t))}function ii(t,e){void 0===e&&(e=void 0),eT();try{return t.apply(e)}finally{eV()}}e8.bound=tw(e9);var is={has:function(t,e){return t[tS].has_(e)},get:function(t,e){return t[tS].get_(e)},set:function(t,e,i){var s;return!!K(e)&&(null==(s=t[tS].set_(e,i,!0))||s)},deleteProperty:function(t,e){var i;return!!K(e)&&(null==(i=t[tS].delete_(e,!0))||i)},defineProperty:function(t,e,i){var s;return null==(s=t[tS].defineProperty_(e,i))||s},ownKeys:function(t){return t[tS].ownKeys_()},preventExtensions:function(t){B(13)}};function ir(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function ih(t,e){var i=t.interceptors_||(t.interceptors_=[]);return i.push(e),Q(function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)})}function il(t,e){var i=ey();try{for(var s=[].concat(t.interceptors_||[]),n=0,r=s.length;n<r&&((e=s[n](e))&&!e.type&&B(14),e);n++);return e}finally{ex(i)}}function io(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function ia(t,e){var i=t.changeListeners_||(t.changeListeners_=[]);return i.push(e),Q(function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)})}function iu(t,e){var i=ey(),s=t.changeListeners_;if(s){s=s.slice();for(var n=0,r=s.length;n<r;n++)s[n](e);ex(i)}}function ic(t,e,i){return iX(function(){var s=iB(t,i)[tS];null!=e||(ta(t,t_)||te(t,t_,tg({},t[t_])),e=t[t_]),tl(e).forEach(function(t){return s.make_(t,e[t])})}),t}var id=Symbol("mobx-keys"),ip="splice",im="update",ig={get:function(t,e){var i=t[tS];return e===tS?i:"length"===e?i.getArrayLength_():"string"!=typeof e||isNaN(e)?ta(ib,e)?ib[e]:t[e]:i.get_(parseInt(e))},set:function(t,e,i){var s=t[tS];return"length"===e&&s.setArrayLength_(i),"symbol"==typeof e||isNaN(e)?t[e]=i:s.set_(parseInt(e),i),!0},preventExtensions:function(){B(15)}},iv=function(){function t(t,e,i,s){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new tP(t),this.enhancer_=function(t,i){return e(t,i,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return ih(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ia(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&B("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var i=Array(t-e),s=0;s<t-e;s++)i[s]=void 0;this.spliceWithArray_(e,0,i)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&B(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&iJ(t+e+1)},e.spliceWithArray_=function(t,e,i){var s=this;ev(this.atom_);var n=this.values_.length;if(void 0===t?t=0:t>n?t=n:t<0&&(t=Math.max(0,n+t)),e=1==arguments.length?n-t:null==e?0:Math.max(0,Math.min(e,n-t)),void 0===i&&(i=W),ir(this)){var r=il(this,{object:this.proxy_,type:ip,index:t,removedCount:e,added:i});if(!r)return W;e=r.removedCount,i=r.added}if(i=0===i.length?i:i.map(function(t){return s.enhancer_(t,void 0)}),this.legacyMode_){var h=i.length-e;this.updateArrayLength_(n,h)}var l=this.spliceItemsIntoValues_(t,e,i);return(0!==e||0!==i.length)&&this.notifyArraySplice_(t,i,l),this.dehanceValues_(l)},e.spliceItemsIntoValues_=function(t,e,i){if(i.length<1e4){var s;return(s=this.values_).splice.apply(s,[t,e].concat(i))}var n=this.values_.slice(t,t+e),r=this.values_.slice(t+e);this.values_.length+=i.length-e;for(var h=0;h<i.length;h++)this.values_[t+h]=i[h];for(var l=0;l<r.length;l++)this.values_[t+i.length+l]=r[l];return n},e.notifyArrayChildUpdate_=function(t,e,i){var s=!this.owned_&&!1,n=io(this),r=n||s?{observableKind:"array",object:this.proxy_,type:im,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:i}:null;this.atom_.reportChanged(),n&&iu(this,r)},e.notifyArraySplice_=function(t,e,i){var s=!this.owned_&&!1,n=io(this),r=n||s?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ip,index:t,removed:i,added:e,removedCount:i.length,addedCount:e.length}:null;this.atom_.reportChanged(),n&&iu(this,r)},e.get_=function(t){return this.legacyMode_&&t>=this.values_.length?void console.warn("[mobx] Out of bounds read: "+t):(this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]))},e.set_=function(t,e){var i=this.values_;if(this.legacyMode_&&t>i.length&&B(17,t,i.length),t<i.length){ev(this.atom_);var s=i[t];if(ir(this)){var n=il(this,{type:im,object:this.proxy_,index:t,newValue:e});if(!n)return;e=n.newValue}(e=this.enhancer_(e,s))!==s&&(i[t]=e,this.notifyArrayChildUpdate_(t,e,s))}else{for(var r=Array(t+1-i.length),h=0;h<r.length-1;h++)r[h]=void 0;r[r.length-1]=e,this.spliceWithArray_(i.length,0,r)}},t}(),ib={clear:function(){return this.splice(0)},replace:function(t){var e=this[tS];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var i=arguments.length,s=Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];var r=this[tS];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray_(t);case 2:return r.spliceWithArray_(t,e)}return r.spliceWithArray_(t,e,s)},spliceWithArray:function(t,e,i){return this[tS].spliceWithArray_(t,e,i)},push:function(){for(var t=this[tS],e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.spliceWithArray_(t.values_.length,0,i),t.values_.length},pop:function(){return this.splice(Math.max(this[tS].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[tS],e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.spliceWithArray_(0,0,i),t.values_.length},reverse:function(){return eE.trackingDerivation&&B(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){eE.trackingDerivation&&B(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[tS],i=e.dehanceValues_(e.values_).indexOf(t);return i>-1&&(this.splice(i,1),!0)}};function i_(t,e){"function"==typeof Array.prototype[t]&&(ib[t]=e(t))}function iw(t){return function(){var e=this[tS];e.atom_.reportObserved();var i=e.dehanceValues_(e.values_);return i[t].apply(i,arguments)}}function iy(t){return function(e,i){var s=this,n=this[tS];return n.atom_.reportObserved(),n.dehanceValues_(n.values_)[t](function(t,n){return e.call(i,t,n,s)})}}function ix(t){return function(){var e=this,i=this[tS];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_),n=arguments[0];return arguments[0]=function(t,i,s){return n(t,i,s,e)},s[t].apply(s,arguments)}}i_("at",iw),i_("concat",iw),i_("flat",iw),i_("includes",iw),i_("indexOf",iw),i_("join",iw),i_("lastIndexOf",iw),i_("slice",iw),i_("toString",iw),i_("toLocaleString",iw),i_("toSorted",iw),i_("toSpliced",iw),i_("with",iw),i_("every",iy),i_("filter",iy),i_("find",iy),i_("findIndex",iy),i_("findLast",iy),i_("findLastIndex",iy),i_("flatMap",iy),i_("forEach",iy),i_("map",iy),i_("some",iy),i_("toReversed",iy),i_("reduce",ix),i_("reduceRight",ix);var iS=ts("ObservableArrayAdministration",iv);function iP(t){return X(t)&&iS(t[tS])}var iM={},iO="delete",iC=function(){function t(t,e,i){var s=this;void 0===e&&(e=tE),void 0===i&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[tS]=iM,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=i,H(Map)||B(18),iX(function(){s.keysAtom_=tO("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,t&&s.merge(t)})}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!eE.trackingDerivation)return this.has_(t);var i=this.hasMap_.get(t);if(!i){var s=i=new ec(this.has_(t),tD,"ObservableMap.key?",!1);this.hasMap_.set(t,s),e0(s,function(){return e.hasMap_.delete(t)})}return i.get()},e.set=function(t,e){var i=this.has_(t);if(ir(this)){var s=il(this,{type:i?im:"add",object:this,newValue:e,name:t});if(!s)return this;e=s.newValue}return i?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if(ev(this.keysAtom_),ir(this)&&!il(this,{type:iO,object:this,name:t}))return!1;if(this.has_(t)){var i=io(this),s=i?{observableKind:"map",debugObjectName:this.name_,type:iO,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return ii(function(){var i;e.keysAtom_.reportChanged(),null==(i=e.hasMap_.get(t))||i.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)}),i&&iu(this,s),!0}return!1},e.updateValue_=function(t,e){var i=this.data_.get(t);if((e=i.prepareNewValue_(e))!==eE.UNCHANGED){var s=io(this),n=s?{observableKind:"map",debugObjectName:this.name_,type:im,object:this,oldValue:i.value_,name:t,newValue:e}:null;i.setNewValue_(e),s&&iu(this,n)}},e.addValue_=function(t,e){var i=this;ev(this.keysAtom_),ii(function(){var s,n=new ec(e,i.enhancer_,"ObservableMap.key",!1);i.data_.set(t,n),e=n.value_,null==(s=i.hasMap_.get(t))||s.setNewValue_(!0),i.keysAtom_.reportChanged()});var s=io(this),n=s?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:t,newValue:e}:null;s&&iu(this,n)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return iE({next:function(){var i=e.next(),s=i.done,n=i.value;return{done:s,value:s?void 0:t.get(n)}}})},e.entries=function(){var t=this,e=this.keys();return iE({next:function(){var i=e.next(),s=i.done,n=i.value;return{done:s,value:s?void 0:[n,t.get(n)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(t,e){for(var i,s=tm(this);!(i=s()).done;){var n=i.value,r=n[0],h=n[1];t.call(e,h,r,this)}},e.merge=function(t){var e=this;return ik(t)&&(t=new Map(t)),ii(function(){Z(t)?(function(t){var e=Object.keys(t);if(!th)return e;var i=Object.getOwnPropertySymbols(t);return i.length?[].concat(e,i.filter(function(e){return Y.propertyIsEnumerable.call(t,e)})):e})(t).forEach(function(i){return e.set(i,t[i])}):Array.isArray(t)?t.forEach(function(t){var i=t[0],s=t[1];return e.set(i,s)}):tn(t)?(null!==Object.getPrototypeOf(Object.getPrototypeOf(Object.getPrototypeOf(t)))&&B(19,t),t.forEach(function(t,i){return e.set(i,t)})):null!=t&&B(20,t)}),this},e.clear=function(){var t=this;ii(function(){ew(function(){for(var e,i=tm(t.keys());!(e=i()).done;){var s=e.value;t.delete(s)}})})},e.replace=function(t){var e=this;return ii(function(){for(var i,s=function(t){if(tn(t)||ik(t))return t;if(Array.isArray(t))return new Map(t);if(!Z(t))return B(21,t);var e=new Map;for(var i in t)e.set(i,t[i]);return e}(t),n=new Map,r=!1,h=tm(e.data_.keys());!(i=h()).done;){var l=i.value;if(!s.has(l))if(e.delete(l))r=!0;else{var o=e.data_.get(l);n.set(l,o)}}for(var a,u=tm(s.entries());!(a=u()).done;){var c=a.value,d=c[0],f=c[1],p=e.data_.has(d);if(e.set(d,f),e.data_.has(d)){var m=e.data_.get(d);n.set(d,m),p||(r=!0)}}if(!r)if(e.data_.size!==n.size)e.keysAtom_.reportChanged();else for(var g=e.data_.keys(),v=n.keys(),b=g.next(),_=v.next();!b.done;){if(b.value!==_.value){e.keysAtom_.reportChanged();break}b=g.next(),_=v.next()}e.data_=n}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return ia(this,t)},e.intercept_=function(t){return ih(this,t)},tp(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),ik=ts("ObservableMap",iC);function iE(t){return t[Symbol.toStringTag]="MapIterator",i3(t)}var iD={},iN=function(){function t(t,e,i){var s=this;void 0===e&&(e=tE),void 0===i&&(i="ObservableSet"),this.name_=void 0,this[tS]=iD,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,H(Set)||B(22),this.enhancer_=function(t,s){return e(t,s,i)},iX(function(){s.atom_=tO(s.name_),t&&s.replace(t)})}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;ii(function(){ew(function(){for(var e,i=tm(t.data_.values());!(e=i()).done;){var s=e.value;t.delete(s)}})})},e.forEach=function(t,e){for(var i,s=tm(this);!(i=s()).done;){var n=i.value;t.call(e,n,n,this)}},e.add=function(t){var e=this;if(ev(this.atom_),ir(this)){var i=il(this,{type:"add",object:this,newValue:t});if(!i)return this;t=i.newValue}if(!this.has(t)){ii(function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()});var s=io(this),n=s?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:t}:null;s&&iu(this,n)}return this},e.delete=function(t){var e=this;if(ir(this)&&!il(this,{type:iO,object:this,oldValue:t}))return!1;if(this.has(t)){var i=io(this),s=i?{observableKind:"set",debugObjectName:this.name_,type:iO,object:this,oldValue:t}:null;return ii(function(){e.atom_.reportChanged(),e.data_.delete(t)}),i&&iu(this,s),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=this.values();return iV({next:function(){var e=t.next(),i=e.value,s=e.done;return s?{value:void 0,done:s}:{value:[i,i],done:s}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=this.data_.values();return iV({next:function(){var i=e.next(),s=i.value,n=i.done;return n?{value:void 0,done:n}:{value:t.dehanceValue_(s),done:n}}})},e.intersection=function(t){return tr(t)&&!iT(t)?t.intersection(this):new Set(this).intersection(t)},e.union=function(t){return tr(t)&&!iT(t)?t.union(this):new Set(this).union(t)},e.difference=function(t){return new Set(this).difference(t)},e.symmetricDifference=function(t){return tr(t)&&!iT(t)?t.symmetricDifference(this):new Set(this).symmetricDifference(t)},e.isSubsetOf=function(t){return new Set(this).isSubsetOf(t)},e.isSupersetOf=function(t){return new Set(this).isSupersetOf(t)},e.isDisjointFrom=function(t){return tr(t)&&!iT(t)?t.isDisjointFrom(this):new Set(this).isDisjointFrom(t)},e.replace=function(t){var e=this;return iT(t)&&(t=new Set(t)),ii(function(){Array.isArray(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):tr(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):null!=t&&B("Cannot initialize set from "+t)}),this},e.observe_=function(t,e){return ia(this,t)},e.intercept_=function(t){return ih(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},tp(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),iT=ts("ObservableSet",iN);function iV(t){return t[Symbol.toStringTag]="SetIterator",i3(t)}var iR=Object.create(null),ij="remove",iz=function(){function t(t,e,i,s){void 0===e&&(e=new Map),void 0===s&&(s=tJ),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new tP("ObservableObject.keys"),this.isPlainObject_=Z(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var i=this.values_.get(t);if(i instanceof ed)return i.set(e),!0;if(ir(this)){var s=il(this,{type:im,object:this.proxy_||this.target_,name:t,newValue:e});if(!s)return null;e=s.newValue}if((e=i.prepareNewValue_(e))!==eE.UNCHANGED){var n=io(this),r=n?{type:im,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:i.value_,name:t,newValue:e}:null;i.setNewValue_(e),n&&iu(this,r)}return!0},e.get_=function(t){return eE.trackingDerivation&&!ta(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,i){return(void 0===i&&(i=!1),ta(this.target_,t))?this.values_.has(t)?this.setObservablePropValue_(t,e):i?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,i)},e.has_=function(t){if(!eE.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new ec(t in this.target_,tD,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(iY(this,e,t),!(t in this.target_)){var i;if(null!=(i=this.target_[t_])&&i[t])return;B(1,e.annotationType_,this.name_+"."+t.toString())}for(var s=this.target_;s&&s!==Y;){var n=F(s,t);if(n){var r=e.make_(this,t,n,s);if(0===r)return;if(1===r)break}s=Object.getPrototypeOf(s)}iI(this,e,t)}},e.extend_=function(t,e,i,s){if(void 0===s&&(s=!1),!0===i&&(i=this.defaultAnnotation_),!1===i)return this.defineProperty_(t,e,s);iY(this,i,t);var n=i.extend_(this,t,e,s);return n&&iI(this,i,t),n},e.defineProperty_=function(t,e,i){void 0===i&&(i=!1),ev(this.keysAtom_);try{eT();var s=this.delete_(t);if(!s)return s;if(ir(this)){var n=il(this,{object:this.proxy_||this.target_,name:t,type:"add",newValue:e.value});if(!n)return null;var r=n.newValue;e.value!==r&&(e=tg({},e,{value:r}))}if(i){if(!Reflect.defineProperty(this.target_,t,e))return!1}else I(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{eV()}return!0},e.defineObservableProperty_=function(t,e,i,s){void 0===s&&(s=!1),ev(this.keysAtom_);try{eT();var n=this.delete_(t);if(!n)return n;if(ir(this)){var r=il(this,{object:this.proxy_||this.target_,name:t,type:"add",newValue:e});if(!r)return null;e=r.newValue}var h=iA(t),l={configurable:!eE.safeDescriptors||this.isPlainObject_,enumerable:!0,get:h.get,set:h.set};if(s){if(!Reflect.defineProperty(this.target_,t,l))return!1}else I(this.target_,t,l);var o=new ec(e,i,"ObservableObject.key",!1);this.values_.set(t,o),this.notifyPropertyAddition_(t,o.value_)}finally{eV()}return!0},e.defineComputedProperty_=function(t,e,i){void 0===i&&(i=!1),ev(this.keysAtom_);try{eT();var s=this.delete_(t);if(!s)return s;if(ir(this)&&!il(this,{object:this.proxy_||this.target_,name:t,type:"add",newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var n=iA(t),r={configurable:!eE.safeDescriptors||this.isPlainObject_,enumerable:!1,get:n.get,set:n.set};if(i){if(!Reflect.defineProperty(this.target_,t,r))return!1}else I(this.target_,t,r);this.values_.set(t,new ed(e)),this.notifyPropertyAddition_(t,void 0)}finally{eV()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),ev(this.keysAtom_),!ta(this.target_,t))return!0;if(ir(this)&&!il(this,{object:this.proxy_||this.target_,name:t,type:ij}))return null;try{eT();var i,s,n=io(this),r=this.values_.get(t),h=void 0;if(!r&&(n||0)&&(h=null==(s=F(this.target_,t))?void 0:s.value),e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(r&&(this.values_.delete(t),r instanceof ec&&(h=r.value_),ej(r)),this.keysAtom_.reportChanged(),null==(i=this.pendingKeys_)||null==(i=i.get(t))||i.set(t in this.target_),n||0){var l={type:ij,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:h,name:t};n&&iu(this,l)}}finally{eV()}return!0},e.observe_=function(t,e){return ia(this,t)},e.intercept_=function(t){return ih(this,t)},e.notifyPropertyAddition_=function(t,e){var i,s=io(this);if(s){var n=s?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;s&&iu(this,n)}null==(i=this.pendingKeys_)||null==(i=i.get(t))||i.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),tl(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function iB(t,e){if(ta(t,tS))return t;var i,s,n=null!=(s=null==e?void 0:e.name)?s:"ObservableObject",r=new iz(t,new Map,String(n),e?null!=(i=e.defaultDecorator)?i:tH(e):void 0);return te(t,tS,r),t}var iL=ts("ObservableObjectAdministration",iz);function iA(t){return iR[t]||(iR[t]={get:function(){return this[tS].getObservablePropValue_(t)},set:function(e){return this[tS].setObservablePropValue_(t,e)}})}function iF(t){return!!X(t)&&iL(t[tS])}function iI(t,e,i){var s;null==(s=t.target_[t_])||delete s[i]}function iY(t,e,i){}var iW=iQ(0),iU=(n=!1,Object.defineProperty(r={},"0",{set:function(){n=!0}}),Object.create(r)["0"]=1,!1===n),iG=0,iq=function(){};h=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(iq.prototype,h):void 0!==iq.prototype.__proto__?iq.prototype.__proto__=h:iq.prototype=h;var i$=function(t){function e(e,i,s,n){var r;return void 0===s&&(s="ObservableArray"),void 0===n&&(n=!1),r=t.call(this)||this,iX(function(){var t=new iv(s,i,n,!0);t.proxy_=r,ti(r,tS,t),e&&e.length&&r.spliceWithArray(0,0,e),iU&&Object.defineProperty(r,"0",iW)}),r}tv(e,t);var i=e.prototype;return i.concat=function(){this[tS].atom_.reportObserved();for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return Array.prototype.concat.apply(this.slice(),e.map(function(t){return iP(t)?t.slice():t}))},i[Symbol.iterator]=function(){var t=this,e=0;return i3({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},tp(e,[{key:"length",get:function(){return this[tS].getArrayLength_()},set:function(t){this[tS].setArrayLength_(t)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(iq);function iQ(t){return{enumerable:!1,configurable:!0,get:function(){return this[tS].get_(t)},set:function(e){this[tS].set_(t,e)}}}function iJ(t){if(t>iG){for(var e,i=iG;i<t+100;i++)e=i,I(i$.prototype,""+e,iQ(e));iG=t}}function iH(t,e){if("object"==typeof t&&null!==t){if(iP(t))return void 0!==e&&B(23),t[tS].atom_;if(iT(t))return t.atom_;if(ik(t)){if(void 0===e)return t.keysAtom_;var i=t.data_.get(e)||t.hasMap_.get(e);return i||B(25,e,iK(t)),i}if(iF(t)){if(!e)return B(26);var s=t[tS].values_.get(e);return s||B(27,e,iK(t)),s}if(tM(t)||ef(t)||eF(t))return t}else if(H(t)&&eF(t[tS]))return t[tS];B(28)}function iK(t,e){var i;if(void 0!==e)i=iH(t,e);else{if(eX(t))return t.name;i=iF(t)||ik(t)||iT(t)?function t(e,i){return(e||B(29),void 0!==i)?t(iH(e,i)):tM(e)||ef(e)||eF(e)||ik(e)||iT(e)?e:e[tS]?e[tS]:void B(24,e)}(t):iH(t)}return i.name_}function iX(t){var e=ey(),i=ea(!0);eT();try{return t()}finally{eV(),eu(i),ex(e)}}Object.entries(ib).forEach(function(t){var e=t[0],i=t[1];"concat"!==e&&te(i$.prototype,e,i)}),iJ(1e3);var iZ=Y.toString;function i0(t,e,i){return void 0===i&&(i=-1),function t(e,i,s,n,r){if(e===i)return 0!==e||1/e==1/i;if(null==e||null==i)return!1;if(e!=e)return i!=i;var h=typeof e;if("function"!==h&&"object"!==h&&"object"!=typeof i)return!1;var l=iZ.call(e);if(l!==iZ.call(i))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+e==""+i;case"[object Number]":if(+e!=+e)return+i!=+i;return 0==+e?1/e==1/i:+e==+i;case"[object Date]":case"[object Boolean]":return+e==+i;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(i);case"[object Map]":case"[object Set]":s>=0&&s++}e=i1(e),i=i1(i);var o="[object Array]"===l;if(!o){if("object"!=typeof e||"object"!=typeof i)return!1;var a=e.constructor,u=i.constructor;if(a!==u&&!(H(a)&&a instanceof a&&H(u)&&u instanceof u)&&"constructor"in e&&"constructor"in i)return!1}if(0===s)return!1;s<0&&(s=-1),r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return r[c]===i;if(n.push(e),r.push(i),o){if((c=e.length)!==i.length)return!1;for(;c--;)if(!t(e[c],i[c],s-1,n,r))return!1}else{var d=Object.keys(e),f=d.length;if(Object.keys(i).length!==f)return!1;for(var p=0;p<f;p++){var m=d[p];if(!(ta(i,m)&&t(e[m],i[m],s-1,n,r)))return!1}}return n.pop(),r.pop(),!0}(t,e,i)}function i1(t){return iP(t)?t.slice():tn(t)||ik(t)||tr(t)||iT(t)?Array.from(t.entries()):t}var i2=(null==(x=L().Iterator)?void 0:x.prototype)||{};function i3(t){return t[Symbol.iterator]=i5,Object.assign(Object.create(i2),t)}function i5(){return this}if(["Symbol","Map","Set"].forEach(function(t){void 0===L()[t]&&B("MobX requires global '"+t+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:iK},$mobx:tS}),!z.useState)throw Error("mobx-react-lite requires React with Hooks support");if(!ic)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var i4=t.i(19953);function i6(t){return function t(e){var i={name:e.name_};return e.observing_&&e.observing_.length>0&&(i.dependencies=Array.from(new Set(e.observing_)).map(t)),i}(iH(t,void 0))}var i9=function(){function t(t){var e=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=1e4),clearTimeout(e.sweepTimeout),e.sweepTimeout=void 0;var i=Date.now();e.registrations.forEach(function(s,n){i-s.registeredAt>=t&&(e.finalize(s.value),e.registrations.delete(n))}),e.registrations.size>0&&e.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e,i){this.registrations.set(i,{value:e,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),t}(),i8=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:i9)(function(t){var e;null==(e=t.reaction)||e.dispose(),t.reaction=null}),i7=t.i(2239);function st(t){t.reaction=new ez("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),null==(e=t.onStoreChange)||e.call(t)})}var se="function"==typeof Symbol&&Symbol.for,si=null!=(P=null==(S=Object.getOwnPropertyDescriptor(function(){},"name"))?void 0:S.configurable)&&P,ss=se?Symbol.for("react.forward_ref"):"function"==typeof z.forwardRef&&(0,z.forwardRef)(function(t){return null}).$$typeof,sn=se?Symbol.for("react.memo"):"function"==typeof z.memo&&(0,z.memo)(function(t){return null}).$$typeof;function sr(t,e){if(sn&&t.$$typeof===sn)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i,s,n,r=null!=(n=null==e?void 0:e.forwardRef)&&n,h=t,l=t.displayName||t.name;if(ss&&t.$$typeof===ss&&(r=!0,"function"!=typeof(h=t.render)))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var o=function(t,e){return function(t,e){void 0===e&&(e="observed");var i,s,n=z.default.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(t){return i8.unregister(r),r.onStoreChange=t,r.reaction||(st(r),r.stateVersion=Symbol()),function(){var t;r.onStoreChange=null,null==(t=r.reaction)||t.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var h=n.current;if(h.reaction||(st(h),i8.register(n,h,h)),z.default.useDebugValue(h.reaction,i6),(0,i7.useSyncExternalStore)(h.subscribe,h.getSnapshot,h.getSnapshot),h.reaction.track(function(){try{i=t()}catch(t){s=t}}),s)throw s;return i}(function(){return h(t,e)},l)};return o.displayName=t.displayName,si&&Object.defineProperty(o,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(o.contextTypes=t.contextTypes),r&&(o=(0,z.forwardRef)(o)),i=t,s=o=(0,z.memo)(o),Object.keys(i).forEach(function(t){sh[t]||Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(i,t))}),o}var sh={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(l=i4.unstable_batchedUpdates)||(l=function(t){t()}),function(t){!0===t.isolateGlobalState&&function(){if((eE.pendingReactions.length||eE.inBatch||eE.isRunningReactions)&&B(36),ek=!0,eC){var t=L();0==--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),eE=new eO}}();var e,i,s=t.useProxies,n=t.enforceActions;if(void 0!==s&&(eE.useProxies=s===e2||"never"!==s&&"undefined"!=typeof Proxy),"ifavailable"===s&&(eE.verifyProxies=!0),void 0!==n){var r=n===e2?e2:"observed"===n;eE.enforceActions=r,eE.allowStateChanges=!0!==r&&r!==e2}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(e){e in t&&(eE[e]=!!t[e])}),eE.allowStateReads=!eE.observableRequiresReaction,t.reactionScheduler&&(e=t.reactionScheduler,i=eB,eB=function(t){return e(function(){return i(t)})})}({reactionScheduler:l}),i8.finalizeAllImmediately;class sl{visibleData=[];futureData=[];initialData=[];addedBars=[];onUpdateCallbacks=[];onFinishCallbacks=[];timerId=null;tickIntervalMs=100;totalDurationMs;barDurationMs=2500;stepsPerBar=1;currentFutureIndex=0;currentStepInBar=0;currentBarPath=[];constructor(t=3e5,e){this.totalDurationMs=t,void 0!==e&&(this.barDurationMs=e)}getIntervalMs(t){return({"15m":9e5,"1h":36e5,"2h":72e5,"4h":144e5,"8h":288e5,"12h":432e5,"1d":864e5,"1w":6048e5,"1M":2592e6})[t]||36e5}async loadChartData(t="1h"){try{let e=await fetch(`/data/history.${t}.json`),i=await e.json(),s=this.getIntervalMs(t),n=Date.now()-i.data.length*s,r=i.data.map((t,e)=>{let[i,r,h,l]=t;return{time:n+e*s,open:r,high:i,low:l,close:h}}),h=Math.floor(this.totalDurationMs/this.barDurationMs),l=this.getRandomChartData(r,100+h),o=this.convertRelativeToAbsolute(l);return this.initialData=o.slice(0,Math.min(100,o.length)),this.visibleData=this.initialData.slice(),this.futureData=o.length>100?o.slice(100):[],this.addedBars=[],this.currentFutureIndex=0,this.currentStepInBar=0,this.visibleData}catch(t){throw console.error("   :",t),t}}getCurrentPrice(t){return 0===t.length?0:t[t.length-1].close}getCurrentTime(t){return 0===t.length?0:t[t.length-1].time}getAllChartData(){return[...this.initialData,...this.futureData]}getRandomChartData(t,e){let i=[];if(0===t.length||e<=0)return i;if(t.length<=20&&t.length<=e)return t.slice();for(;i.length<e;){let s,n=e-i.length;if((s=n<=100?n:20+Math.floor(81*Math.random()))>t.length&&(s=t.length),s<=0)break;let r=Math.floor(Math.random()*(t.length-s+1)),h=t.slice(r,r+s);i.push(...h)}return i}onUpdate(t){this.onUpdateCallbacks.push(t)}onFinish(t){this.onFinishCallbacks.push(t)}start(t=10){if(this.clearTimer(),this.tickIntervalMs=t,this.stepsPerBar=Math.max(1,Math.round(this.barDurationMs/this.tickIntervalMs)),this.currentFutureIndex=0,this.currentStepInBar=0,!this.visibleData.length||!this.futureData.length)return;let e=Date.now()+this.totalDurationMs;this.timerId=window.setInterval(()=>{Date.now()>=e?this.finish():this.tickOnce()},this.tickIntervalMs)}clearTimer(){null!==this.timerId&&(clearInterval(this.timerId),this.timerId=null)}stop(){this.clearTimer(),this.onUpdateCallbacks=[],this.onFinishCallbacks=[]}finish(){this.clearTimer();let t=[],e=this.addedBars.length,i=Math.max(0,Math.min(this.initialData.length,100-e));if(i<this.initialData.length){let e=this.initialData.slice(0,this.initialData.length-i);t.push(...e)}t.push(...this.visibleData);let s=this.visibleData;this.visibleData=t,this.onUpdateCallbacks.forEach(t=>t(this.visibleData,1)),this.visibleData=s,this.onFinishCallbacks.forEach(t=>t())}buildBarPath(t,e){if(e<=1)return[t.close];let{open:i,high:s,low:n,close:r}=t,h=[i],l=.5>Math.random()?[n,s]:[s,n];h.push(l[0]);let o=s-n||1,a=e>6&&.45>Math.random()?2:1;for(let t=0;t<a;t++){let e=(t%2==0?l[0]===n:l[0]===s)?.65:.35,i=n+o*Math.max(.05,Math.min(.95,e+(Math.random()-.5)*.2));h.push(i)}if(h.push(l[1]),.35>Math.random()){let t=n+o*(.4+.2*Math.random());h.push(t)}h.push(r);let u=h.length-1,c=Array(u).fill(1),d=Math.max(0,e-1-u);for(;d>0;){let t=Math.floor(Math.random()*u);c[t]+=1,d-=1}let f=[h[0]];for(let t=0;t<u;t++){let e=h[t],i=h[t+1],s=c[t];for(let t=1;t<=s;t++){let n=e+(i-e)*(0===s?1:t/s);f.push(n)}}if(f.length>e)return f.slice(0,e);for(;f.length<e;)f.push(r);return f}tickOnce(){if(!this.visibleData.length||!this.futureData.length||this.currentFutureIndex>=this.futureData.length)return void this.finish();let t=this.futureData[this.currentFutureIndex],e=this.stepsPerBar;0!==this.currentStepInBar&&this.currentBarPath.length||(this.currentBarPath=this.buildBarPath(t,e));let i=this.currentBarPath[this.currentStepInBar]??t.close,s=this.currentBarPath.slice(0,Math.min(this.currentStepInBar+1,this.currentBarPath.length)),n=Math.max(...s),r=Math.min(...s),h={time:t.time,open:t.open,close:i,high:n,low:r},l=this.visibleData.slice();0===this.currentStepInBar?(l.push(h),this.addedBars.push(t),l.length>100&&l.shift()):l[l.length-1]=h,this.currentStepInBar+=1;let o=e<=1?1:Math.min(1,this.currentStepInBar/e);if(this.currentStepInBar>=e){if(l[l.length-1]=t,this.visibleData=l.length>100?l.slice(l.length-100):l,this.currentFutureIndex+=1,this.currentStepInBar=0,this.currentBarPath=[],this.currentFutureIndex>=this.futureData.length){this.onUpdateCallbacks.forEach(t=>t(this.visibleData,1)),this.finish();return}}else this.visibleData=l;this.onUpdateCallbacks.forEach(t=>t(this.visibleData,o))}convertRelativeToAbsolute(t){if(0===t.length)return t;let e=[],i=null,s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()-(t.length-1)*864e5;for(let s=0;s<t.length;s++){let r,h,l,o,a=t[s];null===i?(h=(r=1)*a.high,l=r*a.close,o=r*a.low):(r=i*a.open,h=i*a.high,l=i*a.close,o=i*a.low),i=l,e.push({time:n+864e5*s,open:r,high:h,low:o,close:l})}return e}}let so=[{value:6e4,label:"1 "},{value:12e4,label:"2 "},{value:3e5,label:"5 "},{value:6e5,label:"10 "}],sa={1:"15m",2:"1h",3:"2h",4:"4h",5:"8h",6:"12h",7:"1d",8:"1w",9:"1M",10:"1M"},su={1:10,2:20,3:30,4:40,5:50,6:60,7:70,8:80,9:90,10:100},sc={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},sd=class{initialBalance;volatility=0;currentOpenPosition=null;transactions=[];totalProfitFromClosed=0;constructor(t=1e4){this.initialBalance=t}setVolatility(t){this.volatility=Math.max(0,t)}generateTransactionId(){return`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}calculateCommission(t){return t*(5e-4+.0045000000000000005*Math.min(1,this.volatility))}openPosition(t,e,i,s){if(this.currentOpenPosition||this.openPositions.length>0)return!1;let n=this.getBalance(i);if(n<=0)return!1;let r={id:this.generateTransactionId(),type:t,openPrice:i,openTime:s,amount:e,isOpen:!0,balanceAtOpen:n};return this.currentOpenPosition=r,this.transactions.push(r),!0}closePosition(t,e,i){let s=i?this.transactions.find(t=>t.id===i&&t.isOpen):this.currentOpenPosition;if(!s||!s.isOpen)return!1;let n=this.currentOpenPosition?.id!==void 0&&this.currentOpenPosition.id===s.id,r=0;r="long"===s.type?(t-s.openPrice)/s.openPrice*s.amount:(s.openPrice-t)/s.openPrice*s.amount,s.closePrice=t,s.closeTime=e;let h=2*this.calculateCommission(s.amount),l=r-h;return s.fee=h,s.profit=l,s.isOpen=!1,n&&(this.currentOpenPosition=null),this.currentOpenPosition||(this.currentOpenPosition=this.transactions.find(t=>t.isOpen)??null),this.totalProfitFromClosed+=l,!0}getBalance(t){let e=this.initialBalance+this.totalProfitFromClosed;if(this.currentOpenPosition){let i=0;return i="long"===this.currentOpenPosition.type?(t-this.currentOpenPosition.openPrice)/this.currentOpenPosition.openPrice*this.currentOpenPosition.amount:(this.currentOpenPosition.openPrice-t)/this.currentOpenPosition.openPrice*this.currentOpenPosition.amount,(this.currentOpenPosition.balanceAtOpen??e)+i}return e}getRealizedBalance(){return this.initialBalance+this.totalProfitFromClosed}getCurrentOpenPosition(){return this.currentOpenPosition}getBalanceAtOpen(){return this.currentOpenPosition?.balanceAtOpen!==void 0?this.currentOpenPosition.balanceAtOpen:this.initialBalance+this.totalProfitFromClosed}get hasOpenPosition(){return null!==this.currentOpenPosition}get currentPositionType(){return this.currentOpenPosition?.type||null}get openPositions(){return this.transactions.filter(t=>t.isOpen)}get closedPositions(){return this.transactions.filter(t=>!t.isOpen)}reset(){this.currentOpenPosition=null,this.transactions=[],this.totalProfitFromClosed=0,this.volatility=0}},sf=new class extends sd{constructor(t=1e4){super(t),ic(this,{currentOpenPosition:t8,transactions:t8,openPosition:eJ,closePosition:eJ,reset:eJ,hasOpenPosition:ei,currentPositionType:ei,openPositions:ei,closedPositions:ei})}},sp=new class extends sd{lookaheadBars=1;chartData=[];targetPrice=null;openBarIndex=null;lastCloseBarIndex=null;constructor(t=1e4){super(t),ic(this,{currentOpenPosition:t8,transactions:t8,lookaheadBars:t8,openPosition:eJ,closePosition:eJ,reset:eJ,hasOpenPosition:ei,currentPositionType:ei,openPositions:ei,closedPositions:ei,setBotParams:eJ,setChartData:eJ,simulateTrading:eJ,updatePosition:eJ,closeAllOpenPositions:eJ})}generateTransactionId(){return`bot_tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setBotParams(t){eK(()=>{let e=Math.max(1,Math.min(100,t));this.lookaheadBars=Math.max(1,Math.min(10,Math.ceil(e/10)))})}setChartData(t){eK(()=>{this.chartData=t,this.clearTargets()})}simulateTrading(){eK(()=>{if(this.reset(),0!==this.chartData.length)for(let t of this.chartData)this.processTick(t.close,t.time)})}updatePosition(t,e){eK(()=>{this.processTick(t,e)})}closeAllOpenPositions(t,e){eK(()=>{let i=this.openPositions,s=this.findCurrentIndex(e);for(let s of i)this.closePosition(t,e,s.id);this.clearTargets(),this.openBarIndex=null,this.lastCloseBarIndex=s>=0?s:null})}reset(){super.reset(),this.clearTargets(),this.openBarIndex=null,this.lastCloseBarIndex=null}clearTargets(){this.targetPrice=null}processTick(t,e){if(0===this.chartData.length)return;let i=this.findCurrentIndex(e);if(i<0)return;let s=this.currentOpenPosition??this.openPositions[0]??null;if(!this.currentOpenPosition&&s&&(this.currentOpenPosition=s),this.tryCloseAtTarget(t,e,i)||this.currentOpenPosition||this.openPositions.length>0)return;let n=this.findBestOpportunity(i,t);if(!n||null!==this.lastCloseBarIndex&&i<=this.lastCloseBarIndex)return;let r=this.getBalance(t);r<=0||(this.targetPrice=n.targetPrice,this.openPosition(n.direction,r,t,e),this.openBarIndex=i)}findCurrentIndex(t){if(0===this.chartData.length)return -1;let e=this.chartData.findIndex(e=>e.time>t);return -1===e?this.chartData.length-1:Math.max(0,e-1)}tryCloseAtTarget(t,e,i){return!!this.currentOpenPosition&&(null===this.openBarIndex||!(i<=this.openBarIndex))&&(null===this.targetPrice||("long"===this.currentOpenPosition.type?t>=this.targetPrice:t<=this.targetPrice))&&(this.closePosition(t,e),this.clearTargets(),this.lastCloseBarIndex=i,this.openBarIndex=null,!0)}findBestOpportunity(t,e){let i=t+1,s=Math.min(this.chartData.length,i+this.lookaheadBars);if(i>=s)return null;let n=-1/0,r=0,h=1/0,l=0;for(let t=i;t<s;t++){let e=this.chartData[t];e.high>n&&(n=e.high,r=e.time),e.low<h&&(h=e.low,l=e.time)}let o=n-e,a=e-h;return o<=0&&a<=0?null:o>=a?{direction:"long",targetPrice:n,targetTime:r}:{direction:"short",targetPrice:h,targetTime:l}}},sm=new class{chartData=[];currentPrice=0;currentTime=0;currentBarProgress=0;isLoading=!1;gameStatus="idle";selectedInterval="1h";botDifficulty=5;countdownSeconds=0;analyticsMode="player";chartDataService;countdownTimerId=null;getAllChartData(){return this.chartDataService?this.chartDataService.getAllChartData():[]}constructor(){!function(t,e,i){Z(t)?e3(t,t,void 0,void 0):iX(function(){var e=iB(t,void 0)[tS];if(!t[id]){var i=Object.getPrototypeOf(t),s=new Set([].concat(tl(t),tl(i)));s.delete("constructor"),s.delete(tS),te(i,id,s)}t[id].forEach(function(t){return e.make_(t,!0)})})}(this),this.chartDataService=new sl}async loadChartData(t="1h"){eK(()=>{this.isLoading=!0});try{let e=await this.chartDataService.loadChartData(t);eK(()=>{this.chartData=e,this.chartData.length>0&&(this.currentPrice=this.chartDataService.getCurrentPrice(this.chartData),this.currentTime=this.chartDataService.getCurrentTime(this.chartData)),this.isLoading=!1,this.syncVolatility()})}catch(t){eK(()=>{this.isLoading=!1,console.error("   :",t)})}}async startDemoGame(){await this.prepareGame({interval:"1h",gameDurationMs:9e5,botDifficulty:5},!0),this.startGame(!0)}startCountdown(t){this.clearCountdown(),eK(()=>{this.countdownSeconds=3}),this.countdownTimerId=window.setInterval(()=>{eK(()=>{this.countdownSeconds--,this.countdownSeconds<=0&&(this.clearCountdown(),t())})},1e3)}clearCountdown(){null!==this.countdownTimerId&&(window.clearInterval(this.countdownTimerId),this.countdownTimerId=null),eK(()=>{this.countdownSeconds=0})}setAnalyticsMode(t){this.analyticsMode=t}async prepareGame(t,e=!1){if(this.chartDataService&&this.chartDataService.stop(),this.selectedInterval=t.interval,this.botDifficulty=t.botDifficulty,!e){sf.reset(),sp.reset(),this.chartData=[],this.gameStatus="started",this.analyticsMode="player";let e=su[t.botDifficulty];sp.setBotParams(e)}this.chartDataService=new sl(t.gameDurationMs),this.chartDataService.onUpdate((t,e)=>{eK(()=>{this.chartData=t,this.currentBarProgress=e,this.chartData.length>0&&(this.currentPrice=this.chartDataService.getCurrentPrice(this.chartData),this.currentTime=this.chartDataService.getCurrentTime(this.chartData)),this.syncVolatility()})}),this.chartDataService.onFinish(()=>{e||this.finishGame(),eK(()=>{this.currentBarProgress=1})}),await this.loadChartData(t.interval)}startGame(t=!1){this.chartDataService&&(this.chartDataService.start(),t||(this.gameStatus="in_progress"))}finishGame(){sf.currentOpenPosition&&sf.closePosition(this.currentPrice,this.currentTime,sf.currentOpenPosition.id),sp.closeAllOpenPositions(this.currentPrice,this.currentTime),this.gameStatus="finished"}resetGame(){this.chartDataService&&this.chartDataService.stop(),this.clearCountdown(),this.gameStatus="idle",sf.reset(),sp.reset(),this.analyticsMode="player",this.chartData=[],this.currentPrice=0,this.currentTime=0,sf.setVolatility(0),sp.setVolatility(0)}calculateVolatility(t){if(!t.length)return 0;let e=t.slice(-20).map(t=>{let e=t.open||t.close||1,i=t.high-t.low;return 0===e?0:i/e});return Math.min(1,Math.max(0,e.reduce((t,e)=>t+e,0)/e.length/.05))}syncVolatility(){let t=this.calculateVolatility(this.chartData);sf.setVolatility(t),sp.setVolatility(t)}};function sg(t){var e=t.width,i=t.height;if(e<0)throw Error("Negative width is not allowed for Size");if(i<0)throw Error("Negative height is not allowed for Size");return{width:e,height:i}}function sv(t,e){return t.width===e.width&&t.height===e.height}var sb=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(t){return t!==i})}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}(),s_=function(){function t(t,e,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=sg({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null==(s=null==i?void 0:i.allowResizeObserver)||s,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw Error("Object is disposed");null==(t=this._canvasElementResizeObserver)||t.disconnect(),this._canvasElementResizeObserver=null,null==(e=this._devicePixelRatioObservable)||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return sg({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=sg(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;sv(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=sg(this._transformBitmapSize(t,this._canvasElementClientSize)),s=sv(this.bitmapSize,i)?null:i;null===e&&null===s||null!==e&&null!==s&&sv(e,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(e,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(t){return"devicePixelContentBoxSize"in t})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()}):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=sw(this._canvasElement);if(null===e)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new sb(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var t,e,i=sw(this._canvasElement);if(null!==i){var s,n,r=null!=(e=null==(t=this._devicePixelRatioObservable)?void 0:t.value)?e:i.devicePixelRatio,h=this._canvasElement.getClientRects(),l=void 0!==h[0]?(s=h[0],n=r,sg({width:Math.round(s.left*n+s.width*n)-Math.round(s.left*n),height:Math.round(s.top*n+s.height*n)-Math.round(s.top*n)})):sg({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(l)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(e){return e.target===t._canvasElement});if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var s=i.devicePixelContentBoxSize[0],n=sg({width:s.inlineSize,height:s.blockSize});t._suggestNewBitmapSize(n)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function sw(t){return t.ownerDocument.defaultView}var sy=function(){function t(t,e,i){if(0===e.width||0===e.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function sx(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var n=t.canvasElement.getContext("2d",e);return null===n?null:new sy(n,i,s)}let sS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function sP(t,e){let i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function sM(t,e,i,s){t.beginPath();let n=t.lineWidth%2?.5:0;t.moveTo(i,e+n),t.lineTo(s,e+n),t.stroke()}function sO(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))}function sC(t){if(void 0===t)throw Error("Value is undefined");return t}function sk(t){if(null===t)throw Error("Value is null");return t}function sE(t){return sk(sC(t))}(o=M||(M={}))[o.Simple=0]="Simple",o[o.WithSteps=1]="WithSteps",o[o.Curved=2]="Curved",(a=O||(O={}))[a.Solid=0]="Solid",a[a.Dotted=1]="Dotted",a[a.Dashed=2]="Dashed",a[a.LargeDashed=3]="LargeDashed",a[a.SparseDotted=4]="SparseDotted";class sD{constructor(){this.t=[]}i(t,e,i){this.t.push({h:t,l:e,o:!0===i})}_(t){let e=this.t.findIndex(e=>t===e.h);e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter(e=>e.l!==t)}p(t,e,i){let s=[...this.t];this.t=this.t.filter(t=>!t.o),s.forEach(s=>s.h(t,e,i))}v(){return this.t.length>0}m(){this.t=[]}}function sN(t,...e){for(let i of e)for(let e in i)void 0!==i[e]&&Object.prototype.hasOwnProperty.call(i,e)&&!["__proto__","constructor","prototype"].includes(e)&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:sN(t[e],i[e]));return t}function sT(t){return"number"==typeof t&&isFinite(t)}function sV(t){return"number"==typeof t&&t%1==0}function sR(t){return"string"==typeof t}function sj(t){return"boolean"==typeof t}function sz(t){let e,i,s;if(!t||"object"!=typeof t)return t;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(s=t[i],e[i]=s&&"object"==typeof s?sz(s):s);return e}function sB(t){return null!==t}function sL(t){return null===t?void 0:t}let sA="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function sF(t,e,i){return void 0===e&&(e=sA),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class sI{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=t}N(){let t=this.M,e=this.F(),i=this.W();return t.P===e&&t.T===i||(t.P=e,t.T=i,t.k=sF(e,i),t.A=2.5/12*e,t.V=t.A,t.B=e/12*t.C,t.I=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function sY(t){return t<0?0:t>255?255:Math.round(t)||0}function sW(t){return .199*t[0]+.687*t[1]+.114*t[2]}class sU{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if("transparent"===t)return t;let i=this.K(t),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*s})`}X(t){let e=this.K(t);return{Z:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:sW(e)>160?"black":"white"}}J(t){return sW(this.K(t))}tt(t,e,i){var s;let[n,r,h,l]=this.K(t),[o,a,u,c]=this.K(e),d=[sY(n+i*(o-n)),sY(r+i*(a-r)),sY(h+i*(u-h)),(s=l+i*(c-l))<=0||s>1?Math.min(Math.max(s,0),1):Math.round(1e4*s)/1e4];return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(t){let e,i,s=this.q.get(t);if(s)return s;let n=((e=document.createElement("div")).style.display="none",document.body.appendChild(e),e.style.color=t,i=window.getComputedStyle(e).color,document.body.removeChild(e),i).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.Y.length)for(let e of this.Y){let i=e(t);if(i)return this.q.set(t,i),i}throw Error(`Failed to parse color: ${t}`)}let r=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(t,r),r}}class sG{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach(s=>{s.nt(t,e,i)})}}class sq{nt(t,e,i){t.useBitmapCoordinateSpace(t=>this.et(t,e,i))}}class s$ extends sq{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.rt||null===this.rt.lt)return;let s=this.rt.lt,n=this.rt,r=Math.max(1,Math.floor(e))%2/2,h=h=>{t.beginPath();for(let l=s.to-1;l>=s.from;--l){let s=n.ot[l],o=Math.round(s._t*e)+r,a=s.ut*i,u=h*i+r;t.moveTo(o,a),t.arc(o,a,u,0,2*Math.PI)}t.fill()};n.ct>0&&(t.fillStyle=n.dt,h(n.ft+n.ct)),t.fillStyle=n.vt,h(n.ft)}}function sQ(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}let sJ={from:0,to:1};class sH{constructor(t,e,i){this.Mt=new sG,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.Pt=i,this.Mt.st(this.bt)}yt(t){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){let t=this.Pt.Dt();t.length!==this.bt.length&&(this.St=t.map(sQ),this.bt=this.St.map(t=>{let e=new s$;return e.ht(t),e}),this.Mt.st(this.bt))}Rt(){let t=2===this.Ct.N().mode||!this.Ct.Vt(),e=this.Pt.Bt(),i=this.Ct.It(),s=this.O.Et();this.kt(),e.forEach((e,n)=>{let r=this.St[n],h=e.At(i),l=e.zt();!t&&null!==h&&e.Vt()&&null!==l?(r.vt=h.Lt,r.ft=h.ft,r.ct=h.Ot,r.ot[0].gt=h.gt,r.ot[0].ut=e.Ft().Nt(h.gt,l.Wt),r.dt=h.Ht??this.O.Ut(r.ot[0].ut/e.Ft().$t()),r.ot[0].wt=i,r.ot[0]._t=s.qt(i),r.lt=sJ):r.lt=null})}}class sK extends sq{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){var n;let r;if(null===this.Yt)return;let h=this.Yt.jt.Vt,l=this.Yt.Kt.Vt;if(!h&&!l)return;let o=Math.round(this.Yt._t*i),a=Math.round(this.Yt.ut*s);t.lineCap="butt",h&&o>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*i),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,sP(t,this.Yt.jt.Xt),n=e.height,t.beginPath(),r=t.lineWidth%2?.5:0,t.moveTo(o+r,0),t.lineTo(o+r,n),t.stroke()),l&&a>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*s),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,sP(t,this.Yt.Kt.Xt),sM(t,a,0,e.width))}}class sX{constructor(t,e){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new sK(this.Zt),this.Jt=t,this.Pt=e}yt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){let t=this.Jt.Vt(),e=this.Pt.Qt().N().crosshair,i=this.Zt;2===e.mode?(i.Kt.Vt=!1,i.jt.Vt=!1):(i.Kt.Vt=t&&this.Jt.ti(this.Pt),i.jt.Vt=t&&this.Jt.ii(),i.Kt.ct=e.horzLine.width,i.Kt.Xt=e.horzLine.style,i.Kt.R=e.horzLine.color,i.jt.ct=e.vertLine.width,i.jt.Xt=e.vertLine.style,i.jt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni())}}function sZ(t,e,i,s,n,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,s,n),t.restore()}function s0(t,e,i,s,n,r){t.beginPath(),t.roundRect?t.roundRect(e,i,s,n,r):(t.lineTo(e+s-r[1],i),0!==r[1]&&t.arcTo(e+s,i,e+s,i+r[1],r[1]),t.lineTo(e+s,i+n-r[2]),0!==r[2]&&t.arcTo(e+s,i+n,e+s-r[2],i+n,r[2]),t.lineTo(e+r[3],i+n),0!==r[3]&&t.arcTo(e,i+n,e,i+n-r[3],r[3]),t.lineTo(e,i+r[0]),0!==r[0]&&t.arcTo(e,i,e+r[0],i,r[0]))}function s1(t,e,i,s,n,r,h=0,l=[0,0,0,0],o=""){var a;if(t.save(),!h||!o||o===r)return s0(t,e,i,s,n,l),t.fillStyle=r,t.fill(),void t.restore();let u=h/2;s0(t,e+u,i+u,s-h,n-h,(a=-u,l.map(t=>0===t?t:t+a))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==o&&(t.lineWidth=h,t.strokeStyle=o,t.closePath(),t.stroke()),t.restore()}function s2(t,e,i,s,n,r,h){t.save(),t.globalCompositeOperation="copy";let l=t.createLinearGradient(0,0,0,n);l.addColorStop(0,r),l.addColorStop(1,h),t.fillStyle=l,t.fillRect(e,i,s,n),t.restore()}class s3{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.P+t.A+t.V:0}nt(t,e,i,s){if(!this.Yt.Vt||0===this.Yt.ri.length)return;let n=this.Yt.R,r=this.ei.Z,h=t.useBitmapCoordinateSpace(t=>{let h=t.context;h.font=e.k;let l=this.hi(t,e,i,s),o=l.ai;return l.li?s1(h,o.oi,o._i,o.ui,o.ci,r,o.di,[o.ft,0,0,o.ft],r):s1(h,o.fi,o._i,o.ui,o.ci,r,o.di,[0,o.ft,o.ft,0],r),this.Yt.pi&&(h.fillStyle=n,h.fillRect(o.fi,o.mi,o.wi-o.fi,o.gi)),this.Yt.Mi&&(h.fillStyle=e.D,h.fillRect(l.li?o.bi-o.di:0,o._i,o.di,o.Si-o._i)),l});t.useMediaCoordinateSpace(({context:t})=>{let i=h.xi;t.font=e.k,t.textAlign=h.li?"right":"left",t.textBaseline="middle",t.fillStyle=n,t.fillText(this.Yt.ri,i.Ci,(i._i+i.Si)/2+i.Pi)})}hi(t,e,i,s){let n,r,h,{context:l,bitmapSize:o,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:c}=t,d=this.Yt.pi||!this.Yt.yi?e.C:0,f=this.Yt.ki?e.S:0,p=e.A+this.ei.Ti,m=e.V+this.ei.Ri,g=e.B,v=e.I,b=this.Yt.ri,_=e.P,w=i.Di(l,b),y=Math.ceil(i.Vi(l,b)),x=e.S+g+v+y+d,S=Math.max(1,Math.floor(c)),P=Math.round((_+p+m)*c);P%2!=S%2&&(P+=1);let M=f>0?Math.max(1,Math.floor(f*u)):0,O=Math.round(x*u),C=Math.round(d*u),k=Math.round((this.ei.Bi??this.ei.Ii)*c)-Math.floor(.5*c),E=Math.floor(k+S/2-P/2),D=E+P,N="right"===s,T=N?a.width-f:f,V=N?o.width-M:M;return N?(n=V-O,r=V-C,h=T-d-g-f):(n=V+O,r=V+C,h=T+d+g),{li:N,ai:{_i:E,mi:k,Si:D,ui:O,ci:P,ft:2*u,di:M,oi:n,fi:V,wi:r,gi:S,bi:o.width},xi:{_i:E/c,Si:D/c,Ci:h,Pi:w}}}}class s5{constructor(t){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(t||s3)(this.Ai,this.Ei),this.Oi=new(t||s3)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Fi(){return this.Ei.Bi||0}Wi(t){this.Ei.Bi=t}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(t){return this.Ni(),this.Ai.pi=this.Ai.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class s4 extends s5{constructor(t,e,i){super(),this.Jt=t,this.Yi=e,this.ji=i}qi(t,e,i){if(t.Vt=!1,2===this.Jt.N().mode)return;let s=this.Jt.N().horzLine;if(!s.labelVisible)return;let n=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||null===n)return;let r=this.Yi.Xi().X(s.labelBackgroundColor);i.Z=r.Z,t.R=r.G;let h=2/12*this.Yi.P();i.Ti=h,i.Ri=h;let l=this.ji(this.Yi);i.Ii=l.Ii,t.ri=this.Yi.Zi(l.gt,n),t.Vt=!0}}let s6=/[1-9]/g;class s9{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(null===this.Yt||!1===this.Yt.Vt||0===this.Yt.ri.length)return;let i=t.useMediaCoordinateSpace(({context:t})=>(t.font=e.k,Math.round(e.Gi.Vi(t,sk(this.Yt).ri,s6))));if(i<=0)return;let s=e.Ji,n=i+2*s,r=n/2,h=this.Yt.Qi,l=this.Yt.Ii,o=Math.floor(l-r)+.5;o<0?(l+=Math.abs(0-o),o=Math.floor(l-r)+.5):o+n>h&&(l-=Math.abs(h-(o+n)),o=Math.floor(l-r)+.5);let a=o+n,u=Math.ceil(0+e.S+e.C+e.A+e.P+e.V);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{let n=sk(this.Yt);t.fillStyle=n.Z;let r=Math.round(o*i),h=Math.round(0*s),l=Math.round(a*i),c=Math.round(u*s),d=Math.round(2*i);if(t.beginPath(),t.moveTo(r,h),t.lineTo(r,c-d),t.arcTo(r,c,r+d,c,d),t.lineTo(l-d,c),t.arcTo(l,c,l,c-d,d),t.lineTo(l,h),t.fill(),n.pi){let r=Math.round(n.Ii*i),l=Math.round((h+e.C)*s);t.fillStyle=n.R;let o=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);t.fillRect(r-a,h,o,l-h)}}),t.useMediaCoordinateSpace(({context:t})=>{let i=sk(this.Yt),n=0+e.S+e.C+e.A+e.P/2;t.font=e.k,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.R;let r=e.Gi.Di(t,"Apr0");t.translate(o+s,n+r),t.fillText(i.ri,0,0)})}}class s8{constructor(t,e,i){this.xt=!0,this.Gt=new s9,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=i}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){let t=this.Zt;if(t.Vt=!1,2===this.Ct.N().mode)return;let e=this.Ct.N().vertLine;if(!e.labelVisible)return;let i=this.ts.Et();if(i.Ki())return;t.Qi=i.Qi();let s=this.ji();if(null===s)return;t.Ii=s.Ii;let n=i.ss(this.Ct.It());t.ri=i.ns(sk(n)),t.Vt=!0;let r=this.ts.Xi().X(e.labelBackgroundColor);t.Z=r.Z,t.R=r.G,t.pi=i.N().ticksVisible}}class s7{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Ft(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}}(u=C||(C={}))[u.Normal=0]="Normal",u[u.Magnet=1]="Magnet",u[u.Hidden=2]="Hidden",u[u.MagnetOHLC=3]="MagnetOHLC";class nt extends s7{constructor(t,e){let i,s,n,r;super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.Ps=e,this.ys=(i=()=>this.ds,s=()=>this.Ss,t=>{let e=s(),n=i();if(t===sk(this.Pt).ks())return{gt:n,Ii:e};{let i=sk(t.zt());return{gt:t.Ts(e,i),Ii:e}}});const h=(n=()=>this.fs,r=()=>this.si(),()=>{let t=this.ts.Et().Rs(n()),e=r();return t&&Number.isFinite(e)?{wt:t,Ii:e}:null});this.Ds=new s8(this,t,h)}N(){return this.Ps}Vs(t,e){this.xs=t,this.Cs=e}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(t,e,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,i)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(t){let e=this.gs.get(t);e||(e=new sX(this,t),this.gs.set(t,e));let i=this.Ms.get(t);return i||(i=new sH(this.ts,this,t),this.Ms.set(t,i)),[e,i]}ti(t){return t===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(t,e){this.ps&&this.Pt===t||this.vs.clear();let i=[];return this.Pt===t&&i.push(this.Hs(this.vs,e,this.ys)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(t=>{this.gs.get(t)?.yt(),this.Ms.get(t)?.yt()}),this.vs.forEach(t=>t.yt()),this.Ds.yt()}qs(t){return t&&!t.ks().Ki()?t.ks():null}zs(t,e,i){this.Ys(t,e,i)&&this.Ns()}Ys(t,e,i){let s=this.bs,n=this.Ss,r=this.ds,h=this.fs,l=this.Pt,o=this.qs(i);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.Et().qt(t),this.Pt=i;let a=null!==o?o.zt():null;return null!==o&&null!==a?(this.ds=e,this.Ss=o.Nt(e,a)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||n!==this.Ss||h!==this.fs||r!==this.ds||l!==this.Pt}Os(){let t=this.ts.js().map(t=>t.Xs().Ks()).filter(sB),e=0===t.length?null:Math.max(...t);this.fs=null!==e?e:NaN}Hs(t,e,i){let s=t.get(e);return void 0===s&&(s=new s4(this,e,i),t.set(e,s)),s}}function ne(t){return"left"===t||"right"===t}class ni{constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,e){var i;let s=(i=this.Zs.get(t),void 0===i?e:{tn:Math.max(i.tn,e.tn),sn:i.sn||e.sn});this.Zs.set(t,s)}nn(){return this.Js}en(t){let e=this.Zs.get(t);return void 0===e?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Wt:t}]}_n(t){this.un(),this.Gs.push({an:5,Wt:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Wt:t})}fn(t){this.hn(),this.Gs.push({an:3,Wt:t})}pn(){return this.Gs}vn(t){for(let e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach((t,e)=>{this.Qs(e,t)})}static wn(){return new ni(2)}static gn(){return new ni(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Wt);break;case 2:this.dn(t.Wt);break;case 3:this.fn(t.Wt);break;case 4:this.cn();break;case 5:this._n(t.Wt);break;case 6:this.un()}}un(){let t=this.Gs.findIndex(t=>5===t.an);-1!==t&&this.Gs.splice(t,1)}}class ns{formatTickmarks(t){return t.map(t=>this.format(t))}}function nn(t,e){if(!sT(t))return"n/a";if(!sV(e)||e<0||e>16)throw TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class nr extends ns{constructor(t,e){if(super(),e||(e=1),sT(t)&&sV(t)||(t=100),t<0)throw TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){let e=t<0?"":"";return t=Math.abs(t),e+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){let e=this.Yi/this.Mn,i=Math.floor(t),s="",n=void 0!==this.xn?this.xn:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.xn);r>=e&&(r-=e,i+=1),s="."+nn(r.toFixed(this.xn)*this.Mn,n)}else i=Math.round(i*e)/e,n>0&&(s="."+nn(0,n));return i.toFixed(0)+s}}class nh extends nr{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class nl extends ns{constructor(t){super(),this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.Pn(t):t<999995?e+this.Pn(t/1e3)+"K":t<0x3b9ac9fb?(t=1e3*Math.round(t/1e3),e+this.Pn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Pn(t/1e9)+"B")}Pn(t){let e=Math.pow(10,this.Cn);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(t,e)=>e)}}let no=/[2-9]/g;class na{constructor(t=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(t,e,i){return this.In(t,e,i).width}Di(t,e,i){let s=this.In(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}In(t,e,i){let s=String(e).replace(i||no,"0");if(this.Dn.has(s))return sC(this.Dn.get(s)).En;if(this.yn===this.Vn){let t=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(t),this.Tn++,this.yn--}t.save(),t.textBaseline="middle";let n=t.measureText(s);return t.restore(),0===n.width&&e.length||(this.Dn.set(s,{En:n,An:this.kn}),this.Rn[this.kn]=s,this.yn++,this.kn++),n}}class nu{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,i){this.zn=t,this.M=e,this.Ln=i}nt(t){null!==this.M&&null!==this.zn&&this.zn.nt(t,this.M,this.On,this.Ln)}}class nc{constructor(t,e,i){this.Fn=t,this.On=new na(50),this.Wn=e,this.O=i,this.F=-1,this.Gt=new nu(this.On)}Tt(){let t=this.O.Hn(this.Wn);if(null===t)return null;let e=t.Un(this.Wn)?t.$n():this.Wn.Ft();if(null===e)return null;let i=t.qn(e);if("overlay"===i)return null;let s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),s,i),this.Gt}}class nd extends sq{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){if(!this.Yt?.Vt)return null;let{ut:i,ct:s,Kn:n}=this.Yt;return e>=i-s-7&&e<=i+s+7?{Xn:this.Yt,Kn:n}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.Yt||!1===this.Yt.Vt)return;let n=Math.round(this.Yt.ut*s);n<0||n>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*i),sP(t,this.Yt.Xt),sM(t,n,0,e.width))}}class nf{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new nd,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class np extends nf{constructor(t){super(t)}te(){this.Zn.Vt=!1;let t=this.Jn.Ft(),e=t.ie().ie;if(2!==e&&3!==e)return;let i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;let s=this.Jn.zt();null!==s&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(s.Wt,s.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class nm extends sq{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let s=this.Yt;if(null===s)return;let n=Math.max(1,Math.floor(e)),r=n%2/2,h=Math.round(s.ne.x*e)+r,l=s.ne.y*i;t.fillStyle=s.ee,t.beginPath();let o=Math.max(2,1.5*s.re)*e;t.arc(h,l,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.he,t.beginPath(),t.arc(h,l,s.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=n,t.strokeStyle=s.ae,t.beginPath(),t.arc(h,l,s.ft*e+n/2,0,2*Math.PI,!1),t.stroke()}}let ng=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class nv{constructor(t){this.Gt=new nm,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),2===this.ge.N().lastPriceAnimation){let t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return 0!==this.ge.N().lastPriceAnimation}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);let t=this.ge.Qt().Et(),e=t.Pe(),i=this.ge.zt();if(null===e||null===i)return;let s=this.ge.ye(!0);if(s.ke||!e.Te(s.Re))return;let n={x:t.qt(s.Re),y:this.ge.Ft().Nt(s.gt,i.Wt)},r=s.R,h=this.ge.N().lineWidth,l=this.De(this.Ve(),r);this.Gt.ht({ee:r,re:h,he:l.he,ae:l.ae,ft:l.ft,ne:n})}Ce(){let t=this.Gt.se();if(null!==t){let e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(t,e,i,s){return this.ge.Qt().Xi().j(t,i+(s-i)*e)}De(t,e){var i;let s,n=t%2600/2600;for(let t of ng)if(n>=t.le&&n<=t.oe){s=t;break}sO(void 0!==s,"Last price animation internal logic error");let r=(n-s.le)/(s.oe-s.le);return{he:this.Be(e,r,s.ce,s.de),ae:this.Be(e,r,s.fe,s.pe),ft:(i=s._e)+(s.ue-i)*r}}}class nb extends nf{constructor(t){super(t)}te(){let t=this.Zn;t.Vt=!1;let e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;let i=this.Jn.ye(0===e.priceLineSource);i.ke||(t.Vt=!0,t.ut=i.Ii,t.R=this.Jn.Ie(i.R),t.ct=e.priceLineWidth,t.Xt=e.priceLineStyle)}}class n_ extends s5{constructor(t){super(),this.Jt=t}qi(t,e,i){t.Vt=!1,e.Vt=!1;let s=this.Jt;if(!s.Vt())return;let n=s.N(),r=n.lastValueVisible,h=""!==s.Ee(),l=0===n.seriesLastValueMode,o=s.ye(!1);if(o.ke)return;r&&(t.ri=this.Ae(o,r,l),t.Vt=0!==t.ri.length),(h||l)&&(e.ri=this.ze(o,r,h,l),e.Vt=e.ri.length>0);let a=s.Ie(o.R),u=this.Jt.Qt().Xi().X(a);i.Z=u.Z,i.Ii=o.Ii,e.Ht=s.Qt().Ut(o.Ii/s.Ft().$t()),t.Ht=a,t.R=u.G,e.R=u.G}ze(t,e,i,s){let n="",r=this.Jt.Ee();return i&&0!==r.length&&(n+=`${r} `),e&&s&&(n+=this.Jt.Ft().Le()?t.Oe:t.Ne),n.trim()}Ae(t,e,i){return e?i?this.Jt.Ft().Le()?t.Ne:t.Oe:t.ri:""}}function nw(t,e,i,s){let n=Number.isFinite(e),r=Number.isFinite(i);return n&&r?t(e,i):n||r?n?e:i:s}class ny{constructor(t,e){this.Fe=t,this.We=e}He(t){return null!==t&&this.Fe===t.Fe&&this.We===t.We}Ue(){return new ny(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(t){return null===t?this:new ny(nw(Math.min,this.$e(),t.$e(),-1/0),nw(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!sT(t)||0==this.We-this.Fe)return;let e=.5*(this.We+this.Fe),i=this.We-e,s=this.Fe-e;i*=t,s*=t,this.We=e+i,this.Fe=e+s}Ke(t){sT(t)&&(this.We+=t,this.Fe+=t)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(t){return null===t?null:new ny(t.minValue,t.maxValue)}}class nx{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:null===this.Ge?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return null===t?null:new nx(ny.Ze(t.priceRange),t.margins)}}class nS extends nf{constructor(t,e){super(t),this.ir=e}te(){let t=this.Zn;t.Vt=!1;let e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;let i=this.ir.sr();null!==i&&(t.Vt=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Xt=e.lineStyle,t.Kn=this.ir.N().id)}}class nP extends s5{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,i){t.Vt=!1,e.Vt=!1;let s=this.ir.N(),n=s.axisLabelVisible,r=""!==s.title,h=this.ge;if(!n||!h.Vt())return;let l=this.ir.sr();if(null===l)return;r&&(e.ri=s.title,e.Vt=!0),e.Ht=h.Qt().Ut(l/h.Ft().$t()),t.ri=this.nr(s.price),t.Vt=!0;let o=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);i.Z=o.Z;let a=s.axisLabelTextColor||o.G;t.R=a,e.R=a,i.Ii=l}nr(t){let e=this.ge.zt();return null===e?"":this.ge.Ft().Zi(t,e.Wt)}}class nM{constructor(t,e){this.ge=t,this.Ps=e,this.er=new nS(t,this),this.Fn=new nP(t,this),this.rr=new nc(this.Fn,t,t.Qt())}hr(t){sN(this.Ps,t),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){let t=this.ge,e=t.Ft();if(t.Qt().Et().Ki()||e.Ki())return null;let i=t.zt();return null===i?null:e.Nt(this.Ps.price,i.Wt)}}class nO extends s7{constructor(t){super(),this.ts=t}Qt(){return this.ts}}let nC={Bar:(t,e,i,s)=>{let n=e.upColor,r=e.downColor,h=sk(t(i,s)),l=sE(h.Wt[0])<=sE(h.Wt[3]);return{cr:h.R??(l?n:r)}},Candlestick:(t,e,i,s)=>{let n=e.upColor,r=e.downColor,h=e.borderUpColor,l=e.borderDownColor,o=e.wickUpColor,a=e.wickDownColor,u=sk(t(i,s)),c=sE(u.Wt[0])<=sE(u.Wt[3]);return{cr:u.R??(c?n:r),dr:u.Ht??(c?h:l),pr:u.vr??(c?o:a)}},Custom:(t,e,i,s)=>({cr:sk(t(i,s)).R??e.color}),Area:(t,e,i,s)=>{let n=sk(t(i,s));return{cr:n.vt??e.lineColor,vt:n.vt??e.lineColor,mr:n.mr??e.topColor,wr:n.wr??e.bottomColor}},Baseline:(t,e,i,s)=>{let n=sk(t(i,s));return{cr:n.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:n.gr??e.topLineColor,Mr:n.Mr??e.bottomLineColor,br:n.br??e.topFillColor1,Sr:n.Sr??e.topFillColor2,Cr:n.Cr??e.bottomFillColor1,Pr:n.Pr??e.bottomFillColor2}},Line:(t,e,i,s)=>{let n=sk(t(i,s));return{cr:n.R??e.color,vt:n.R??e.color}},Histogram:(t,e,i,s)=>({cr:sk(t(i,s)).R??e.color})};class nk{constructor(t){this.yr=(t,e)=>void 0!==e?e.Wt:this.ge.Xs().kr(t),this.ge=t,this.Tr=nC[t.Rr()]}Dr(t,e){return this.Tr(this.yr,this.ge.N(),t,e)}}function nE(t,e,i,s,n=0,r=e.length){let h=r-n;for(;0<h;){let r=h>>1,l=n+r;s(e[l],i)===t?(n=l+1,h-=r+1):h=r}return n}let nD=nE.bind(null,!0),nN=nE.bind(null,!1);(c=k||(k={}))[c.NearestLeft=-1]="NearestLeft",c[c.None=0]="None",c[c.NearestRight=1]="NearestRight";class nT{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return 0===this.zr()}Te(t){return null!==this.Nr(t,0)}kr(t){return this.Fr(t)}Fr(t,e=0){let i=this.Nr(t,e);return null===i?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(t,e,i){if(this.Ki())return null;let s=null;for(let n of i)s=nV(s,this.$r(t,e,n));return s}ht(t){this.Ir.clear(),this.Br.clear(),this.Vr=t,this.Er=t.map(t=>t.Re)}qr(){return this.Er}Or(t){return this.Vr[t].Re}Wr(t){return this.Vr[t]}Nr(t,e){let i=this.Yr(t);if(null===i&&0!==e)switch(e){case -1:return this.jr(t);case 1:return this.Kr(t);default:throw TypeError("Unknown search mode")}return i}jr(t){let e=this.Xr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Kr(t){let e=this.Zr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){let e=this.Xr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Xr(t){return nD(this.Vr,t,(t,e)=>t.Re<e)}Zr(t){return nN(this.Vr,t,(t,e)=>t.Re>e)}Gr(t,e,i){let s=null;for(let n=t;n<e;n++){let t=this.Vr[n].Wt[i];Number.isNaN(t)||(null===s?s={Jr:t,Qr:t}:(t<s.Jr&&(s.Jr=t),t>s.Qr&&(s.Qr=t)))}return s}$r(t,e,i){if(this.Ki())return null;let s=null,n=sk(this.Lr()),r=sk(this.Ks()),h=Math.max(t,n),l=Math.min(e,r),o=30*Math.ceil(h/30),a=Math.max(o,30*Math.floor(l/30));{let t=this.Xr(h),n=this.Zr(Math.min(l,o,e));s=nV(s,this.Gr(t,n,i))}let u=this.Br.get(i);void 0===u&&(u=new Map,this.Br.set(i,u));for(let t=Math.max(o+1,h);t<a;t+=30){let e=Math.floor(t/30),n=u.get(e);if(void 0===n){let t=this.Xr(30*e),s=this.Zr((e+1)*30-1);n=this.Gr(t,s,i),u.set(e,n)}s=nV(s,n)}{let t=this.Xr(a),e=this.Zr(l);s=nV(s,this.Gr(t,e,i))}return s}}function nV(t,e){return null===t?e:null===e?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}let nR={setLineStyle:sP};class nj{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t,nR)}ih(t,e,i){this.th.drawBackground?.(t,nR)}}class nz{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(null===t)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new nj(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}}class nB{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){let t=this.ah.paneViews?.()??[];if(this.hh?.nh===t)return this.hh.eh;let e=t.map(t=>new nz(t));return this.hh={nh:t,eh:e},e}jn(t,e){return this.ah.hitTest?.(t,e)??null}}let nL=class extends nB{us(){return[]}};class nA{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t,nR)}ih(t,e,i){this.th.drawBackground?.(t,nR)}}class nF{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(null===t)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new nA(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}}function nI(t){return{ri:t.text(),Ii:t.coordinate(),Bi:t.fixedCoordinate?.(),R:t.textColor(),Z:t.backColor(),Vt:t.visible?.()??!0,pi:t.tickVisible?.()??!0}}class nY{constructor(t,e){this.Gt=new s9,this._h=t,this.uh=e}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...nI(this._h)}),this.Gt}}class nW extends s5{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,i){let s=nI(this._h);i.Z=s.Z,t.R=s.R;let n=2/12*this.Yi.P();i.Ti=n,i.Ri=n,i.Ii=s.Ii,i.Bi=s.Bi,t.ri=s.ri,t.Vt=s.Vt,t.pi=s.pi}}class nU extends nB{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){let t=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===t)return this.dh.eh;let e=this.ge.Qt().Et(),i=t.map(t=>new nY(t,e));return this.dh={nh:t,eh:i},i}Ws(){let t=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===t)return this.fh.eh;let e=this.ge.Ft(),i=t.map(t=>new nW(t,e));return this.fh={nh:t,eh:i},i}wh(){let t=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===t)return this.ph.eh;let e=t.map(t=>new nF(t));return this.ph={nh:t,eh:e},e}gh(){let t=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===t)return this.mh.eh;let e=t.map(t=>new nF(t));return this.mh={nh:t,eh:e},e}Mh(t,e){return this.ah.autoscaleInfo?.(t,e)??null}}function nG(t,e,i,s){t.forEach(t=>{e(t).forEach(t=>{t.rh()===i&&s.push(t)})})}function nq(t){return t.Fs()}function n$(t){return t.wh()}function nQ(t){return t.gh()}let nJ=["Area","Line","Baseline"];class nH extends nO{constructor(t,e,i,s,n){super(t),this.Yt=new nT,this.er=new nb(this),this.bh=[],this.Sh=new np(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=i,this.kh=e;const r=new n_(this);this.vs=[r],this.rr=new nc(r,this,t),nJ.includes(this.kh)&&(this.xh=new nv(this)),this.Th(),this.sh=s(this,this.Qt(),n)}m(){null!==this.Ph&&clearTimeout(this.Ph)}Ie(t){return this.Ps.priceLineColor||t}ye(t){let e,i,s={ke:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return s;let r=this.Qt().Et().Pe(),h=this.zt();if(null===r||null===h)return s;if(t){let t=this.Yt.Ar();if(null===t)return s;e=t,i=t.Re}else{let t=this.Yt.Fr(r.bi(),-1);if(null===t||null===(e=this.Yt.kr(t.Re)))return s;i=t.Re}let l=e.Wt[3],o=this.Rh().Dr(i,{Wt:e}),a=n.Nt(l,h.Wt);return{ke:!1,gt:l,ri:n.Zi(l,h.Wt),Oe:n.Dh(l),Ne:n.Vh(l,h.Wt),R:o.cr,Ii:a,Re:i}}Rh(){return null!==this.Ch||(this.Ch=new nk(this)),this.Ch}N(){return this.Ps}hr(t){let e=t.priceScaleId;void 0!==e&&e!==this.Ps.priceScaleId&&this.Qt().Bh(this,e),sN(this.Ps,t),void 0!==t.priceFormat&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(t,e){this.Yt.ht(t),this.sh.yt("data"),null!==this.xh&&(e&&e.zh?this.xh.be():0===t.length&&this.xh.Me());let i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(t){let e=new nM(this,t);return this.bh.push(e),this.Qt().Eh(this),e}Nh(t){let e=this.bh.indexOf(t);-1!==e&&this.bh.splice(e,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){let t=this.Wh();return null===t?null:{Wt:t.Wt[3],Hh:t.wt}}Wh(){let t=this.Qt().Et().Pe();if(null===t)return null;let e=t.Uh();return this.Yt.Fr(e,1)}Xs(){return this.Yt}$h(t){let e=this.Yt.kr(t);return null===e?null:"Bar"===this.kh||"Candlestick"===this.kh||"Custom"===this.kh?{qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3]}:e.Wt[3]}Xh(t){let e=[];nG(this.yh,nq,"top",e);let i=this.xh;return null!==i&&i.Vt()&&(null===this.Ph&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),e.unshift(i)),e}Fs(){let t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);let e=this.bh.map(t=>t.lr());return t.push(...e),nG(this.yh,nq,"normal",t),t}Jh(){return this.Qh(nq,"bottom")}ta(t){return this.Qh(n$,t)}ia(t){return this.Qh(nQ,t)}sa(t,e){return this.yh.map(i=>i.jn(t,e)).filter(t=>null!==t)}us(){return[this.rr,...this.bh.map(t=>t._r())]}Ws(t,e){if(e!==this.es&&!this.Gh())return[];let i=[...this.vs];for(let t of this.bh)i.push(t.ur());return this.yh.forEach(t=>{i.push(...t.Ws())}),i}cs(){let t=[];return this.yh.forEach(e=>{t.push(...e.cs())}),t}Mh(t,e){if(void 0!==this.Ps.autoscaleInfoProvider){let i=this.Ps.autoscaleInfoProvider(()=>{let i=this.na(t,e);return null===i?null:i.Xe()});return nx.Ze(i)}return this.na(t,e)}nh(){let t=this.Ps.priceFormat;return t.base??1/t.minMove}ea(){return this.ra}Ns(){for(let t of(this.sh.yt(),this.vs))t.yt();for(let t of this.bh)t.yt();this.er.yt(),this.Sh.yt(),this.xh?.yt(),this.yh.forEach(t=>t.Ns())}Ft(){return sk(super.Ft())}At(t){if(!(("Line"===this.kh||"Area"===this.kh||"Baseline"===this.kh)&&this.Ps.crosshairMarkerVisible))return null;let e=this.Yt.kr(t);return null===e?null:{gt:e.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(t)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(t){this.yh.push(new nU(t,this))}ua(t){this.yh=this.yh.filter(e=>e.oh()!==t)}ca(){if("Custom"===this.kh)return t=>this.sh.da(t)}fa(){if("Custom"===this.kh)return t=>this.sh.pa(t)}va(){return this.Yt.qr()}Gh(){return!ne(this.Ft().ma())}na(t,e){if(!sV(t)||!sV(e)||this.Yt.Ki())return null;let i="Line"===this.kh||"Area"===this.kh||"Baseline"===this.kh||"Histogram"===this.kh?[3]:[2,1],s=this.Yt.Ur(t,e,i),n=null!==s?new ny(s.Jr,s.Qr):null,r=null;if("Histogram"===this.Rr()){let t=this.Ps.base,e=new ny(t,t);n=null!==n?n.vn(e):e}return this.yh.forEach(i=>{let s=i.Mh(t,e);if(s?.priceRange){let t=new ny(s.priceRange.minValue,s.priceRange.maxValue);n=null!==n?n.vn(t):t}s?.margins&&(r=s.margins)}),new nx(n,r)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{let t=this.Ps.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(t){switch(this.kh){case"Line":case"Area":case"Baseline":{let t=this.Ps.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.Rh().Dr(t).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{let t=this.Ps.priceFormat.formatter;this.ra={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.ra=new nl(this.Ps.priceFormat.precision);break;case"percent":this.ra=new nh(this.Ps.priceFormat.precision);break;default:{let t=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new nr(t,this.Ps.priceFormat.minMove*t)}}null!==this.es&&this.es.wa()}Qh(t,e){let i=[];return nG(this.yh,t,e,i),i}}let nK=[3],nX=[0,1,2,3];class nZ{constructor(t){this.Ps=t}ga(t,e,i){if(0===this.Ps.mode)return t;let s=i.ks(),n=s.zt();if(null===n)return t;let r=s.Nt(t,n),h=i.Ma().filter(t=>t instanceof nH).reduce((t,s)=>{if(i.Un(s)||!s.Vt())return t;let n=s.Ft(),r=s.Xs();if(n.Ki()||!r.Te(e))return t;let h=r.kr(e);if(null===h)return t;let l=sE(s.zt()),o=3===this.Ps.mode?nX:nK;return t.concat(o.map(t=>n.Nt(h.Wt[t],l.Wt)))},[]);if(0===h.length)return t;h.sort((t,e)=>Math.abs(t-r)-Math.abs(e-r));let l=h[0];return s.Ts(l,n)}}function n0(t,e,i){return Math.min(Math.max(t,e),i)}function n1(t){let e=Math.ceil(t);return e%2==0?e-1:e}class n2 extends sq{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){var n;if(null===this.Yt)return;let r=Math.max(1,Math.floor(i));t.lineWidth=r,n=()=>{let n=sk(this.Yt);if(n.ba){for(let s of(t.strokeStyle=n.Sa,sP(t,n.xa),t.beginPath(),n.Ca)){let n=Math.round(s.Pa*i);t.moveTo(n,-r),t.lineTo(n,e.height+r)}t.stroke()}if(n.ya){for(let i of(t.strokeStyle=n.ka,sP(t,n.Ta),t.beginPath(),n.Ra)){let n=Math.round(i.Pa*s);t.moveTo(-r,n),t.lineTo(e.width+r,n)}t.stroke()}},t.save(),t.lineWidth%2&&t.translate(.5,.5),n(),t.restore()}}class n3{constructor(t){this.Gt=new n2,this.xt=!0,this.Pt=t}yt(){this.xt=!0}Tt(){if(this.xt){let t=this.Pt.Qt().N().grid,e={ya:t.horzLines.visible,ba:t.vertLines.visible,ka:t.horzLines.color,Sa:t.vertLines.color,Ta:t.horzLines.style,xa:t.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(t=>({Pa:t.coord}))};this.Gt.ht(e),this.xt=!1}return this.Gt}}class n5{constructor(t){this.sh=new n3(t)}lr(){return this.sh}}let n4={Va:4,Ba:1e-4};function n6(t,e){let i=100*(t-e)/e;return e<0?-i:i}function n9(t,e){let i=100*(t-e)/e+100;return e<0?-i:i}function n8(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.log10(i+e.Ba)+e.Va;return t<0?-s:s}function n7(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.pow(10,i-e.Va)-e.Ba;return t<0?-s:s}function rt(t,e){return null===t?null:new ny(n8(t.$e(),e),n8(t.qe(),e))}function re(t,e){return null===t?null:new ny(n7(t.$e(),e),n7(t.qe(),e))}function ri(t){if(null===t)return n4;let e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return n4;let i=Math.ceil(Math.abs(Math.log10(e))),s=n4.Va+i;return{Va:s,Ba:1/Math.pow(10,s)}}class rs{constructor(t,e){if(this.Ia=t,this.Ea=e,function(t){if(t<0)return!1;if(t>1e18)return!0;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let t=this.Ia;1!==t;){if(t%2==0)this.Aa.push(2),t/=2;else{if(t%5!=0)throw Error("unexpected base");this.Aa.push(2,2.5),t/=5}if(this.Aa.length>100)throw Error("something wrong with base")}}}za(t,e,i){let s=0===this.Ia?0:1/this.Ia,n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,h=this.Ea[0];for(;;){let t=s-n<=1e-14&&n>s+1e-14,e=i*h-n<=1e-14,l=1-n<=1e-14;if(!(t&&e&&l))break;n/=h,h=this.Ea[++r%this.Ea.length]}if(n<=s+1e-14&&(n=s),n=Math.max(1,n),this.Aa.length>0&&1e-14>Math.abs(n-1))for(r=0,h=this.Aa[0];i*h-n<=1e-14&&n>s+1e-14;)n/=h,h=this.Aa[++r%this.Aa.length];return n}}class rn{constructor(t,e,i,s){this.La=[],this.Yi=t,this.Ia=e,this.Oa=i,this.Na=s}za(t,e){if(t<e)throw Error("high < low");let i=this.Yi.$t(),s=(t-e)*this.Fa()/i,n=new rs(this.Ia,[2,2.5,2]),r=new rs(this.Ia,[2,2,2.5]),h=new rs(this.Ia,[2.5,2,2]),l=[];return l.push(n.za(t,e,s),r.za(t,e,s),h.za(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(l)}Wa(){let t=this.Yi,e=t.zt();if(null===e)return void(this.La=[]);let i=t.$t(),s=this.Oa(i-1,e),n=this.Oa(0,e),r=this.Yi.N().entireTextOnly?this.Ha()/2:0,h=i-1-r,l=Math.max(s,n),o=Math.min(s,n);if(l===o)return void(this.La=[]);let a=this.za(l,o);if(this.Ua(e,a,l,o,r,h),t.$a()&&this.qa(a,o,l)){let t=this.Yi.Ya();this.ja(e,a,r,h,t,2*t)}let u=this.La.map(t=>t.Ka),c=this.Yi.Xa(u);for(let t=0;t<this.La.length;t++)this.La[t].Za=c[t]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(t,e,i,s,n,r){let h=this.La,l=this.Yi,o=i%e;o+=o<0?e:0;let a=i>=s?1:-1,u=null,c=0;for(let d=i-o;d>s;d-=e){let i=this.Na(d,t,!0);null!==u&&Math.abs(i-u)<this.Fa()||i<n||i>r||(c<h.length?(h[c].Pa=i,h[c].Za=l.Ga(d),h[c].Ka=d):h.push({Pa:i,Za:l.Ga(d),Ka:d}),c++,u=i,l.Ja()&&(e=this.za(d*a,s)))}h.length=c}ja(t,e,i,s,n,r){let h=this.La,l=this.Qa(t,i,n,r),o=this.Qa(t,s,-r,-n),a=this.Na(0,t,!0)-this.Na(e,t,!0);h.length>0&&h[0].Pa-l.Pa<a/2&&h.shift(),h.length>0&&o.Pa-h[h.length-1].Pa<a/2&&h.pop(),h.unshift(l),h.push(o)}Qa(t,e,i,s){let n=this.Oa(e+i,t),r=this.Oa(e+s,t),h=Math.min(n,r),l=Math.max(n,r),o=Math.max(.1,this.za(l,h)),a=this.Oa(e+(i+s)/2,t),u=a-a%o,c=this.Na(u,t,!0);return{Za:this.Yi.Ga(u),Pa:c,Ka:u}}qa(t,e,i){let s=sE(this.Yi.Qe());return this.Yi.Ja()&&(s=re(s,this.Yi.tl())),s.$e()-e<t&&i-s.qe()<t}}function rr(t){return t.slice().sort((t,e)=>sk(t.hs())-sk(e.hs()))}(d=E||(E={}))[d.Normal=0]="Normal",d[d.Logarithmic=1]="Logarithmic",d[d.Percentage=2]="Percentage",d[d.IndexedTo100=3]="IndexedTo100";let rh=new nh,rl=new nr(100,1);class ro{constructor(t,e,i,s,n){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new sD,this.ul=new sD,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=rl,this.wl=ri(null),this.gl=t,this.Ps=e,this.Ml=i,this.bl=s,this.Sl=n,this.xl=new rn(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(t){if(sN(this.Ps,t),this.wa(),void 0!==t.mode&&this.yl({ie:t.mode}),void 0!==t.scaleMargins){let e=sC(t.scaleMargins.top),i=sC(t.scaleMargins.bottom);if(e<0||e>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return 1===this.Ps.mode}Le(){return 2===this.Ps.mode}Dl(){return 3===this.Ps.mode}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(t){let e=this.ie(),i=null;void 0!==t.sn&&(this.Ps.autoScale=t.sn),void 0!==t.ie&&(this.Ps.mode=t.ie,2!==t.ie&&3!==t.ie||(this.Ps.autoScale=!0),this.el.rl=!1),1===e.ie&&t.ie!==e.ie&&(function(t,e){if(null===t)return!1;let i=n7(t.$e(),e),s=n7(t.qe(),e);return isFinite(i)&&isFinite(s)}(this.Ge,this.wl)?null!==(i=re(this.Ge,this.wl))&&this.Bl(i):this.Ps.autoScale=!0),1===t.ie&&t.ie!==e.ie&&null!==(i=rt(this.Ge,this.wl))&&this.Bl(i);let s=e.ie!==this.Ps.mode;s&&(2===e.ie||this.Le())&&this.wa(),s&&(3===e.ie||this.Dl())&&this.wa(),void 0!==t.Vl&&e.Vl!==t.Vl&&(this.Ps.invertScale=t.Vl,this.Il()),this.ul.p(e,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(t){this.il!==t&&(this.il=t,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;let t=this.$t()-this.Ll()-this.Ol();return this.sl=t,t}Qe(){return this.Nl(),this.Ge}Bl(t,e){let i=this.Ge;(e||null===i&&null!==t||null!==i&&!i.He(t))&&(this.pl=null,this.Ge=t)}Fl(t){this.Bl(t),this.Wl(null!==t)}Ki(){return this.Nl(),0===this.il||!this.Ge||this.Ge.Ki()}Hl(t){return this.Vl()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=n6(t,e):this.Dl()&&(t=n9(t,e)),this.Pl(t,e)}Ul(t,e,i){this.Nl();let s=this.Ol(),n=sk(this.Qe()),r=n.$e(),h=n.qe(),l=this.zl()-1,o=this.Vl(),a=l/(h-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.$l();for(let i=u;i<c;i++){let n=t[i],h=n.gt;if(isNaN(h))continue;let l=h;null!==d&&(l=d(n.gt,e));let u=s+a*(l-r);n.ut=o?u:this.il-1-u}}ql(t,e,i){this.Nl();let s=this.Ol(),n=sk(this.Qe()),r=n.$e(),h=n.qe(),l=this.zl()-1,o=this.Vl(),a=l/(h-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.$l();for(let i=u;i<c;i++){let n=t[i],h=n.qh,l=n.Yh,u=n.jh,c=n.Kh;null!==d&&(h=d(n.qh,e),l=d(n.Yh,e),u=d(n.jh,e),c=d(n.Kh,e));let f=s+a*(h-r),p=o?f:this.il-1-f;n.Yl=p,f=s+a*(l-r),n.jl=p=o?f:this.il-1-f,f=s+a*(u-r),n.Kl=p=o?f:this.il-1-f,f=s+a*(c-r),n.Xl=p=o?f:this.il-1-f}}Ts(t,e){let i=this.Cl(t,e);return this.Zl(i,e)}Zl(t,e){var i,s;let n=t;return this.Le()?(i=n,e<0&&(i=-i),n=i/100*e+e):this.Dl()&&(s=n-100,e<0&&(s=-s),n=s/100*e+e),n}Ma(){return this.cl}Dt(){return this.fl||(this.fl=rr(this.cl)),this.fl}Gl(t){-1===this.cl.indexOf(t)&&(this.cl.push(t),this.wa(),this.Jl())}Ql(t){let e=this.cl.indexOf(t);if(-1===e)throw Error("source is not attached to scale");this.cl.splice(e,1),0===this.cl.length&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let t=null;for(let e of this.cl){let i=e.zt();null!==i&&(null===t||i.Hh<t.Hh)&&(t=i)}return null===t?null:t.Wt}Vl(){return this.Ps.invertScale}Da(){let t=null===this.zt();if(null!==this.pl&&(t||this.pl.io===t))return this.pl.Da;this.xl.Wa();let e=this.xl.Da();return this.pl={Da:e,io:t},this._l.p(),e}so(){return this._l}no(t){this.Le()||this.Dl()||null===this.vl&&null===this.nl&&(this.Ki()||(this.vl=this.il-t,this.nl=sk(this.Qe()).Ue()))}eo(t){if(this.Le()||this.Dl()||null===this.vl)return;this.yl({sn:!1}),(t=this.il-t)<0&&(t=0);let e=(this.vl+.2*(this.il-1))/(t+.2*(this.il-1)),i=sk(this.nl).Ue();e=Math.max(e,.1),i.je(e),this.Bl(i)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(t){this.Tl()||null===this.ml&&null===this.nl&&(this.Ki()||(this.ml=t,this.nl=sk(this.Qe()).Ue()))}ao(t){if(this.Tl()||null===this.ml)return;let e=sk(this.Qe()).Ye()/(this.zl()-1),i=t-this.ml;this.Vl()&&(i*=-1);let s=i*e,n=sk(this.nl).Ue();n.Ke(s),this.Bl(n,!0),this.pl=null}lo(){this.Tl()||null!==this.ml&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(t,e){switch(this.Ps.mode){case 2:return this.oo(n6(t,e));case 3:return this.ea().format(n9(t,e));default:return this.nr(t)}}Ga(t){switch(this.Ps.mode){case 2:return this.oo(t);case 3:return this.ea().format(t);default:return this.nr(t)}}Xa(t){switch(this.Ps.mode){case 2:return this._o(t);case 3:return this.ea().formatTickmarks(t);default:return this.uo(t)}}Dh(t){return this.nr(t,sk(this.dl).ea())}Vh(t,e){return t=n6(t,e),this.oo(t,rh)}co(){return this.cl}do(t){this.el={hl:t,rl:!1}}Ns(){this.cl.forEach(t=>t.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let t=1/0;for(let e of(this.dl=null,this.cl))e.hs()<t&&(t=e.hs(),this.dl=e);let e=100;null!==this.dl&&(e=Math.round(this.dl.nh())),this.ra=rl,this.Le()?(this.ra=rh,e=100):this.Dl()?(this.ra=new nr(100,1),e=100):null!==this.dl&&(this.ra=this.dl.ea()),this.xl=new rn(this,e,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return null===this.dl||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(t){this.al=t}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(t,e){if(this.Nl(),this.Ki())return 0;t=this.Ja()&&t?n8(t,this.wl):t;let i=sk(this.Qe()),s=this.Ol()+(this.zl()-1)*(t-i.$e())/i.Ye();return this.Hl(s)}Cl(t,e){if(this.Nl(),this.Ki())return 0;let i=this.Hl(t),s=sk(this.Qe()),n=s.$e()+s.Ye()*((i-this.Ol())/(this.zl()-1));return this.Ja()?n7(n,this.wl):n}Il(){this.pl=null,this.xl.Wa()}po(){var t,e,i,s,n;if(this.Rl()&&!this.Tl())return;let r=this.el.hl;if(null===r)return;let h=null,l=this.co(),o=0,a=0;for(let t of l){if(!t.Vt())continue;let l=t.zt();if(null===l)continue;let u=t.Mh(r.Uh(),r.bi()),c=u&&u.Qe();if(null!==c){switch(this.Ps.mode){case 1:c=rt(c,this.wl);break;case 2:e=c,i=l.Wt,c=new ny(n6(e.$e(),i),n6(e.qe(),i));break;case 3:s=c,n=l.Wt,c=new ny(n9(s.$e(),n),n9(s.qe(),n))}if(h=null===h?c:h.vn(sk(c)),null!==u){let t=u.tr();null!==t&&(o=Math.max(o,t.above),a=Math.max(a,t.below))}}}if(this.$a()&&(o=Math.max(o,this.Ya()),a=Math.max(a,this.Ya())),o===this.ll&&a===this.ol||(this.ll=o,this.ol=a,this.pl=null,this.kl()),null!==h){if(h.$e()===h.qe()){let t=5*this.fo();this.Ja()&&(h=re(h,this.wl)),h=new ny(h.$e()-t,h.qe()+t),this.Ja()&&(h=rt(h,this.wl))}if(this.Ja()){let e=re(h,this.wl),i=ri(e);if(t=this.wl,i.Va!==t.Va||i.Ba!==t.Ba){let t=null!==this.nl?re(this.nl,this.wl):null;this.wl=i,h=rt(e,i),null!==t&&(this.nl=rt(t,i))}}this.Bl(h)}else null===this.Ge&&(this.Bl(new ny(-.5,.5)),this.wl=ri(null))}$l(){return this.Le()?n6:this.Dl()?n9:this.Ja()?t=>n8(t,this.wl):null}vo(t,e,i){return void 0===e?(void 0===i&&(i=this.ea()),i.format(t)):e(t)}mo(t,e,i){return void 0===e?(void 0===i&&(i=this.ea()),i.formatTickmarks(t)):e(t)}nr(t,e){return this.vo(t,this.bl.priceFormatter,e)}uo(t,e){let i=this.bl.priceFormatter;return this.mo(t,this.bl.tickmarksPriceFormatter??(i?t=>t.map(i):void 0),e)}oo(t,e){return this.vo(t,this.bl.percentageFormatter,e)}_o(t,e){let i=this.bl.percentageFormatter;return this.mo(t,this.bl.tickmarksPercentageFormatter??(i?t=>t.map(i):void 0),e)}}function ra(t){return t instanceof nH}class ru{constructor(t,e){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new sD,this.yh=[],this.uh=t,this.ts=e,this.Co=new n5(this);const i=e.N();this.Po=this.yo("left",i.leftPriceScale),this.ko=this.yo("right",i.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(i)}Ro(t){if(t.leftPriceScale&&this.Po.hr(t.leftPriceScale),t.rightPriceScale&&this.ko.hr(t.rightPriceScale),t.localization&&(this.Po.wa(),this.ko.wa()),t.overlayPriceScales)for(let e of Array.from(this.wo.values())){let i=sk(e[0].Ft());i.hr(t.overlayPriceScales),t.localization&&i.wa()}}Do(t){switch(t){case"left":return this.Po;case"right":return this.ko}return this.wo.has(t)?sC(this.wo.get(t))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(t=>{t.m&&t.m()}),this.yh=this.yh.filter(t=>{let e=t.oh();return e.detached&&e.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(t){this.bo=t}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(t){this.Mo=t,this.Ao()}Al(t){this.il=t,this.Po.Al(t),this.ko.Al(t),this.cl.forEach(e=>{if(this.Un(e)){let i=e.Ft();null!==i&&i.Al(t)}}),this.Ao()}zo(t){this.So=t}Lo(){return this.So}Oo(){return this.cl.filter(ra)}Ma(){return this.cl}Un(t){let e=t.Ft();return null===e||this.Po!==e&&this.ko!==e}Gl(t,e,i){this.No(t,e,i?t.hs():this.cl.length)}Ql(t,e){let i=this.cl.indexOf(t);sO(-1!==i,"removeDataSource: invalid data source"),this.cl.splice(i,1),e||this.cl.forEach((t,e)=>t.ls(e));let s=sk(t.Ft()).ma();if(this.wo.has(s)){let e=sC(this.wo.get(s)),i=e.indexOf(t);-1!==i&&(e.splice(i,1),0===e.length&&this.wo.delete(s))}let n=t.Ft();n&&n.Ma().indexOf(t)>=0&&(n.Ql(t),this.Fo(n)),this.fl=null}qn(t){return t===this.Po?"left":t===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(t,e){t.no(e)}$o(t,e){t.eo(e),this.Ao()}qo(t){t.ro()}Yo(t,e){t.ho(e)}jo(t,e){t.ao(e),this.Ao()}Ko(t){t.lo()}Ao(){this.cl.forEach(t=>{t.Ns()})}ks(){let t=null;return this.ts.N().rightPriceScale.visible&&0!==this.ko.Ma().length?t=this.ko:this.ts.N().leftPriceScale.visible&&0!==this.Po.Ma().length?t=this.Po:0!==this.cl.length&&(t=this.cl[0].Ft()),null===t&&(t=this.ko),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.ko:this.ts.N().leftPriceScale.visible&&(t=this.Po),t}Fo(t){null!==t&&t.Tl()&&this.Xo(t)}Zo(t){let e=this.uh.Pe();t.yl({sn:!0}),null!==e&&t.do(e),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(t=>{this.Un(t)&&this.Fo(t.Ft())}),this.Ao(),this.ts.ar()}Dt(){return null===this.fl&&(this.fl=rr(this.cl)),this.fl}Qo(t,e){e=n0(e,0,this.cl.length-1);let i=this.cl.indexOf(t);for(let s of(sO(-1!==i,"setSeriesOrder: invalid data source"),this.cl.splice(i,1),this.cl.splice(e,0,t),this.cl.forEach((t,e)=>t.ls(e)),this.fl=null,[this.Po,this.ko]))s.Jl(),s.wa();this.ts.ar()}Bt(){return this.Dt().filter(ra)}t_(){return this.xo}i_(){return this.Co}_a(t){this.yh.push(new nL(t))}ua(t){this.yh=this.yh.filter(e=>e.oh()!==t),t.detached&&t.detached(),this.ts.ar()}s_(){return this.yh}sa(t,e){return this.yh.map(i=>i.jn(t,e)).filter(t=>null!==t)}Xo(t){let e=t.co();if(e&&e.length>0&&!this.uh.Ki()){let e=this.uh.Pe();null!==e&&t.do(e)}t.Ns()}No(t,e,i){let s=this.Do(e);if(null===s&&(s=this.yo(e,this.ts.N().overlayPriceScales)),this.cl.splice(i,0,t),!ne(e)){let i=this.wo.get(e)||[];i.push(t),this.wo.set(e,i)}t.ls(i),s.Gl(t),t._s(s),this.Fo(s),this.fl=null}To(t,e,i){e.ie!==i.ie&&this.Xo(t)}yo(t,e){let i=new ro(t,{visible:!0,autoScale:!0,...sz(e)},this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return i.Al(this.$t()),i}}function rc(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function rd(t,e,i){let s=[t,...t.Dt()],n=function(t,e,i){var s,n;let r,h;for(let l of t)for(let t of l.sa?.(e,i)??[])s=t.zOrder,(n=r?.zOrder)&&("top"!==s||"top"===n)&&("normal"!==s||"bottom"!==n)||(r=t,h=l);return r&&h?{r_:r,n_:h}:null}(s,e,i);if("top"===n?.r_.zOrder)return rc(n);for(let r of s){if(n&&n.n_===r&&"bottom"!==n.r_.zOrder&&!n.r_.isBackground)return rc(n);if(void 0!==r.Fs){let s=function(t,e,i,s){for(let n of t){let t=n.Tt(s);if(null!==t&&t.jn){let s=t.jn(e,i);if(null!==s)return{a_:n,e_:s}}}return null}(r.Fs(t),e,i,t);if(null!==s)return{n_:r,a_:s.a_,e_:s.e_}}if(n&&n.n_===r&&"bottom"!==n.r_.zOrder&&n.r_.isBackground)return rc(n)}return n?.r_?rc(n):null}class rf{constructor(t,e,i=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=t,this.o_=e,this.Vn=i}__(t){let e=t.time,i=this.o_.cacheKey(e),s=this.Dn.get(i);if(void 0!==s)return s.u_;if(this.yn===this.Vn){let t=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(sC(t)),this.Tn++,this.yn--}let n=this.l_(t);return this.Dn.set(i,{u_:n,An:this.kn}),this.Rn.set(this.kn,i),this.yn++,this.kn++,n}}class rp{constructor(t,e){sO(t<=e,"right should be >= left"),this.c_=t,this.d_=e}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(t){return this.c_<=t&&t<=this.d_}He(t){return this.c_===t.Uh()&&this.d_===t.bi()}}function rm(t,e){return null===t||null===e?t===e:t.He(e)}class rg{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(t){this.v_=t,this.Dn=null}w_(t,e){this.g_(e),this.Dn=null;for(let i=e;i<t.length;++i){let e=t[i],s=this.p_.get(e.timeWeight);void 0===s&&(s=[],this.p_.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}M_(t,e,i,s,n){let r=Math.ceil(e/t);return null!==this.Dn&&this.Dn.b_===r&&n===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:n,x_:i,Da:this.C_(r,i,s),b_:r}),this.Dn.Da}g_(t){if(0===t)return void this.p_.clear();let e=[];for(let i of(this.p_.forEach((i,s)=>{t<=i[0].index?e.push(s):i.splice(nD(i,t,e=>e.index<t),1/0)}),e))this.p_.delete(i)}C_(t,e,i){let s=[],n=t=>!e||i.has(t.index);for(let e of Array.from(this.p_.keys()).sort((t,e)=>e-t)){if(!this.p_.get(e))continue;let i=s;s=[];let r=i.length,h=0,l=sC(this.p_.get(e)),o=l.length,a=1/0,u=-1/0;for(let e=0;e<o;e++){let o=l[e],c=o.index;for(;h<r;){let t=i[h],e=t.index;if(!(e<c&&n(t))){a=e;break}h++,s.push(t),u=e,a=1/0}if(a-c>=t&&c-u>=t&&n(o))s.push(o),u=c;else if(this.v_)return i}for(;h<r;h++)n(i[h])&&s.push(i[h])}return s}}class rv{constructor(t){this.P_=t}y_(){return null===this.P_?null:new rp(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new rv(null)}}function rb(t,e){return t.weight>e.weight?t:e}class r_{constructor(t,e,i,s){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new rg,this.B_=new Map,this.I_=rv.T_(),this.E_=!0,this.A_=new sD,this.z_=new sD,this.L_=new sD,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=e,this.bl=i,this.U_=e.rightOffset,this.q_=e.barSpacing,this.ts=t,this.Y_(e),this.o_=s,this.j_(),this.V_.m_(e.uniformDistribution),this.K_()}N(){return this.Ps}X_(t){sN(this.bl,t),this.Z_(),this.j_()}hr(t,e){sN(this.Ps,t),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),void 0!==t.barSpacing&&this.ts.dn(t.barSpacing),void 0!==t.rightOffset&&this.ts.fn(t.rightOffset),this.Y_(t),void 0===t.minBarSpacing&&void 0===t.maxBarSpacing||this.ts.dn(t.barSpacing??this.q_),void 0!==t.ignoreWhitespaceIndices&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(t){return this.D_[t]?.time??null}ss(t){return this.D_[t]??null}Q_(t,e){if(this.D_.length<1)return null;if(this.o_.key(t)>this.o_.key(this.D_[this.D_.length-1].time))return e?this.D_.length-1:null;let i=nD(this.D_,this.o_.key(t),(t,e)=>this.o_.key(t.time)<e);return this.o_.key(t)<this.o_.key(this.D_[i].time)?e?i:null:i}Ki(){return 0===this.Mo||0===this.D_.length||null===this.R_}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){let t=this.Pe();if(null===t)return null;let e={from:t.Uh(),to:t.bi()};return this.eu(e)}eu(t){let e=Math.round(t.from),i=Math.round(t.to),s=sk(this.ru()),n=sk(this.hu());return{from:sk(this.ss(Math.max(s,e))),to:sk(this.ss(Math.min(n,i)))}}au(t){return{from:sk(this.Q_(t.from,!0)),to:sk(this.Q_(t.to,!0))}}Qi(){return this.Mo}Eo(t){if(!isFinite(t)||t<=0||this.Mo===t)return;let e=this.su(),i=this.Mo;if(this.Mo=t,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&0!==i){let e=this.q_*t/i;this.q_=e}this.Ps.fixLeftEdge&&null!==e&&0>=e.Uh()&&(this.U_-=Math.round((i-t)/this.q_)+1,this.E_=!0),this.lu(),this.ou()}qt(t){if(this.Ki()||!sV(t))return 0;let e=this._u()+this.U_-t;return this.Mo-(e+.5)*this.q_-1}uu(t,e){let i=this._u(),s=void 0===e?0:e.from,n=void 0===e?t.length:e.to;for(let e=s;e<n;e++){let s=t[e].wt,n=i+this.U_-s,r=this.Mo-(n+.5)*this.q_-1;t[e]._t=r}}cu(t,e){let i=Math.ceil(this.du(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.fu(i)?this.pu(i):i}fn(t){this.E_=!0,this.U_=t,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(t){let e=this.q_;if(this.wu(t),void 0!==this.Ps.rightOffsetPixels&&0!==e){let t=this.U_*e/this.q_;this.U_=t}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(null!==this.N_)return this.N_;let t=this.q_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=sk(this.Pe()),n=Math.max(s.Uh(),s.Uh()-i),r=Math.max(s.bi(),s.bi()-i),h=this.V_.M_(t,e,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.ru()+i,o=this.hu()-i,a=this.Mu(),u=this.Ps.fixLeftEdge||a,c=this.Ps.fixRightEdge||a,d=0;for(let t of h){let i;n<=t.index&&t.index<=r&&(d<this.H_.length?((i=this.H_[d]).coord=this.qt(t.index),i.label=this.bu(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.qt(t.index),label:this.bu(t),weight:t.weight},this.H_.push(i)),this.q_>e/2&&!a?i.needAlignCoordinate=!1:i.needAlignCoordinate=u&&t.index<=l||c&&t.index>=o,d++)}return this.H_.length=d,this.N_=this.H_,this.H_}Su(){let t;this.E_=!0,this.dn(this.Ps.barSpacing),t=void 0!==this.Ps.rightOffsetPixels?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(t)}xu(t){this.E_=!0,this.R_=t,this.ou(),this.G_()}Cu(t,e){let i=this.du(t),s=this.mu();this.dn(s+s/10*e),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(i-this.du(t)))}no(t){this.ml&&this.lo(),null===this.vl&&null===this.O_&&(this.Ki()||(this.vl=t,this.Pu()))}eo(t){if(null===this.O_)return;let e=n0(this.Mo-t,0,this.Mo),i=n0(this.Mo-sk(this.vl),0,this.Mo);0!==e&&0!==i&&this.dn(this.O_.mu*e/i)}ro(){null!==this.vl&&(this.vl=null,this.yu())}ho(t){null===this.ml&&null===this.O_&&(this.Ki()||(this.ml=t,this.Pu()))}ao(t){if(null===this.ml)return;let e=(this.ml-t)/this.mu();this.U_=sk(this.O_).gu+e,this.E_=!0,this.ou()}lo(){null!==this.ml&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(t,e=400){if(!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw RangeError("animationDuration (optional) must be finite positive number");let i=this.U_,s=performance.now();this.ts._n({Ru:t=>(t-s)/e>=1,Du:n=>{let r=(n-s)/e;return r>=1?t:i+(t-i)*r}})}yt(t,e){this.E_=!0,this.D_=t,this.V_.w_(t,e),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(t,e){let i=t.f_(),s=e&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-s)/i),this.U_=t.bi()-this._u(),e&&(this.U_=s?s/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){let t=this.ru(),e=this.hu();null!==t&&null!==e&&this.Eu(new rp(t,e),!0)}zu(t){let e=new rp(t.from,t.to);this.Eu(e)}ns(t){return void 0!==this.bl.timeFormatter?this.bl.timeFormatter(t.originalTime):this.o_.formatHorzItem(t.time)}K_(){if(this.Ps.ignoreWhitespaceIndices){for(let t of(this.F_.clear(),this.ts.js()))for(let e of t.va())this.F_.set(e,!0);this.W_++}}Mu(){let t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}ru(){return 0===this.D_.length?null:0}hu(){return 0===this.D_.length?null:this.D_.length-1}Lu(t){return(this.Mo-1-t)/this.q_}du(t){let e=this.Lu(t);return Math.round(1e6*(this._u()+this.U_-e))/1e6}wu(t){let e=this.q_;this.q_=t,this.lu(),e!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(rv.T_());let t=this._u(),e=this.Mo/this.q_,i=this.U_+t,s=new rp(i-e+1,i);this.Nu(new rv(s))}lu(){let t=n0(this.q_,this.Fu(),this.Wu());this.q_!==t&&(this.q_=t,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&0!==this.D_.length?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){let t=this.Hu();null!==t&&this.U_<t&&(this.U_=t,this.E_=!0);let e=this.Uu();this.U_>e&&(this.U_=e,this.E_=!0)}Hu(){let t=this.ru(),e=this.R_;return null===t||null===e?null:t-e-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(t){let e=this.B_.get(t.weight);return void 0===e&&(e=new rf(t=>this.$u(t),this.o_),this.B_.set(t.weight,e)),e.__(t)}$u(t){return this.o_.formatTickmark(t,this.bl)}Nu(t){let e=this.I_;this.I_=t,rm(e.y_(),this.I_.y_())||this.A_.p(),rm(e.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;let t=this.ru();if(null===t)return;let e=this.Pe();if(null===e)return;let i=e.Uh()-t;if(i<0){let t=this.U_-i-1;this.fn(t)}this.lu()}J_(){this.ou(),this.lu()}fu(t){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(t)||!1}pu(t){let e=function*(t){let e=Math.round(t),i=e<t,s=1;for(;;)i?(yield e+s,yield e-s):(yield e-s,yield e+s),s++}(t),i=this.hu();for(;i;){let t=e.next().value;if(this.F_.get(t))return t;if(t<0||t>i)break}return t}Y_(t){if(void 0!==t.rightOffsetPixels){let e=t.rightOffsetPixels/(t.barSpacing||this.q_);this.ts.fn(e)}}}(f=D||(D={}))[f.OnTouchEnd=0]="OnTouchEnd",f[f.OnNextTap=1]="OnNextTap";class rw{constructor(t,e,i){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new sD,this.Xu=new sD,this.Zu=null,this.Gu=t,this.Ps=e,this.o_=i,this.Sl=new sU(this.Ps.layout.colorParsers),this.Ju=new sI(this),this.uh=new r_(this,e.timeScale,this.Ps.localization,i),this.Ct=new nt(this,e.crosshair),this.Qu=new nZ(e.crosshair),e.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(ni.gn())}ar(){this.rc(ni.wn())}Zh(){this.rc(new ni(1))}Eh(t){let e=this.hc(t);this.rc(e)}ac(){return this.ju}lc(t){if(this.ju?.n_===t?.n_&&this.ju?.e_?.Kn===t?.e_?.Kn)return;let e=this.ju;this.ju=t,null!==e&&this.Eh(e.n_),null!==t&&t.n_!==e?.n_&&this.Eh(t.n_)}N(){return this.Ps}hr(t){sN(this.Ps,t),this.qu.forEach(e=>e.Ro(t)),void 0!==t.timeScale&&this.uh.hr(t.timeScale),void 0!==t.localization&&this.uh.X_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(t,e,i=0){let s=this.qu[i];if(void 0===s)return;if("left"===t)return sN(this.Ps,{leftPriceScale:e}),s.Ro({leftPriceScale:e}),this.Ku.p(),void this.Ih();if("right"===t)return sN(this.Ps,{rightPriceScale:e}),s.Ro({rightPriceScale:e}),this.Ku.p(),void this.Ih();let n=this._c(t,i);null!==n&&(n.Ft.hr(e),this.Ku.p())}_c(t,e){let i=this.qu[e];if(void 0===i)return null;let s=i.Do(t);return null!==s?{Us:i,Ft:s}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(t,e){t.Al(e),this.vu()}Eo(t){this.Mo=t,this.uh.Eo(this.Mo),this.qu.forEach(e=>e.Eo(t)),this.vu()}fc(t){1!==this.qu.length&&(sO(t>=0&&t<this.qu.length,"Invalid pane index"),this.qu.splice(t,1),this.Ih())}vc(t,e){if(this.qu.length<2)return;sO(t>=0&&t<this.qu.length,"Invalid pane index");let i=this.qu[t],s=this.qu.reduce((t,e)=>t+e.Bo(),0),n=this.qu.reduce((t,e)=>t+e.$t(),0),r=n-30*(this.qu.length-1);e=Math.min(r,Math.max(30,e));let h=s/n,l=i.$t();i.Io(e*h);let o=e-l,a=this.qu.length-1;for(let t of this.qu)if(t!==i){let e=Math.min(r,Math.max(30,t.$t()-o/a));o-=t.$t()-e,a-=1;let i=e*h;t.Io(i)}this.Ih()}mc(t,e){sO(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index");let i=this.qu[t],s=this.qu[e];this.qu[t]=s,this.qu[e]=i,this.Ih()}wc(t,e){if(sO(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index"),t===e)return;let[i]=this.qu.splice(t,1);this.qu.splice(e,0,i),this.Ih()}Uo(t,e,i){t.Uo(e,i)}$o(t,e,i){t.$o(e,i),this.Ah(),this.rc(this.gc(t,2))}qo(t,e){t.qo(e),this.rc(this.gc(t,2))}Yo(t,e,i){e.Tl()||t.Yo(e,i)}jo(t,e,i){e.Tl()||(t.jo(e,i),this.Ah(),this.rc(this.gc(t,2)))}Ko(t,e){e.Tl()||(t.Ko(e),this.rc(this.gc(t,2)))}Zo(t,e){t.Zo(e),this.rc(this.gc(t,2))}Mc(t){this.uh.no(t)}bc(t,e){let i=this.Et();if(i.Ki()||0===e)return;let s=i.Qi();t=Math.max(1,Math.min(t,s)),i.Cu(t,e),this.vu()}Sc(t){this.xc(0),this.Cc(t),this.Pc()}yc(t){this.uh.eo(t),this.vu()}kc(){this.uh.ro(),this.ar()}xc(t){this.uh.ho(t)}Cc(t){this.uh.ao(t),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(t,e,i,s,n){this.Ct.Vs(t,e);let r=NaN,h=this.uh.cu(t,!0),l=this.uh.Pe();null!==l&&(h=Math.min(Math.max(l.Uh(),h),l.bi()));let o=s.ks(),a=o.zt();if(null!==a&&(r=o.Ts(e,a)),r=this.Qu.ga(r,h,s),this.Ct.As(h,r,s),this.Zh(),!n){let n=rd(s,t,e);this.lc(n&&{n_:n.n_,e_:n.e_,h_:n.h_||null}),this.Xu.p(this.Ct.It(),{x:t,y:e},i)}}Rc(t,e,i){let s=i.ks(),n=s.zt(),r=s.Nt(t,sk(n)),h=this.uh.Q_(e,!0),l=this.uh.qt(sk(h));this.Tc(l,r,null,i,!0)}Dc(t){this.uc().Ls(),this.Zh(),t||this.Xu.p(null,null,null)}Ah(){let t=this.Ct.Us();if(null!==t){let e=this.Ct.Is(),i=this.Ct.Es();this.Tc(e,i,null,t)}this.Ct.Ns()}Vc(t,e,i){let s=this.uh.Rs(0);void 0!==e&&void 0!==i&&this.uh.yt(e,i);let n=this.uh.Rs(0),r=this.uh._u(),h=this.uh.Pe();if(null!==h&&null!==s&&null!==n){let e=h.Te(r),l=this.o_.key(s)>this.o_.key(n),o=null!==t&&t>r&&!l,a=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,u=e&&(void 0!==i||a)&&this.uh.N().shiftVisibleRangeOnNewBar;if(o&&!u){let e=t-r;this.uh.fn(this.uh.gu()-e)}}this.uh.xu(t)}Lh(t){null!==t&&t.Jo()}Hn(t){if(t instanceof ru)return t;let e=this.qu.find(e=>e.Dt().includes(t));return void 0===e?null:e}vu(){this.qu.forEach(t=>t.Jo()),this.Ah()}m(){this.qu.forEach(t=>t.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(t,e){let i=this.tc(e);this.Ec(t,i),this.Yu.push(t),1===this.Yu.length?this.Ih():this.ar()}Ac(t){let e=this.Hn(t),i=this.Yu.indexOf(t);sO(-1!==i,"Series not found");let s=sk(e);this.Yu.splice(i,1),s.Ql(t),t.m&&t.m(),this.uh.K_(),this.zc(s)}Bh(t,e){let i=sk(this.Hn(t));i.Ql(t,!0),i.Gl(t,e,!0)}Au(){let t=ni.wn();t.rn(),this.rc(t)}Lc(t){let e=ni.wn();e.ln(t),this.rc(e)}cn(){let t=ni.wn();t.cn(),this.rc(t)}dn(t){let e=ni.wn();e.dn(t),this.rc(e)}fn(t){let e=ni.wn();e.fn(t),this.rc(e)}_n(t){let e=ni.wn();e._n(t),this.rc(e)}hn(){let t=ni.wn();t.hn(),this.rc(t)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(t,e){if(sO(e>=0,"Index should be greater or equal to 0"),e===this.Fc(t))return;let i=sk(this.Hn(t));i.Ql(t);let s=this.tc(e);this.Ec(t,s),0===i.Ma().length&&this.zc(i),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(t){let e=this.ec,i=this.sc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Zu||this.Zu.mr!==i||this.Zu.wr!==e)this.Zu={mr:i,wr:e,Hc:new Map};else{let e=this.Zu.Hc.get(t);if(void 0!==e)return e}let s=this.Sl.tt(i,e,t/100);return this.Zu.Hc.set(t,s),s}Uc(t){return this.qu.indexOf(t)}Xi(){return this.Sl}$c(){return this.qc()}qc(t){let e=new ru(this.uh,this);this.qu.push(e);let i=t??this.qu.length-1,s=ni.gn();return s.Qs(i,{tn:0,sn:!0}),this.rc(s),e}tc(t){return sO(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.qu.length,t))<this.qu.length?this.qu[t]:this.qc(t)}Fc(t){return this.qu.findIndex(e=>e.Oo().includes(t))}gc(t,e){let i=new ni(e);if(null!==t){let s=this.qu.indexOf(t);i.Qs(s,{tn:e})}return i}hc(t,e){return void 0===e&&(e=2),this.gc(this.Hn(t),e)}rc(t){this.Gu&&this.Gu(t),this.qu.forEach(t=>t.i_().lr().yt())}Ec(t,e){let i=t.N().priceScaleId,s=void 0!==i?i:this.Oc();e.Gl(t,s),ne(s)||t.hr(t.N())}nc(t){let e=this.Ps.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}zc(t){!t.Lo()&&0===t.Ma().length&&this.qu.length>1&&this.qu.splice(this.Uc(t),1)}}function ry(t){if(t>=1)return 0;let e=0;for(;e<8&&!(1e-8>Math.abs(Math.round(t)-t));e++)t*=10;return e}function rx(t){return!sT(t)&&!sR(t)}(p=N||(N={}))[p.Disabled=0]="Disabled",p[p.Continuous=1]="Continuous",p[p.OnDataUpdate=2]="OnDataUpdate",(m=T||(T={}))[m.LastBar=0]="LastBar",m[m.LastVisible=1]="LastVisible",(g=V||(V={})).Solid="solid",g.VerticalGradient="gradient",(v=R||(R={}))[v.Year=0]="Year",v[v.Month=1]="Month",v[v.DayOfMonth=2]="DayOfMonth",v[v.Time=3]="Time",v[v.TimeWithSeconds=4]="TimeWithSeconds";class rS{constructor(t="yyyy-MM-dd",e="default"){this.Yc=t,this.jc=e}__(t){return function(t,e,i){return e.replace(/yyyy/g,nn(t.getUTCFullYear(),4)).replace(/yy/g,nn(t.getUTCFullYear()%100,2)).replace(/MMMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})).replace(/MMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})).replace(/MM/g,nn(t.getUTCMonth()+1,2)).replace(/dd/g,nn(t.getUTCDate(),2))}(t,this.Yc,this.jc)}}class rP{constructor(t){this.Kc=t||"%h:%m:%s"}__(t){return this.Kc.replace("%h",nn(t.getUTCHours(),2)).replace("%m",nn(t.getUTCMinutes(),2)).replace("%s",nn(t.getUTCSeconds(),2))}}let rM={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class rO{constructor(t={}){const e={...rM,...t};this.Qc=new rS(e.Xc,e.Jc),this.td=new rP(e.Zc),this.sd=e.Gc}__(t){return`${this.Qc.__(t)}${this.sd}${this.td.__(t)}`}}function rC(t){return 60*t*6e4}function rk(t){return 60*t*1e3}let rE=[{nd:1e3,ed:10},{nd:rk(1),ed:20},{nd:rk(5),ed:21},{nd:rk(30),ed:22},{nd:rC(1),ed:30},{nd:rC(3),ed:31},{nd:rC(6),ed:32},{nd:rC(12),ed:33}];function rD(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=rE.length-1;i>=0;--i)if(Math.floor(e.getTime()/rE[i].nd)!==Math.floor(t.getTime()/rE[i].nd))return rE[i].ed;return 0}function rN(t){let e=t;if(sR(t)&&(e=rV(t)),!rx(e))throw Error("time must be of type BusinessDay");return{rd:Math.round(new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0)).getTime()/1e3),hd:e}}function rT(t){if(!sT(t))throw Error("time must be of type isUTCTimestamp");return{rd:t}}function rV(t){let e=new Date(t);if(isNaN(e.getTime()))throw Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function rR(t){sR(t.time)&&(t.time=rV(t.time))}class rj{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?t.forEach(rR):rR(t)}createConverterToInternalObj(t){return sk(0===t.length?null:rx(t[0].time)||sR(t[0].time)?rN:rT)}key(t){return"object"==typeof t&&"rd"in t?t.rd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){return void 0===t.hd?new Date(1e3*t.rd).getTime():new Date(Date.UTC(t.hd.year,t.hd.month-1,t.hd.day)).getTime()}convertHorzItemToInternal(t){return sT(t)?rT(t):rx(t)?rN(t):rN(rV(t))}updateFormatter(t){if(!this.Ps)return;let e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new rO({Xc:e,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:t.locale}):this.ad=new rS(e,t.locale)}formatHorzItem(t){return this.ad.__(new Date(1e3*t.rd))}formatTickmark(t,e){let i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(void 0!==s.tickMarkFormatter){let n=s.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==n)return n}return function(t,e,i){let s={};switch(e){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}let n=new Date(void 0===t.hd?1e3*t.rd:Date.UTC(t.hd.year,t.hd.month-1,t.hd.day));return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()).toLocaleString(i,s)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(rb,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.rd,s=null!==i?new Date(1e3*i):null,n=0;for(let r=e;r<t.length;++r){let e=t[r],h=new Date(1e3*e.time.rd);null!==s&&(e.timeWeight=rD(h,s)),n+=e.time.rd-(i||e.time.rd),i=e.time.rd,s=h}if(0===e&&t.length>1){let e=Math.ceil(n/(t.length-1)),i=new Date(1e3*(t[0].time.rd-e));t[0].timeWeight=rD(new Date(1e3*t[0].time.rd),i)}}(t,e)}static ld(t){return sN({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}let rz="undefined"!=typeof window;function rB(){return!!rz&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function rL(){return!!rz&&/iPhone|iPad|iPod/.test(window.navigator.platform)}class rA{constructor(t,e,i){this.od=0,this._d=null,this.ud={_t:-1/0,ut:1/0},this.dd=0,this.fd=null,this.pd={_t:-1/0,ut:1/0},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!rL(),this.Ld=t=>{this.Od(t)},this.Nd=t=>{if(this.Fd(t)){let e=this.Wd(t);if(++this.dd,this.fd&&this.dd>1){let{Hd:i}=this.Ud(rY(t),this.pd);i<30&&!this.Sd&&this.$d(e,this.Yd.qd),this.jd()}}else{let e=this.Wd(t);if(++this.od,this._d&&this.od>1){let{Hd:i}=this.Ud(rY(t),this.ud);i<5&&!this.bd&&this.Kd(e,this.Yd.Xd),this.Zd()}}},this.Gd=t,this.Yd=e,this.Ps=i,this.Jd()}m(){null!==this.xd&&(this.xd(),this.xd=null),null!==this.Cd&&(this.Cd(),this.Cd=null),null!==this.yd&&(this.yd(),this.yd=null),null!==this.kd&&(this.kd(),this.kd=null),null!==this.Td&&(this.Td(),this.Td=null),null!==this.Pd&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(t){this.yd&&this.yd();let e=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",e)},this.Gd.addEventListener("mousemove",e),this.Fd(t))return;let i=this.Wd(t);this.Kd(i,this.Yd.sf),this.zd=!0}Zd(){null!==this._d&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:-1/0,ut:1/0}}jd(){null!==this.fd&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:-1/0,ut:1/0}}if(t){if(this.Id||null!==this.gd||this.Fd(t))return;let e=this.Wd(t);this.Kd(e,this.Yd.nf),this.zd=!0}ef(t){let e=rU(t.changedTouches,sk(this.Ad));if(null===e||(this.Ed=rW(t),null!==this.Rd)||this.Bd)return;this.Vd=!0;let{rf:i,hf:s,Hd:n}=this.Ud(rY(e),sk(this.gd));if(this.Md||!(n<5)){if(!this.Md){let t=.5*i,e=s>=t&&!this.Ps.af(),n=t>s&&!this.Ps.lf();e||n||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){let i=this.Wd(t,e);this.$d(i,this.Yd._f),rI(t)}}}uf(t){if(0!==t.button)return;let{Hd:e}=this.Ud(rY(t),sk(this.wd));if(e>=5&&(this.bd=!0,this.Zd()),this.bd){let e=this.Wd(t);this.Kd(e,this.Yd.cf)}}Ud(t,e){let i=Math.abs(e._t-t._t),s=Math.abs(e.ut-t.ut);return{rf:i,hf:s,Hd:i+s}}df(t){let e=rU(t.changedTouches,sk(this.Ad));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.Ad=null,this.Ed=rW(t),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);let i=this.Wd(t,e);if(this.$d(i,this.Yd.ff),++this.dd,this.fd&&this.dd>1){let{Hd:t}=this.Ud(rY(e),this.pd);t<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}else this.Sd||(this.$d(i,this.Yd.pf),this.Yd.pf&&rI(t));0===this.dd&&rI(t),0===t.touches.length&&this.md&&(this.md=!1,rI(t))}Od(t){if(0!==t.button)return;let e=this.Wd(t);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),rB()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(t))if(this.Kd(e,this.Yd.vf),++this.od,this._d&&this.od>1){let{Hd:i}=this.Ud(rY(t),this.ud);i<5&&!this.bd&&this.Kd(e,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(e,this.Yd.mf)}Qd(){null!==this.vd&&(clearTimeout(this.vd),this.vd=null)}wf(t){if(null!==this.Ad)return;let e=t.changedTouches[0];this.Ad=e.identifier,this.Ed=rW(t);let i=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=rY(e),this.Td&&(this.Td(),this.Td=null);{let e=this.ef.bind(this),s=this.df.bind(this);this.Td=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,t),240)}let s=this.Wd(t,e);this.$d(s,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=rY(e))}bf(t){if(0!==t.button)return;let e=this.Gd.ownerDocument.documentElement;rB()&&e.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=rY(t),this.kd&&(this.kd(),this.kd=null);{let t=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(t))return;let i=this.Wd(t);this.Kd(i,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=rY(t))}Jd(){var t;this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{let t=this.Gd.ownerDocument,e=t=>{this.Yd.xf&&(t.composed&&this.Gd.contains(t.composedPath()[0])||t.target&&this.Gd.contains(t.target)||this.Yd.xf())};this.Cd=()=>{t.removeEventListener("touchstart",e)},this.xd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}rL()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),t=this.Gd,rz&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1}),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){void 0===this.Yd.yf&&void 0===this.Yd.kf&&void 0===this.Yd.Tf||(this.Gd.addEventListener("touchstart",t=>this.Rf(t.touches),{passive:!0}),this.Gd.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.Rd&&void 0!==this.Yd.kf){let e=rF(t.touches[0],t.touches[1])/this.Dd;this.Yd.kf(this.Rd,e),rI(t)}},{passive:!1}),this.Gd.addEventListener("touchend",t=>{this.Rf(t.touches)}))}Rf(t){1===t.length&&(this.Vd=!1),2!==t.length||this.Vd||this.md?this.Df():this.Vf(t)}Vf(t){let e=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Dd=rF(t[0],t[1]),void 0!==this.Yd.yf&&this.Yd.yf(),this.Qd()}Df(){null!==this.Rd&&(this.Rd=null,void 0!==this.Yd.Tf&&this.Yd.Tf())}Cf(t){if(this.yd&&this.yd(),this.Fd(t)||!this.zd)return;let e=this.Wd(t);this.Kd(e,this.Yd.Bf),this.zd=!rL()}gf(t){let e=rU(t.touches,sk(this.Ad));if(null===e)return;let i=this.Wd(t,e);this.$d(i,this.Yd.If),this.Sd=!0,this.md=!0}Fd(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:rW(t)<this.Ed+500}$d(t,e){e&&e.call(this.Yd,t)}Kd(t,e){e&&e.call(this.Yd,t)}Wd(t,e){let i=e||t,s=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Ef:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Af:t.type,zf:i.target,a_:t.view,Lf:()=>{"touchstart"!==t.type&&rI(t)}}}}function rF(t,e){let i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function rI(t){t.cancelable&&t.preventDefault()}function rY(t){return{_t:t.pageX,ut:t.pageY}}function rW(t){return t.timeStamp||performance.now()}function rU(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}class rG{constructor(t,e,i){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=t,this.Uf=t.$f()[e],this.qf=t.$f()[i],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){null!==this.Nf&&this.Nf.m()}Zf(){return this.Yf}Gf(){return sg({width:this.Uf.Gf().width,height:1})}Jf(){return sg({width:this.Uf.Jf().width,height:+window.devicePixelRatio})}Qf(t,e,i){let s=this.Jf();t.fillStyle=this.Hf.N().layout.panes.separatorColor,t.fillRect(e,i,s.width,s.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(null!==this.Of&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),null!==this.Nf&&(this.Nf.m(),this.Nf=null)))}Xf(){let t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.jf.appendChild(t);let i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.jf.appendChild(i);let n={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new rA(i,n,{af:()=>!1,lf:()=>!0}),this.Of={ip:i,tp:t}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(t){null!==this.Of&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(t){null!==this.Of&&null===this.Wf&&(this.Of.ip.style.backgroundColor="")}ep(t){if(null===this.Of)return;let e=this.Uf.ap().Bo()+this.qf.ap().Bo(),i=e/(this.Uf.Gf().height+this.qf.Gf().height),s=30*i;e<=2*s||(this.Wf={lp:t.pageY,op:this.Uf.ap().Bo(),_p:e-s,up:e,cp:i,dp:s},this.Of.tp.style.display="block")}rp(t){let e=this.Wf;if(null===e)return;let i=(t.pageY-e.lp)*e.cp,s=n0(e.op+i,e.dp,e._p);this.Uf.ap().Io(s),this.qf.ap().Io(e.up-s),this.Hf.Qt().Ih()}hp(t){null!==this.Wf&&null!==this.Of&&(this.Wf=null,this.Of.tp.style.display="none")}}function rq(t,e,i){let s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),i)}class r${constructor(t,e,i,s){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=t,this.xp=e,this.Cp=i,this.Mn=s}Pp(t,e){if(null!==this.pp){if(this.pp.wt===e)return void(this.pp.fp=t);if(Math.abs(this.pp.fp-t)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:e,fp:t}}le(t,e){var i,s,n,r,h,l,o;let a;if(null===this.pp||null===this.vp||e-this.pp.wt>50)return;let u=0,c=rq(this.pp,this.vp,this.xp),d=(i=this.pp,s=this.vp,i.fp-s.fp),f=[c],p=[d];if(u+=d,null!==this.mp){let t=rq(this.vp,this.mp,this.xp);if(Math.sign(t)===Math.sign(c)){let e=(n=this.vp,r=this.mp,n.fp-r.fp);if(f.push(t),p.push(e),u+=e,null!==this.wp){let t=rq(this.mp,this.wp,this.xp);if(Math.sign(t)===Math.sign(c)){let e=(h=this.mp,l=this.wp,h.fp-l.fp);f.push(t),p.push(e),u+=e}}}}let m=0;for(let t=0;t<f.length;++t)m+=p[t]/u*f[t];Math.abs(m)<this.Sp||(this.gp={fp:t,wt:e},this.bp=m,this.Mp=(o=Math.abs(m),Math.log(-((a=Math.log(this.Cp))/o))/a))}Du(t){let e=sk(this.gp),i=t-e.wt;return e.fp+this.bp*(Math.pow(this.Cp,i)-1)/Math.log(this.Cp)}Ru(t){return null===this.gp||this.yp(t)===this.Mp}yp(t){return Math.min(t-sk(this.gp).wt,this.Mp)}}class rQ{constructor(t,e){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=t,this.Vp=e,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark","dark"===this.Rp),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function rJ(t,e){let i=sk(t.ownerDocument).createElement("canvas");t.appendChild(i);let s=function(t,e){if("device-pixel-content-box"===e.type)return new s_(t,e.transform,e.options);throw Error("Unsupported binding target")}(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return s.resizeCanvasElement(e),s}function rH(t){t.width=1,t.height=1,t.getContext("2d")?.clearRect(0,0,1,1)}function rK(t,e,i,s){t.ih&&t.ih(e,i,s)}function rX(t,e,i,s){t.nt(e,i,s)}function rZ(t,e,i,s){for(let n of t(i,s)){let t=n.Tt(s);null!==t&&e(t)}}function r0(t,e){return i=>void 0===i.Ft||(i.Ft()?.ma()??"")!==e?[]:i.ta?.(t)??[]}function r1(t,e,i,s){if(!t.length)return;let n=0,r=t[0].$t(s,!0),h=1===e?i/2-(t[0].Fi()-r/2):t[0].Fi()-r/2-i/2;h=Math.max(0,h);for(let r=1;r<t.length;r++){let l=t[r],o=t[r-1],a=o.$t(s,!1),u=l.Fi(),c=o.Fi();if(1===e?u>c-a:u<c+a){let s=c-a*e;l.Wi(s);let r=s-e*a/2;if((1===e?r<0:r>i)&&h>0){let s=Math.min(1===e?-1-r:r-i,h);for(let i=n;i<t.length;i++)t[i].Wi(t[i].Fi()+e*s);h-=s}}else n=r,h=1===e?c-a-u:u-(c+a)}}class r2{constructor(t,e,i,s){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new na(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=t,this.Ps=e,this.Ml=e.layout,this.Ju=i,this.jp="left"===s,this.Kp=r0("normal",s),this.Xp=r0("top",s),this.Zp=r0("bottom",s),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=rJ(this.jf,sg({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const n=this.Gp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jp=rJ(this.jf,sg({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const r=this.Jp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const h={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new rA(this.Jp.canvasElement,h,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),rH(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),rH(this.Gp.canvasElement),this.Gp.dispose(),null!==this.Yi&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){let t=this.Ju.N();return this.Wp!==t.k&&(this.Fp.Bn(),this.Wp=t.k),t}nv(){var t,e;if(null===this.Yi)return 0;let i=0,s=this.sv(),n=sk(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));n.save();let r=this.Yi.Da();n.font=this.ev(),r.length>0&&(i=Math.max(this.Fp.Vi(n,r[0].Za),this.Fp.Vi(n,r[r.length-1].Za)));let h=this.rv();for(let t=h.length;t--;){let e=this.Fp.Vi(n,h[t].ri());e>i&&(i=e)}let l=this.Yi.zt();if(null!==l&&null!==this.Op&&2!==(t=this.Ps.crosshair).mode&&t.horzLine.visible&&t.horzLine.labelVisible){let t=this.Yi.Ts(1,l),e=this.Yi.Ts(this.Op.height-2,l);i=Math.max(i,this.Fp.Vi(n,this.Yi.Zi(Math.floor(Math.min(t,e))+.11111111111111,l)),this.Fp.Vi(n,this.Yi.Zi(Math.ceil(Math.max(t,e))-.11111111111111,l)))}n.restore();let o=i||34;return(e=Math.ceil(s.S+s.C+s.B+s.I+5+o))+e%2}hv(t){null!==this.Op&&sv(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`)}av(){return sk(this.Op).width}_s(t){this.Yi!==t&&(null!==this.Yi&&this.Yi.so().u(this),this.Yi=t,t.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){let t=this.Pt.ap();this.Pt.qp().Qt().Zo(t,sk(this.Ft()))}lv(t){if(null===this.Op)return;let e={colorSpace:this.Pt.qp().N().layout.colorSpace};if(1!==t){this.ov(),this.Gp.applySuggestedBitmapSize();let t=sx(this.Gp,e);null!==t&&(t.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t)}),this.Pt.cv(t,this.Zp),this.dv(t),this.Pt.cv(t,this.Kp),this.fv(t))}this.Jp.applySuggestedBitmapSize();let i=sx(this.Jp,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.pv(i),this.Pt.cv(i,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,s){let n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),s)){let s=this.Jp.canvasElement;t.drawImage(s,e,i)}}yt(){this.Yi?.Da()}ep(t){if(null===this.Yi||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!0,e.Uo(i,this.Yi,t.localY)}rp(t){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.Pt.qp().Qt(),i=this.Pt.ap(),s=this.Yi;e.$o(i,s,t.localY)}Qp(){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;let t=this.Pt.qp().Qt(),e=this.Pt.ap(),i=this.Yi;this.Np&&(this.Np=!1,t.qo(e,i))}hp(t){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!1,e.qo(i,this.Yi)}tv(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(t){null!==this.Yi&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(t){this.vv(0)}rv(){let t=[],e=null===this.Yi?void 0:this.Yi;return(i=>{for(let s=0;s<i.length;++s){let n=i[s].Ws(this.Pt.ap(),e);for(let e=0;e<n.length;e++)t.push(n[e])}})(this.Pt.ap().Dt()),t}_v({context:t,bitmapSize:e}){let{width:i,height:s}=e,n=this.Pt.ap().Qt(),r=n.$(),h=n.Wc();r===h?sZ(t,0,0,i,s,r):s2(t,0,0,i,s,r,h)}uv({context:t,bitmapSize:e,horizontalPixelRatio:i}){let s;if(null===this.Op||null===this.Yi||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;let n=Math.max(1,Math.floor(this.sv().S*i));s=this.jp?e.width-n:0,t.fillRect(s,0,n,e.height)}dv(t){if(null===this.Op||null===this.Yi)return;let e=this.Yi.Da(),i=this.Yi.N(),s=this.sv(),n=this.jp?this.Op.width-s.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:r,verticalPixelRatio:h})=>{t.fillStyle=i.borderColor;let l=Math.max(1,Math.floor(h)),o=Math.floor(.5*h),a=Math.round(s.C*r);for(let i of(t.beginPath(),e))t.rect(Math.floor(n*r),Math.round(i.Pa*h)-o,a,l);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{t.font=this.ev(),t.fillStyle=i.textColor??this.Ml.textColor,t.textAlign=this.jp?"right":"left",t.textBaseline="middle";let r=this.jp?Math.round(n-s.B):Math.round(n+s.C+s.B),h=e.map(e=>this.Fp.Di(t,e.Za));for(let i=e.length;i--;){let s=e[i];t.fillText(s.Za,r,s.Pa+h[i])}})}ov(){if(null===this.Op||null===this.Yi)return;let t=this.Op.height/2,e=[],i=this.Yi.Dt().slice(),s=this.Pt.ap(),n=this.sv();this.Yi===s.$n()&&this.Pt.ap().Dt().forEach(t=>{s.Un(t)&&i.push(t)});let r=this.Yi.Ma()[0],h=this.Yi;i.forEach(i=>{let n=i.Ws(s,h);n.forEach(t=>{t.Wi(null),t.Hi()&&e.push(t)}),r===i&&n.length>0&&(t=n[0].Ii())}),e.forEach(t=>t.Wi(t.Ii())),this.Yi.N().alignLabels&&this.mv(e,n,t)}mv(t,e,i){if(null===this.Op)return;let s=t.filter(t=>t.Ii()<=i),n=t.filter(t=>t.Ii()>i);for(let i of(s.sort((t,e)=>e.Ii()-t.Ii()),s.length&&n.length&&n.push(s[0]),n.sort((t,e)=>t.Ii()-e.Ii()),t)){let t=Math.floor(i.$t(e)/2),s=i.Ii();s>-t&&s<t&&i.Wi(t),s>this.Op.height-t&&s<this.Op.height+t&&i.Wi(this.Op.height-t)}r1(s,1,this.Op.height,e),r1(n,-1,this.Op.height,e)}fv(t){if(null===this.Op)return;let e=this.rv(),i=this.sv(),s=this.jp?"right":"left";e.forEach(e=>{e.Ui()&&e.Tt(sk(this.Yi)).nt(t,i,this.Fp,s)})}pv(t){if(null===this.Op||null===this.Yi)return;let e=this.Pt.qp().Qt(),i=[],s=this.Pt.ap(),n=e.uc().Ws(s,this.Yi);n.length&&i.push(n);let r=this.sv(),h=this.jp?"right":"left";i.forEach(e=>{e.forEach(e=>{e.Tt(sk(this.Yi)).nt(t,r,this.Fp,h)})})}vv(t){this.jf.style.cursor=1===t?"ns-resize":"default"}_l(){let t=this.nv();this.Hp<t&&this.Pt.qp().Qt().Ih(),this.Hp=t}ev(){return sF(this.Ml.fontSize,this.Ml.fontFamily)}}function r3(t,e){return t.Jh?.(e)??[]}function r5(t,e){return t.Fs?.(e)??[]}function r4(t,e){return t.us?.(e)??[]}function r6(t,e){return t.Xh?.(e)??[]}class r9{constructor(t,e){this.Op=sg({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new sD,this.Cv=new sD,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||null===this.Vv||this.ts().ar()},this.Yp=()=>{this.Up||null===this.Vv||this.ts().ar()},this.Vp=t,this.Vv=e,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(i),this.Gp=rJ(i,sg({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=rJ(i,sg({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const n=this.Jp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new rA(this.Jp.canvasElement,this,{af:()=>null===this.kv&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>null===this.kv&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){null!==this.wv&&this.wv.m(),null!==this.gv&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),rH(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),rH(this.Gp.canvasElement),this.Gp.dispose(),null!==this.Vv&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return sk(this.Vv)}Lv(t){null!==this.Vv&&this.Vv.t_().u(this),this.Vv=t,null!==this.Vv&&this.Vv.t_().i(r9.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new rQ(this.Iv,this.Vp),this.Mv.yt()):(this.Mv?.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(null!==this.Vv&&(this.Ov(),0!==this.ts().js().length)){if(null!==this.wv){let t=this.Vv.Wo();this.wv._s(sk(t))}if(null!==this.gv){let t=this.Vv.Ho();this.gv._s(sk(t))}}}Nv(){null!==this.wv&&this.wv.yt(),null!==this.gv&&this.gv.yt()}Bo(){return null!==this.Vv?this.Vv.Bo():0}Io(t){this.Vv&&this.Vv.Io(t)}sf(t){if(!this.Vv)return;this.Fv();let e=t.localX,i=t.localY;this.Wv(e,i,t)}Sf(t){this.Fv(),this.Hv(),this.Wv(t.localX,t.localY,t)}nf(t){if(!this.Vv)return;this.Fv();let e=t.localX,i=t.localY;this.Wv(e,i,t)}mf(t){null!==this.Vv&&(this.Fv(),this.Uv(t))}Xd(t){null!==this.Vv&&this.$v(this.Cv,t)}qd(t){this.Xd(t)}cf(t){this.Fv(),this.qv(t),this.Wv(t.localX,t.localY,t)}vf(t){null!==this.Vv&&(this.Fv(),this.yv=!1,this.Yv(t))}pf(t){null!==this.Vv&&this.Uv(t)}If(t){if(this.yv=!0,null===this.kv){let e={x:t.localX,y:t.localY};this.jv(e,e,t)}}Bf(t){null!==this.Vv&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(t,e){if(!this.Vp.N().handleScale.pinch)return;let i=5*(e-this.Pv);this.Pv=e,this.ts().bc(t._t,i)}Mf(t){this.yv=!1,this.Tv=null!==this.kv,this.Hv();let e=this.ts().uc();null!==this.kv&&e.Vt()&&(this.Rv={x:e.si(),y:e.ni()},this.kv={x:t.localX,y:t.localY})}_f(t){if(null===this.Vv)return;let e=t.localX,i=t.localY;if(null===this.kv)this.qv(t);else{this.Tv=!1;let s=sk(this.Rv),n=s.x+(e-this.kv.x),r=s.y+(i-this.kv.y);this.Wv(n,r,t)}}ff(t){0===this.qp().N().trackingMode.exitMode&&(this.Tv=!0),this.Gv(),this.Yv(t)}jn(t,e){let i=this.Vv;return null===i?null:rd(i,t,e)}Jv(t,e){sk("left"===e?this.wv:this.gv).hv(sg({width:t,height:this.Op.height}))}Gf(){return this.Op}hv(t){sv(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.Iv.style.width=t.width+"px",this.Iv.style.height=t.height+"px")}Qv(){let t=sk(this.Vv);for(let e of(t.Fo(t.Wo()),t.Fo(t.Ho()),t.Ma()))if(t.Un(e)){let i=e.Ft();null!==i&&t.Fo(i),e.Ns()}for(let e of t.s_())e.Ns()}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,s){let n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),s)){let s=this.Jp.canvasElement;null!==t&&t.drawImage(s,e,i)}}lv(t){if(0===t||null===this.Vv)return;t>1&&this.Qv(),null!==this.wv&&this.wv.lv(t),null!==this.gv&&this.gv.lv(t);let e={colorSpace:this.Vp.N().layout.colorSpace};if(1!==t){this.Gp.applySuggestedBitmapSize();let t=sx(this.Gp,e);null!==t&&(t.useBitmapCoordinateSpace(t=>{this._v(t)}),this.Vv&&(this.tm(t,r3),this.im(t),this.tm(t,r5),this.tm(t,r4)))}this.Jp.applySuggestedBitmapSize();let i=sx(this.Jp,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.sm(i),this.tm(i,r6),this.tm(i,r4))}nm(){return this.wv}rm(){return this.gv}cv(t,e){this.tm(t,e)}Bv(){null!==this.Vv&&this.Vv.t_().u(this),this.Vv=null}Uv(t){this.$v(this.xv,t)}$v(t,e){let i=e.localX,s=e.localY;t.v()&&t.p(this.ts().Et().cu(i),{x:i,y:s},e)}_v({context:t,bitmapSize:e}){let{width:i,height:s}=e,n=this.ts(),r=n.$(),h=n.Wc();r===h?sZ(t,0,0,i,s,h):s2(t,0,0,i,s,r,h)}im(t){let e=sk(this.Vv),i=e.i_().lr().Tt(e);null!==i&&i.nt(t,!1)}sm(t){this.hm(t,r5,rX,this.ts().uc())}tm(t,e){let i=sk(this.Vv),s=i.Dt(),n=i.s_();for(let i of n)this.hm(t,e,rK,i);for(let i of s)this.hm(t,e,rK,i);for(let i of n)this.hm(t,e,rX,i);for(let i of s)this.hm(t,e,rX,i)}hm(t,e,i,s){let n=sk(this.Vv),r=n.Qt().ac(),h=null!==r&&r.n_===s,l=null!==r&&h&&void 0!==r.e_?r.e_.Xn:void 0;rZ(e,e=>i(e,t,h,l),s,n)}Ov(){if(null===this.Vv)return;let t=this.Vp,e=this.Vv.Wo().N().visible,i=this.Vv.Ho().N().visible;e||null===this.wv||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),i||null===this.gv||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);let s=t.Qt().Bc();e&&null===this.wv&&(this.wv=new r2(this,t.N(),s,"left"),this.Ev.appendChild(this.wv.Zf())),i&&null===this.gv&&(this.gv=new r2(this,t.N(),s,"right"),this.Av.appendChild(this.gv.Zf()))}am(t){return t.Ef&&this.yv||null!==this.kv}lm(t){return Math.max(0,Math.min(t,this.Op.width-1))}om(t){return Math.max(0,Math.min(t,this.Op.height-1))}Wv(t,e,i){this.ts().Tc(this.lm(t),this.om(e),i,sk(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(t,e,i){this.kv=t,this.Tv=!1,this.Wv(e.x,e.y,i);let s=this.ts().uc();this.Rv={x:s.si(),y:s.ni()}}ts(){return this.Vp.Qt()}Yv(t){if(!this.Sv)return;let e=this.ts(),i=this.ap();if(e.Ko(i,i.ks()),this.bv=null,this.Sv=!1,e.Pc(),null!==this.Dv){let t=performance.now(),i=e.Et();this.Dv.le(i.gu(),t),this.Dv.Ru(t)||e._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)sk(document.activeElement).blur();else{let t=document.getSelection();null!==t&&t.removeAllRanges()}this.Vv.ks().Ki()||this.ts().Et().Ki()}}qv(t){if(null===this.Vv)return;let e=this.ts(),i=e.Et();if(i.Ki())return;let s=this.Vp.N(),n=s.handleScroll,r=s.kineticScroll;if((!n.pressedMouseMove||t.Ef)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!t.Ef))return;let h=this.Vv.ks(),l=performance.now();if(null!==this.bv||this.am(t)||(this.bv={x:t.clientX,y:t.clientY,rd:l,_m:t.localX,um:t.localY}),null!==this.bv&&!this.Sv&&(this.bv.x!==t.clientX||this.bv.y!==t.clientY)){if(t.Ef&&r.touch||!t.Ef&&r.mouse){let t=i.mu();this.Dv=new r$(.2/t,7/t,.997,15/t),this.Dv.Pp(i.gu(),this.bv.rd)}else this.Dv=null;h.Ki()||e.Yo(this.Vv,h,t.localY),e.xc(t.localX),this.Sv=!0}this.Sv&&(h.Ki()||e.jo(this.Vv,h,t.localY),e.Cc(t.localX),null!==this.Dv&&this.Dv.Pp(i.gu(),l))}}class r8{constructor(t,e,i,s,n){this.xt=!0,this.Op=sg({width:0,height:0}),this.$p=()=>this.lv(3),this.jp="left"===t,this.Ju=i.Bc,this.Ps=e,this.dm=s,this.fm=n,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=rJ(this.jf,sg({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),rH(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(t){sv(this.Op,t)||(this.Op=t,this.Gp.resizeCanvasElement(t),this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.xt=!0)}lv(t){if(t<3&&!this.xt||0===this.Op.width||0===this.Op.height)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();let e=sx(this.Gp,{colorSpace:this.Ps.layout.colorSpace});null!==e&&e.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t)})}Jf(){return this.Gp.bitmapSize}Qf(t,e,i){let s=this.Jf();s.width>0&&s.height>0&&t.drawImage(this.Gp.canvasElement,e,i)}uv({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.dm())return;t.fillStyle=this.Ps.timeScale.borderColor;let n=Math.floor(this.Ju.N().S*i),r=Math.floor(this.Ju.N().S*s),h=this.jp?e.width-n:0;t.fillRect(h,0,n,r)}_v({context:t,bitmapSize:e}){sZ(t,0,0,e.width,e.height,this.fm())}}function r7(t){return e=>e.ia?.(t)??[]}let ht=r7("normal"),he=r7("top"),hi=r7("bottom");class hs{constructor(t,e){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=sg({width:0,height:0}),this.gm=new sD,this.Fp=new na(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=t,this.o_=e,this.Ps=t.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=rJ(this.Sm,sg({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=rJ(this.Sm,sg({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const s=this.Jp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new rA(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),null!==this.pm&&this.pm.m(),null!==this.vm&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),rH(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),rH(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(t){if(this.wm)return;this.wm=!0;let e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.Mc(t.localX)}Mf(t){this.Sf(t)}xf(){let t=this.Vp.Qt();!t.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&t.kc())}cf(t){let e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.yc(t.localX)}_f(t){this.cf(t)}vf(){this.wm=!1;let t=this.Vp.Qt();t.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||t.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(t,e,i){sv(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.gm.p(t)),null!==this.pm&&this.pm.hv(sg({width:e,height:t.height})),null!==this.vm&&this.vm.hv(sg({width:i,height:t.height}))}Tm(){let t=this.Rm();return Math.ceil(t.S+t.C+t.P+t.A+t.V+t.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(t,e,i,s){let n=this.Jf();if(n.width>0&&n.height>0&&(t.drawImage(this.Gp.canvasElement,e,i),s)){let s=this.Jp.canvasElement;t.drawImage(s,e,i)}}lv(t){if(0===t)return;let e={colorSpace:this.Ps.colorSpace};if(1!==t){this.Gp.applySuggestedBitmapSize();let i=sx(this.Gp,e);null!==i&&(i.useBitmapCoordinateSpace(t=>{this._v(t),this.uv(t),this.Vm(i,hi)}),this.dv(i),this.Vm(i,ht)),null!==this.pm&&this.pm.lv(t),null!==this.vm&&this.vm.lv(t)}this.Jp.applySuggestedBitmapSize();let i=sx(this.Jp,e);null!==i&&(i.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],i),this.Vm(i,he))}Vm(t,e){let i=this.Vp.Qt().js();for(let s of i)rZ(e,e=>rK(e,t,!1,void 0),s,void 0);for(let s of i)rZ(e,e=>rX(e,t,!1,void 0),s,void 0)}_v({context:t,bitmapSize:e}){sZ(t,0,0,e.width,e.height,this.Vp.Qt().Wc())}uv({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Vp.N().timeScale.borderVisible){t.fillStyle=this.Im();let s=Math.max(1,Math.floor(this.Rm().S*i));t.fillRect(0,0,e.width,s)}}dv(t){let e=this.Vp.Qt().Et(),i=e.Da();if(!i||0===i.length)return;let s=this.o_.maxTickMarkWeight(i),n=this.Rm(),r=e.N();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.Im(),t.fillStyle=this.Im();let r=Math.max(1,Math.floor(e)),h=Math.floor(.5*e);t.beginPath();let l=Math.round(n.C*s);for(let s=i.length;s--;){let n=Math.round(i[s].coord*e);t.rect(n-h,0,r,l)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{let e=n.S+n.C+n.A+n.P/2;for(let n of(t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.H(),t.font=this.ev(),i))if(n.weight<s){let i=n.needAlignCoordinate?this.Em(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}for(let n of(this.Vp.N().timeScale.allowBoldLabels&&(t.font=this.Am()),i))if(n.weight>=s){let i=n.needAlignCoordinate?this.Em(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}})}Em(t,e,i){let s=this.Fp.Vi(t,i),n=Math.floor(e-s/2)+.5;return n<0?e+=Math.abs(0-n):n+s>this.Op.width&&(e-=Math.abs(this.Op.width-(n+s))),e}Bm(t,e){let i=this.Rm();for(let s of t)for(let t of s.cs())t.Tt().nt(e,i)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return sF(this.F(),this.Ps.fontFamily)}Am(){return sF(this.F(),this.Ps.fontFamily,"bold")}Rm(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new na,Dm:0});let t=this.M,e=this.ev();if(t.k!==e){let i=this.F();t.P=i,t.k=e,t.A=3*i/12,t.V=3*i/12,t.Ji=9*i/12,t.L=0,t.Dm=4*i/12,t.Gi.Bn()}return this.M}vv(t){this.jf.style.cursor=1===t?"ew-resize":"default"}xm(){let t=this.Vp.Qt(),e=t.N();e.leftPriceScale.visible||null===this.pm||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),e.rightPriceScale.visible||null===this.vm||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);let i={Bc:this.Vp.Qt().Bc()},s=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,n=()=>t.Wc();e.leftPriceScale.visible&&null===this.pm&&(this.pm=new r8("left",e,i,s,n),this.Mm.appendChild(this.pm.Zf())),e.rightPriceScale.visible&&null===this.vm&&(this.vm=new r8("right",e,i,s,n),this.bm.appendChild(this.vm.Zf()))}}let hn=!!rz&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!rz&&(navigator?.userAgentData?.platform?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class hr{constructor(t,e,i){var s;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new sD,this.Cv=new sD,this.Xu=new sD,this.Um=null,this.$m=null,this.Dp=t,this.Ps=e,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),hh(this.Ps)&&this.Km(!0),this.ts=new rw(this.Gu.bind(this),this.Ps,i),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new hs(this,this.o_),this.qm.appendChild(this.Zm.Zf());const n=e.autoSize&&this.Gm();let r=this.Ps.width,h=this.Ps.height;if(n||0===r||0===h){const e=t.getBoundingClientRect();r=r||e.width,h=h||e.height}this.Jm(r,h),this.Qm(),t.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){for(let t of(this.Km(!1),0!==this.Om&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m(),this.zm))this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();for(let t of(this.zm=[],this.Lm))this.sw(t);this.Lm=[],sk(this.Zm).m(),null!==this.kp.parentElement&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(t,e,i=!1){var s;let n,r;if(this.il===e&&this.Mo===t)return;let h=(n=Math.floor((s=sg({width:t,height:e})).width),sg({width:n-n%2,height:(r=Math.floor(s.height))-r%2}));this.il=h.height,this.Mo=h.width;let l=this.il+"px",o=this.Mo+"px";sk(this.kp).style.height=l,sk(this.kp).style.width=o,this.qm.style.height=l,this.qm.style.width=o,i?this.ew(ni.gn(),performance.now()):this.ts.Ih()}lv(t){void 0===t&&(t=ni.gn());for(let e=0;e<this.zm.length;e++)this.zm[e].lv(t.en(e).tn);this.Ps.timeScale.visible&&this.Zm.lv(t.nn())}hr(t){let e=hh(this.Ps);this.ts.hr(t);let i=hh(this.Ps);i!==e&&this.Km(i),t.layout?.panes&&this.rw(),this.tw(),this.hw(t)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(t=!1){null!==this.Wm&&(this.ew(this.Wm,performance.now()),this.Wm=null);let e=this.lw(null),i=document.createElement("canvas");i.width=e.width,i.height=e.height;let s=sk(i.getContext("2d"));return this.lw(s,t),i}ow(t){return("left"!==t||this._w())&&("right"!==t||this.uw())&&0!==this.zm.length?sk("left"===t?this.zm[0].nm():this.zm[0].rm()).av():0}cw(){return this.Ps.autoSize&&null!==this.Um}ip(){return this.kp}dw(t){this.$m=t,this.$m?this.ip().style.setProperty("cursor",t):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(t){return sC(this.zm[t]).Gf()}rw(){this.Lm.forEach(t=>{t.yt()})}hw(t){(void 0!==t.autoSize||!this.Um||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Um&&this.Gm(),!1===t.autoSize&&null!==this.Um&&this.nw(),t.autoSize||void 0===t.width&&void 0===t.height||this.Jm(t.width||this.Mo,t.height||this.il))}lw(t,e){let i=0,s=0,n=this.zm[0],r=(i,s)=>{let n=0;for(let r=0;r<this.zm.length;r++){let h=this.zm[r],l=sk("left"===i?h.nm():h.rm()),o=l.Jf();if(null!==t&&l.Qf(t,s,n,e),n+=o.height,r<this.zm.length-1){let e=this.Lm[r],i=e.Jf();null!==t&&e.Qf(t,s,n),n+=i.height}}};this._w()&&(r("left",0),i+=sk(n.nm()).Jf().width);for(let n=0;n<this.zm.length;n++){let r=this.zm[n],h=r.Jf();if(null!==t&&r.Qf(t,i,s,e),s+=h.height,n<this.zm.length-1){let e=this.Lm[n],r=e.Jf();null!==t&&e.Qf(t,i,s),s+=r.height}}i+=n.Jf().width,this.uw()&&(r("right",i),i+=sk(n.rm()).Jf().width);let h=(e,i,s)=>{sk("left"===e?this.Zm.Cm():this.Zm.Pm()).Qf(sk(t),i,s)};if(this.Ps.timeScale.visible){let i=this.Zm.Jf();if(null!==t){let r=0;this._w()&&(h("left",r,s),r=sk(n.nm()).Jf().width),this.Zm.Qf(t,r,s,e),r+=i.width,this.uw()&&h("right",r,s)}s+=i.height}return sg({width:i,height:s})}mw(){var t,e,i;let s=0,n=0,r=0;for(let t of this.zm)this._w()&&(n=Math.max(n,sk(t.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(r=Math.max(r,sk(t.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),s+=t.Bo();n=(e=n)+e%2,r=(i=r)+i%2;let h=this.Mo,l=this.il,o=Math.max(h-n-r,0),a=+this.Lm.length,u=this.Ps.timeScale.visible,c=u?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0,d=a+(c=(t=c)+t%2),f=l<d?0:l-d,p=f/s,m=0,g=window.devicePixelRatio||1;for(let t=0;t<this.zm.length;++t){let e=this.zm[t];e.Lv(this.ts.$s()[t]);let i=0;i=Math.max(t===this.zm.length-1?Math.ceil((f-m)*g)/g:Math.round(e.Bo()*p*g)/g,2),m+=i,e.hv(sg({width:o,height:i})),this._w()&&e.Jv(n,"left"),this.uw()&&e.Jv(r,"right"),e.ap()&&this.ts.dc(e.ap(),i)}this.Zm.km(sg({width:u?o:0,height:c}),u?n:0,u?r:0),this.ts.Eo(o),this.Nm!==n&&(this.Nm=n),this.Fm!==r&&(this.Fm=r)}Km(t){t?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return hn?1/window.devicePixelRatio:1}jm(t){if(!(0!==t.deltaX&&this.Ps.handleScroll.mouseWheel||0!==t.deltaY&&this.Ps.handleScale.mouseWheel))return;let e=this.ww(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.Ps.handleScale.mouseWheel){let e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(i,e)}0!==i&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*i)}ew(t,e){let i=t.nn();3===i&&this.gw(),3!==i&&2!==i||(this.Mw(t),this.bw(t,e),this.Zm.yt(),this.zm.forEach(t=>{t.Nv()}),3===this.Wm?.nn()&&(this.Wm.vn(t),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,e),t=this.Wm,this.Wm=null)),this.lv(t)}bw(t,e){for(let i of t.pn())this.mn(i,e)}Mw(t){let e=this.ts.$s();for(let i=0;i<e.length;i++)t.en(i).sn&&e[i].Go()}mn(t,e){let i=this.ts.Et();switch(t.an){case 0:i.Au();break;case 1:i.zu(t.Wt);break;case 2:i.dn(t.Wt);break;case 3:i.fn(t.Wt);break;case 4:i.Su();break;case 5:t.Wt.Ru(e)||i.fn(t.Wt.Du(e))}}Gu(t){null!==this.Wm?this.Wm.vn(t):this.Wm=t,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(t=>{if(this.Hm=!1,this.Om=0,null!==this.Wm){let e=this.Wm;for(let i of(this.Wm=null,this.ew(e,t),e.pn()))if(5===i.an&&!i.Wt.Ru(t)){this.Qt()._n(i.Wt);break}}}))}gw(){this.Qm()}sw(t){this.qm.removeChild(t.Zf()),t.m()}Qm(){let t=this.ts.$s(),e=t.length,i=this.zm.length;for(let t=e;t<i;t++){let t=sC(this.zm.pop());this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();let e=this.Lm.pop();void 0!==e&&this.sw(e)}for(let s=i;s<e;s++){let e=new r9(this,t[s]);if(e.Xv().i(this.Sw.bind(this,e),this),e.Zv().i(this.xw.bind(this,e),this),this.zm.push(e),s>0){let t=new rG(this,s-1,s);this.Lm.push(t),this.qm.insertBefore(t.Zf(),this.Zm.Zf())}this.qm.insertBefore(e.Zf(),this.Zm.Zf())}for(let i=0;i<e;i++){let e=t[i],s=this.zm[i];s.ap()!==e?s.Lv(e):s.zv()}this.tw(),this.mw()}Cw(t,e,i,s){let n,r=new Map;if(null!==t&&this.ts.js().forEach(e=>{let i=e.Xs().Fr(t);null!==i&&r.set(e,i)}),null!==t){let e=this.ts.Et().ss(t)?.originalTime;void 0!==e&&(n=e)}let h=this.Qt().ac(),l=null!==h&&h.n_ instanceof nH?h.n_:void 0,o=null!==h&&void 0!==h.e_?h.e_.Kn:void 0,a=this.Pw(s);return{yw:n,Re:t??void 0,kw:e??void 0,Tw:-1!==a?a:void 0,Rw:l,Dw:r,Vw:o,Bw:i??void 0}}Pw(t){let e=-1;if(t)e=this.zm.indexOf(t);else{let t=this.Qt().uc().Us();null!==t&&(e=this.Qt().$s().indexOf(t))}return e}Sw(t,e,i,s){this.xv.p(()=>this.Cw(e,i,s,t))}xw(t,e,i,s){this.Cv.p(()=>this.Cw(e,i,s,t))}Xm(t,e,i){this.dw(this.Qt().ac()?.h_??null),this.Xu.p(()=>this.Cw(t,e,i))}tw(){let t=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=t}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(t=>{let e=t[t.length-1];e&&this.Jm(e.contentRect.width,e.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){null!==this.Um&&this.Um.disconnect(),this.Um=null}}function hh(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function hl(t,e,i,s){let n=i.value,r={Re:e,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==i.color&&(r.R=i.color),r}function ho(t,e,i,s){let n=i.value,r={Re:e,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==i.lineColor&&(r.vt=i.lineColor),void 0!==i.topColor&&(r.mr=i.topColor),void 0!==i.bottomColor&&(r.wr=i.bottomColor),r}function ha(t,e,i,s){let n=i.value,r={Re:e,wt:t,Wt:[n,n,n,n],yw:s};return void 0!==i.topLineColor&&(r.gr=i.topLineColor),void 0!==i.bottomLineColor&&(r.Mr=i.bottomLineColor),void 0!==i.topFillColor1&&(r.br=i.topFillColor1),void 0!==i.topFillColor2&&(r.Sr=i.topFillColor2),void 0!==i.bottomFillColor1&&(r.Cr=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(r.Pr=i.bottomFillColor2),r}function hu(t,e,i,s){let n={Re:e,wt:t,Wt:[i.open,i.high,i.low,i.close],yw:s};return void 0!==i.color&&(n.R=i.color),n}function hc(t,e,i,s){let n={Re:e,wt:t,Wt:[i.open,i.high,i.low,i.close],yw:s};return void 0!==i.color&&(n.R=i.color),void 0!==i.borderColor&&(n.Ht=i.borderColor),void 0!==i.wickColor&&(n.vr=i.wickColor),n}function hd(t,e,i,s,n){let r=sC(n)(i),h=Math.max(...r),l=Math.min(...r),o=r[r.length-1],{time:a,color:u,...c}=i;return{Re:e,wt:t,Wt:[o,h,l,o],yw:s,se:c,R:u}}function hf(t){return void 0!==t.Wt}function hp(t,e){return void 0!==e.customValues&&(t.Iw=e.customValues),t}function hm(t){return(e,i,s,n,r,h)=>(h?h(s):void 0===s.open&&void 0===s.value)?hp({wt:e,Re:i,yw:n},s):hp(t(e,i,s,n,r),s)}function hg(t){return({Candlestick:hm(hc),Bar:hm(hu),Area:hm(ho),Baseline:hm(ha),Histogram:hm(hl),Line:hm(hl),Custom:hm(hd)})[t]}function hv(t){return{Re:0,Ew:new Map,Hh:t}}function hb(t,e){if(void 0!==t&&0!==t.length)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function h_(t){let e;return t.forEach(t=>{void 0===e&&(e=t.yw)}),sC(e)}class hw{constructor(t){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=t}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(t,e){let i=0!==this.Lw.size,s=!1,n=this.Ow.get(t);if(void 0!==n)if(1===this.Ow.size)i=!1,s=!0,this.Lw.clear();else for(let e of this.Fw)e.pointData.Ew.delete(t)&&(s=!0);let r=[];if(0!==e.length){let i=e.map(t=>t.time),n=this.o_.createConverterToInternalObj(e),h=hg(t.Rr()),l=t.ca(),o=t.fa();r=e.map((e,r)=>{let a=n(e.time),u=this.o_.key(a),c=this.Lw.get(u);void 0===c&&(c=hv(a),this.Lw.set(u,c),s=!0);let d=h(a,c.Re,e,i[r],l,o);return c.Ew.set(t,d),d})}i&&this.Hw(),this.Uw(t,r);let h=-1;if(s){let t=[];this.Lw.forEach(e=>{t.push({timeWeight:0,time:e.Hh,pointData:e,originalTime:h_(e.Ew)})}),t.sort((t,e)=>this.o_.key(t.time)-this.o_.key(e.time)),h=this.$w(t)}return this.qw(t,h,function(t,e,i){let s=hb(t,i),n=hb(e,i);if(void 0!==s&&void 0!==n)return{Yw:!1,zh:s.zw>=n.zw&&s.Aw>=n.Aw}}(this.Ow.get(t),n,this.o_))}Ac(t){return this.Ww(t,[])}jw(t,e,i){void 0===e.yw&&(e.yw=e.time),this.o_.preprocessData(e);let s=this.o_.createConverterToInternalObj([e])(e.time),n=this.Nw.get(t);if(!i&&void 0!==n&&this.o_.key(s)<this.o_.key(n))throw Error(`Cannot update oldest data, last time=${n}, new time=${s}`);let r=this.Lw.get(this.o_.key(s));if(i&&void 0===r)throw Error("Cannot update non-existing data point when historicalUpdate is true");let h=void 0===r;void 0===r&&(r=hv(s),this.Lw.set(this.o_.key(s),r));let l=hg(t.Rr()),o=t.ca(),a=t.fa(),u=l(s,r.Re,e,e.yw,o,a);r.Ew.set(t,u),i?this.Kw(t,u,r.Re):this.Xw(t,u);let c={zh:hf(u),Yw:i};if(!h)return this.qw(t,-1,c);let d={timeWeight:0,time:r.Hh,pointData:r,originalTime:h_(r.Ew)},f=nD(this.Fw,this.o_.key(d.time),(t,e)=>this.o_.key(t.time)<e);this.Fw.splice(f,0,d);for(let t=f;t<this.Fw.length;++t)hy(this.Fw[t].pointData,t);return this.o_.fillWeightsForPoints(this.Fw,f),this.qw(t,f,c)}Zw(t,e){let i=this.Ow.get(t);if(void 0===i||e<=0)return[[],this.Gw()];e=Math.min(e,i.length);let s=i.splice(-e).reverse();for(let e of(0===i.length?this.Nw.delete(t):this.Nw.set(t,i[i.length-1].wt),s)){let i=this.Lw.get(this.o_.key(e.wt));if(i&&(i.Ew.delete(t),0===i.Ew.size)){this.Lw.delete(this.o_.key(i.Hh)),this.Fw.splice(i.Re,1);for(let t=i.Re;t<this.Fw.length;++t)hy(this.Fw[t].pointData,t)}}return[s,this.qw(t,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(t,e){let i=this.Ow.get(t);void 0===i&&(i=[],this.Ow.set(t,i));let s=0!==i.length?i[i.length-1]:null;null===s||this.o_.key(e.wt)>this.o_.key(s.wt)?hf(e)&&i.push(e):hf(e)?i[i.length-1]=e:i.splice(-1,1),this.Nw.set(t,e.wt)}Kw(t,e,i){let s=this.Ow.get(t);if(void 0===s)return;let n=nD(s,i,(t,e)=>t.Re<e);hf(e)?s[n]=e:s.splice(n,1)}Uw(t,e){0!==e.length?(this.Ow.set(t,e.filter(hf)),this.Nw.set(t,e[e.length-1].wt)):(this.Ow.delete(t),this.Nw.delete(t))}Hw(){for(let t of this.Fw)0===t.pointData.Ew.size&&this.Lw.delete(this.o_.key(t.time))}$w(t){let e=-1;for(let i=0;i<this.Fw.length&&i<t.length;++i){let s=this.Fw[i],n=t[i];if(this.o_.key(s.time)!==this.o_.key(n.time)){e=i;break}n.timeWeight=s.timeWeight,hy(n.pointData,i)}if(-1===e&&this.Fw.length!==t.length&&(e=Math.min(this.Fw.length,t.length)),-1===e)return -1;for(let i=e;i<t.length;++i)hy(t[i].pointData,i);return this.o_.fillWeightsForPoints(t,e),this.Fw=t,e}Jw(){if(0===this.Ow.size)return null;let t=0;return this.Ow.forEach(e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].Re))}),t}qw(t,e,i){let s=this.Gw();if(-1!==e)this.Ow.forEach((e,n)=>{s.Oo.set(n,{se:e,Qw:n===t?i:void 0})}),this.Ow.has(t)||s.Oo.set(t,{se:[],Qw:i}),s.Et.tg=this.Fw,s.Et.ig=e;else{let e=this.Ow.get(t);s.Oo.set(t,{se:e||[],Qw:i})}return s}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function hy(t,e){t.Re=e,t.Ew.forEach(t=>{t.Re=e})}function hx(t,e){return t.wt<e}function hS(t,e){return e<t.wt}function hP(t,e,i){let s=e.Uh(),n=e.bi(),r=nD(t,s,hx),h=nN(t,n,hS);if(!i)return{from:r,to:h};let l=r,o=h;return r>0&&r<t.length&&t[r].wt>=s&&(l=r-1),h>0&&h<t.length&&t[h-1].wt<=n&&(o=h+1),{from:l,to:o}}class hM{constructor(t,e,i){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=t,this.Qn=e,this.ag=i}yt(t){this.sg=!0,"data"===t&&(this.ng=!0),"options"===t&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),null===this.hg?null:this.og):null}_g(){this.rg=this.rg.map(t=>({...t,...this.Jn.Rh().Dr(t.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){let t=this.Jn.Ft(),e=this.Qn.Et();if(this.ug(),e.Ki()||t.Ki())return;let i=e.Pe();if(null===i||0===this.Jn.Xs().zr())return;let s=this.Jn.zt();null!==s&&(this.hg=hP(this.rg,i,this.ag),this.fg(t,e,s.Wt),this.pg())}}class hO{constructor(t,e){this.vg=t,this.Yi=e}nt(t,e,i){this.vg.draw(t,this.Yi,e,i)}}class hC extends hM{constructor(t,e,i){super(t,e,!1),this.sh=i,this.og=new hO(this.sh.renderer(),e=>{let i=t.zt();return null===i?null:t.Ft().Nt(e,i.Wt)})}da(t){return this.sh.priceValueBuilder(t)}pa(t){return this.sh.isWhitespace(t)}cg(){let t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(e=>({wt:e.Re,_t:NaN,...t.Dr(e.Re),mg:e.se}))}fg(t,e){e.uu(this.rg,sL(this.hg))}pg(){this.sh.update({bars:this.rg.map(hk),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function hk(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}let hE={color:"#2196f3"},hD=(t,e,i)=>new hC(t,e,sE(i));function hN(t){let e={value:t.Wt[3],time:t.yw};return void 0!==t.Iw&&(e.customValues=t.Iw),e}function hT(t){let e=hN(t);return void 0!==t.R&&(e.color=t.R),e}function hV(t){let e=hN(t);return void 0!==t.vt&&(e.lineColor=t.vt),void 0!==t.mr&&(e.topColor=t.mr),void 0!==t.wr&&(e.bottomColor=t.wr),e}function hR(t){let e=hN(t);return void 0!==t.gr&&(e.topLineColor=t.gr),void 0!==t.Mr&&(e.bottomLineColor=t.Mr),void 0!==t.br&&(e.topFillColor1=t.br),void 0!==t.Sr&&(e.topFillColor2=t.Sr),void 0!==t.Cr&&(e.bottomFillColor1=t.Cr),void 0!==t.Pr&&(e.bottomFillColor2=t.Pr),e}function hj(t){let e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return void 0!==t.Iw&&(e.customValues=t.Iw),e}function hz(t){let e=hj(t);return void 0!==t.R&&(e.color=t.R),e}function hB(t){let e=hj(t),{R:i,Ht:s,vr:n}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==n&&(e.wickColor=n),e}function hL(t){return({Area:hV,Line:hT,Baseline:hR,Histogram:hT,Bar:hz,Candlestick:hB,Custom:hA})[t]}function hA(t){let e=t.yw;return{...t.se,time:e}}let hF={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},hI={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},hY={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:sA,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},hW={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},hU={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function hG(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:hY,crosshair:hF,grid:hI,overlayPriceScales:{...hW},leftPriceScale:{...hW,visible:!1},rightPriceScale:{...hW,visible:!0},timeScale:hU,localization:{locale:rz?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class hq{constructor(t,e,i){this.Hf=t,this.wg=e,this.gg=i??0}applyOptions(t){this.Hf.Qt().oc(this.wg,t,this.gg)}options(){return this.Yi().N()}width(){return ne(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Fl(new ny(t.from,t.to))}getVisibleRange(){let t,e,i=this.Yi().Qe();if(null===i)return null;if(this.Yi().Ja()){let s=this.Yi().fo(),n=ry(s);t=Number((Math.round((i=re(i,this.Yi().tl())).$e()/s)*s).toFixed(n)),e=Number((Math.round(i.qe()/s)*s).toFixed(n))}else t=i.$e(),e=i.qe();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return sk(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class h${constructor(t,e,i,s){this.Hf=t,this.Pt=i,this.Mg=e,this.bg=s}getHeight(){return this.Pt.$t()}setHeight(t){let e=this.Hf.Qt(),i=e.Uc(this.Pt);e.vc(i,t)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(t){this.Pt.Io(t),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(t){let e=this.paneIndex();e!==t&&(sO(t>=0&&t<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(e,t))}getSeries(){return this.Pt.Oo().map(t=>this.Mg(t))??[]}getHTMLElement(){let t=this.Hf.$f();return t&&0!==t.length&&t[this.paneIndex()]?t[this.paneIndex()].Zf():null}attachPrimitive(t){this.Pt._a(t),t.attached&&t.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(t){this.Pt.ua(t)}priceScale(t){if(null===this.Pt.Do(t))throw Error(`Cannot find price scale with id: ${t}`);return new hq(this.Hf,t,this.paneIndex())}setPreserveEmptyPane(t){this.Pt.zo(t)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(t,e={},i=0){return this.bg.addCustomSeries(t,e,i)}addSeries(t,e={}){return this.bg.addSeries(t,e,this.paneIndex())}}let hQ={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class hJ{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}Sg(){return this.ir}}class hH{constructor(t,e,i,s,n,r){this.xg=new sD,this.Jn=t,this.Cg=e,this.Pg=i,this.o_=n,this.bg=s,this.yg=r}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(t){let e=this.Jn.zt();return null===e?null:this.Jn.Ft().Nt(t,e.Wt)}coordinateToPrice(t){let e=this.Jn.zt();return null===e?null:this.Jn.Ft().Ts(t,e.Wt)}barsInLogicalRange(t){if(null===t)return null;let e=new rv(new rp(t.from,t.to)).y_(),i=this.Jn.Xs();if(i.Ki())return null;let s=i.Fr(e.Uh(),1),n=i.Fr(e.bi(),-1),r=sk(i.Lr()),h=sk(i.Ks());if(null!==s&&null!==n&&s.Re>n.Re)return{barsBefore:t.from-r,barsAfter:h-t.to};let l={barsBefore:null===s||s.Re===r?t.from-r:s.Re-r,barsAfter:null===n||n.Re===h?h-t.to:h-n.Re};return null!==s&&null!==n&&(l.from=s.yw,l.to=n.yw),l}setData(t){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,t),this.Tg("full")}update(t,e=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,t,e),this.Tg("update")}pop(t=1){let e=this.Cg.Dg(this.Jn,t);0!==e.length&&this.Tg("update");let i=hL(this.seriesType());return e.map(t=>i(t))}dataByIndex(t,e){let i=this.Jn.Xs().Fr(t,e);return null===i?null:hL(this.seriesType())(i)}data(){let t=hL(this.seriesType());return this.Jn.Xs().Hr().map(e=>t(e))}subscribeDataChanged(t){this.xg.i(t)}unsubscribeDataChanged(t){this.xg._(t)}applyOptions(t){this.Jn.hr(t)}options(){return sz(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(t){let e=sN(sz(hQ),t);return new hJ(this.Jn.Oh(e))}removePriceLine(t){this.Jn.Nh(t.Sg())}priceLines(){return this.Jn.Fh().map(t=>new hJ(t))}seriesType(){return this.Jn.Rr()}lastValueData(t){let e=this.Jn.ye(t);return e.ke?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.Jn._a(t),t.attached&&t.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(t){this.Jn.ua(t),t.detached&&t.detached(),this.Jn.Qt().Ih()}getPane(){let t=this.Jn,e=sk(this.Jn.Qt().Hn(t));return this.yg(e)}moveToPane(t){this.Jn.Qt().Nc(this.Jn,t)}seriesOrder(){let t=this.Jn.Qt().Hn(this.Jn);return null===t?-1:t.Oo().indexOf(this.Jn)}setSeriesOrder(t){let e=this.Jn.Qt().Hn(this.Jn);null!==e&&e.Qo(this.Jn,t)}Tg(t){this.xg.v()&&this.xg.p(t)}}class hK{constructor(t,e,i){this.Vg=new sD,this.z_=new sD,this.gm=new sD,this.ts=t,this.uh=t.Et(),this.Zm=e,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=i}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(t,e){e?this.uh.Tu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){let t=this.uh.nu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.o_.convertHorzItemToInternal(t.from),to:this.o_.convertHorzItemToInternal(t.to)},i=this.uh.au(e);this.ts.Lc(i)}getVisibleLogicalRange(){let t=this.uh.su();return null===t?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){sO(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Lc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(t){let e=this.ts.Et();return e.Ki()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.cu(t)}timeToIndex(t,e){let i=this.o_.convertHorzItemToInternal(t);return this.uh.Q_(i,e)}timeToCoordinate(t){let e=this.timeToIndex(t,!1);return null===e?null:this.uh.qt(e)}coordinateToTime(t){let e=this.ts.Et(),i=e.cu(t),s=e.ss(i);return null===s?null:s.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(t){this.Vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.Vg._(t)}subscribeVisibleLogicalRangeChange(t){this.z_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.z_._(t)}subscribeSizeChange(t){this.gm.i(t)}unsubscribeSizeChange(t){this.gm._(t)}applyOptions(t){this.uh.hr(t)}options(){return{...sz(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(t){this.gm.p(t.width,t.height)}}function hX(t){return function(t){if(sj(t.handleScale)){let e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){let{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;sj(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),sj(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}let e=t.handleScroll;sj(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class hZ{constructor(t,e,i){this.Ag=new Map,this.zg=new Map,this.Lg=new sD,this.Og=new sD,this.Ng=new sD,this.qu=new WeakMap,this.Fg=new hw(e);const s=void 0===i?sz(hG()):sN(sz(hG()),hX(i));this.Wg=e,this.Hf=new hr(t,s,e),this.Hf.Xv().i(t=>{this.Lg.v()&&this.Lg.p(this.Hg(t()))},this),this.Hf.Zv().i(t=>{this.Og.v()&&this.Og.p(this.Hg(t()))},this),this.Hf.cc().i(t=>{this.Ng.v()&&this.Ng.p(this.Hg(t()))},this);const n=this.Hf.Qt();this.Ug=new hK(n,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(t,e,i){this.autoSizeActive()||this.Hf.Jm(t,e,i)}addCustomSeries(t,e={},i=0){let s,n=(s=sE(t),{type:"Custom",isBuiltIn:!1,defaultOptions:{...hE,...s.defaultOptions()},$g:hD,qg:s});return this.Yg(n,e,i)}addSeries(t,e={},i=0){return this.Yg(t,e,i)}removeSeries(t){let e=sC(this.Ag.get(t)),i=this.Fg.Ac(e);this.Hf.Qt().Ac(e),this.jg(i),this.Ag.delete(t),this.zg.delete(e)}kg(t,e){this.jg(this.Fg.Ww(t,e))}Rg(t,e,i){this.jg(this.Fg.jw(t,e,i))}Dg(t,e){let[i,s]=this.Fg.Zw(t,e);return 0!==i.length&&this.jg(s),i}subscribeClick(t){this.Lg.i(t)}unsubscribeClick(t){this.Lg._(t)}subscribeCrosshairMove(t){this.Ng.i(t)}unsubscribeCrosshairMove(t){this.Ng._(t)}subscribeDblClick(t){this.Og.i(t)}unsubscribeDblClick(t){this.Og._(t)}priceScale(t,e=0){return new hq(this.Hf,t,e)}timeScale(){return this.Ug}applyOptions(t){this.Hf.hr(hX(t))}options(){return this.Hf.N()}takeScreenshot(t=!1,e=!1){let i,s;try{e||(i=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),s=this.Hf.aw(t)}finally{e||void 0===i||this.Hf.Qt().hr({crosshair:{mode:i}})}return s}addPane(t=!1){let e=this.Hf.Qt().$c();return e.zo(t),this.Kg(e)}removePane(t){this.Hf.Qt().fc(t)}swapPanes(t,e){this.Hf.Qt().mc(t,e)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(t=>this.Kg(t))}paneSize(t=0){let e=this.Hf.pw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){let s=this.Ag.get(i);if(void 0===s)return;let n=this.Hf.Qt().Hn(s);null!==n&&this.Hf.Qt().Rc(t,e,n)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(t,e={},i=0){var s;sO(void 0!==t.$g),void 0===(s=e.priceFormat)||"custom"===s.type||void 0!==s.minMove&&void 0===s.precision&&(s.precision=ry(s.minMove)),"Candlestick"===t.type&&(void 0!==e.borderColor&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),void 0!==e.wickColor&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor));let n=sN(sz(sS),sz(t.defaultOptions),e),r=t.$g,h=new nH(this.Hf.Qt(),t.type,n,r,t.qg);this.Hf.Qt().Ic(h,i);let l=new hH(h,this,this,this,this.Wg,t=>this.Kg(t));return this.Ag.set(l,h),this.zg.set(h,l),l}jg(t){let e=this.Hf.Qt();e.Vc(t.Et._u,t.Et.tg,t.Et.ig),t.Oo.forEach((t,e)=>e.ht(t.se,t.Qw)),e.Et().K_(),e.vu()}Xg(t){return sC(this.zg.get(t))}Hg(t){let e=new Map;t.Dw.forEach((t,i)=>{let s=i.Rr(),n=hL(s)(t);if("Custom"!==s){var r;sO(void 0!==(r=n).open||void 0!==r.value)}else{let t=i.fa();sO(!t||!1===t(n))}e.set(this.Xg(i),n)});let i=void 0!==t.Rw&&this.zg.has(t.Rw)?this.Xg(t.Rw):void 0;return{time:t.yw,logical:t.Re,point:t.kw,paneIndex:t.Tw,hoveredSeries:i,hoveredObjectId:t.Vw,seriesData:e,sourceEvent:t.Bw}}Kg(t){let e=this.qu.get(t);return e||(e=new h$(this.Hf,t=>this.Xg(t),t,this),this.qu.set(t,e)),e}}class h0 extends hM{constructor(t,e){super(t,e,!1)}fg(t,e,i){e.uu(this.rg,sL(this.hg)),t.ql(this.rg,i,sL(this.hg))}VM(t,e,i){return{wt:t,qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3],_t:NaN,Yl:NaN,jl:NaN,Kl:NaN,Xl:NaN}}cg(){let t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(e=>this.Gg(e.Re,e,t))}}class h1 extends sq{constructor(){super(...arguments),this.Yt=null,this.yM=0}ht(t){this.Yt=t}et(t){if(null===this.Yt||0===this.Yt.Xs.length||null===this.Yt.lt)return;let{horizontalPixelRatio:e}=t;this.yM=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);let i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.min(Math.floor(t*i*e),Math.floor(t*e));return Math.max(Math.floor(e),s)}(this.Yt.mu,e),this.yM>=2&&Math.floor(e)%2!=this.yM%2&&this.yM--;let i=this.Yt.Xs;this.Yt.BM&&this.IM(t,i,this.Yt.lt),this.Yt.Mi&&this.uv(t,i,this.Yt.lt);let s=this.EM(e);(!this.Yt.Mi||this.yM>2*s)&&this.AM(t,i,this.Yt.lt)}IM(t,e,i){if(null===this.Yt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,h="",l=Math.min(Math.floor(n),Math.floor(this.Yt.mu*n)),o=Math.floor(.5*(l=Math.max(Math.floor(n),Math.min(l,this.yM)))),a=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.pr!==h&&(s.fillStyle=i.pr,h=i.pr);let u=Math.round(Math.min(i.Yl,i.Xl)*r),c=Math.round(Math.max(i.Yl,i.Xl)*r),d=Math.round(i.jl*r),f=Math.round(i.Kl*r),p=Math.round(n*i._t)-o,m=p+l-1;null!==a&&(p=Math.min(p=Math.max(a+1,p),m));let g=m-p+1;s.fillRect(p,d,g,u-d),s.fillRect(p,c+1,g,f-c),a=m}}EM(t){let e=Math.floor(+t);this.yM<=2*e&&(e=Math.floor(.5*(this.yM-1)));let i=Math.max(Math.floor(t),e);return this.yM<=2*i?Math.max(Math.floor(t),Math.floor(+t)):i}uv(t,e,i){if(null===this.Yt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,h="",l=this.EM(n),o=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.dr!==h&&(s.fillStyle=i.dr,h=i.dr);let d=Math.round(i._t*n)-Math.floor(.5*this.yM),f=d+this.yM-1,p=Math.round(Math.min(i.Yl,i.Xl)*r),m=Math.round(Math.max(i.Yl,i.Xl)*r);if(null!==o&&(d=Math.min(d=Math.max(o+1,d),f)),this.Yt.mu*n>2*l){var a,u,c;a=d,u=f-d+1,c=m-p+1,s.fillRect(a+l,p,u-2*l,l),s.fillRect(a+l,p+c-l,u-2*l,l),s.fillRect(a,p,l,c),s.fillRect(a+u-l,p,l,c)}else{let t=f-d+1;s.fillRect(d,p,t,m-p+1)}o=f}}AM(t,e,i){if(null===this.Yt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,h="",l=this.EM(n);for(let t=i.from;t<i.to;t++){let i=e[t],o=Math.round(Math.min(i.Yl,i.Xl)*r),a=Math.round(Math.max(i.Yl,i.Xl)*r),u=Math.round(i._t*n)-Math.floor(.5*this.yM),c=u+this.yM-1;if(i.cr!==h){let t=i.cr;s.fillStyle=t,h=t}this.Yt.Mi&&(u+=l,o+=l,c-=l,a-=l),o>a||s.fillRect(u,o,c-u+1,a-o+1)}}}class h2 extends h0{constructor(){super(...arguments),this.og=new h1}Gg(t,e,i){return{...this.VM(t,e,i),...i.Dr(t)}}pg(){let t=this.Jn.N();this.og.ht({Xs:this.rg,mu:this.Qn.Et().mu(),BM:t.wickVisible,Mi:t.borderVisible,lt:this.hg})}}let h3={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},$g:(t,e)=>new h2(t,e)};class h5{constructor(t,e){this.Jn=t,this.ah=e,this.WM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(t){this.ah&&this.ah.hr&&this.ah.hr(t)}WM(){this.Jn.attachPrimitive(this.ah)}}let h4={autoScale:!0,zOrder:"normal"};function h6(t,e){return n1(Math.min(Math.max(t,12),30)*e)}function h9(t,e){switch(t){case"arrowDown":case"arrowUp":return h6(e,1);case"circle":return h6(e,.8);case"square":return h6(e,.7)}}function h8(t){let e;return(e=Math.ceil(h6(t,1)))%2!=0?e-1:e}function h7(t){return Math.max(h6(t,.1),3)}function lt(t,e,i){return e?t:i?Math.ceil(t/2):0}function le(t,e,i,s){let n=(h9("arrowUp",s)-1)/2*i._b,r=(n1(s/2)-1)/2*i._b;e.beginPath(),t?(e.moveTo(i._t-n,i.ut),e.lineTo(i._t,i.ut-n),e.lineTo(i._t+n,i.ut),e.lineTo(i._t+r,i.ut),e.lineTo(i._t+r,i.ut+n),e.lineTo(i._t-r,i.ut+n)):(e.moveTo(i._t-n,i.ut),e.lineTo(i._t,i.ut+n),e.lineTo(i._t+n,i.ut),e.lineTo(i._t+r,i.ut),e.lineTo(i._t+r,i.ut-n),e.lineTo(i._t-r,i.ut-n)),e.lineTo(i._t-r,i.ut),e.fill()}function li(t,e,i,s,n,r){let h=(h9("arrowUp",s)-1)/2,l=(n1(s/2)-1)/2;return n>=e-l-2&&n<=e+l+2&&r>=(t?i:i-h)-2&&r<=(t?i+h:i)+2||!(n<e-h-3)&&!(n>e+h+3)&&!(r<(t?i-h-3:i))&&!(r>(t?i:i+h+3))&&Math.abs(r-i)+3>=Math.abs(n-e)/2}class ls{constructor(){this.Yt=null,this.On=new na,this.F=-1,this.W="",this.Wp="",this.ub="normal"}ht(t){this.Yt=t}Nn(t,e,i){this.F===t&&this.W===e||(this.F=t,this.W=e,this.Wp=sF(t,e),this.On.Bn()),this.ub=i}jn(t,e){if(null===this.Yt||null===this.Yt.lt)return null;for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){let s=this.Yt.ot[i];if(s&&function(t,e,i){var s,n,r,h;let l;return!(void 0===t.ri||(s=t.ri._t,n=t.ri.ut,r=t.ri.Qi,h=t.ri.$t,l=h/2,!(e>=s)||!(e<=s+r)||!(i>=n-l)||!(i<=n+l)))||function(t,e,i){var s,n,r,h,l,o;if(0===t.zr)return!1;switch(t.fb){case"arrowDown":return li(!0,t._t,t.ut,t.zr,e,i);case"arrowUp":return li(!1,t._t,t.ut,t.zr,e,i);case"circle":let a,u,c;return s=t._t,n=t.ut,r=t.zr,a=2+h9("circle",r)/2,Math.sqrt((u=s-e)*u+(c=n-i)*c)<=a;case"square":let d,f,p,m;return h=t._t,l=t.ut,o=t.zr,p=h-(f=((d=h9("square",o))-1)/2),m=l-f,e>=p&&e<=p+d&&i>=m&&i<=m+d}}(t,e,i)}(s,t,e))return{zOrder:"normal",externalId:s.Kn??""}}return null}draw(t){"aboveSeries"!==this.ub&&t.useBitmapCoordinateSpace(t=>{this.et(t)})}drawBackground(t){"aboveSeries"===this.ub&&t.useBitmapCoordinateSpace(t=>{this.et(t)})}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null!==this.Yt&&null!==this.Yt.lt){t.textBaseline="middle",t.font=this.Wp;for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let n=this.Yt.ot[s];void 0!==n.ri&&(n.ri.Qi=this.On.Vi(t,n.ri.cb),n.ri.$t=this.F,n.ri._t=n._t-n.ri.Qi/2),function(t,e,i,s){var n,r,h;let l;e.fillStyle=t.R,void 0!==t.ri&&(n=t.ri.cb,r=t.ri._t,h=t.ri.ut,e.save(),e.scale(i,s),e.fillText(n,r,h),e.restore()),function(t,e,i){if(0!==t.zr){switch(t.fb){case"arrowDown":return le(!1,e,i,t.zr);case"arrowUp":return le(!0,e,i,t.zr);case"circle":let s;return s=(h9("circle",t.zr)-1)/2,e.beginPath(),e.arc(i._t,i.ut,s*i._b,0,2*Math.PI,!1),e.fill();case"square":let n,r,h,l;return r=((n=h9("square",t.zr))-1)*i._b/2,h=i._t-r,l=i.ut-r,e.fillRect(h,l,n*i._b,n*i._b)}t.fb}}(t,e,(l=Math.max(1,Math.floor(i))%2/2,{_t:Math.round(t._t*i)+l,ut:t.ut*s,_b:i}))}(n,t,e,i)}}}}function ln(t){return"atPriceTop"===t||"atPriceBottom"===t||"atPriceMiddle"===t}class lr{constructor(t,e,i){this.wb=[],this.xt=!0,this.gb=!0,this.Gt=new ls,this.ge=t,this.Vp=e,this.Yt={ot:[],lt:null},this.Ps=i}renderer(){if(!this.ge.options().visible)return null;this.xt&&this.Mb();let t=this.Vp.options().layout;return this.Gt.Nn(t.fontSize,t.fontFamily,this.Ps.zOrder),this.Gt.ht(this.Yt),this.Gt}bb(t){this.wb=t,this.yt("data")}yt(t){this.xt=!0,"data"===t&&(this.gb=!0)}Sb(t){this.xt=!0,this.Ps=t}zOrder(){return"aboveSeries"===this.Ps.zOrder?"top":this.Ps.zOrder}Mb(){let t=this.Vp.timeScale(),e=this.wb;this.gb&&(this.Yt.ot=e.map(t=>({wt:t.time,_t:0,ut:0,zr:0,fb:t.shape,R:t.color,Kn:t.id,xb:t.xb,ri:void 0})),this.gb=!1);let i=this.Vp.options().layout;this.Yt.lt=null;let s=t.getVisibleLogicalRange();if(null===s)return;let n=new rp(Math.floor(s.from),Math.ceil(s.to));if(null===this.ge.data()[0]||0===this.Yt.ot.length)return;let r=NaN,h=h7(t.options().barSpacing),l={pb:h,mb:h};this.Yt.lt=hP(this.Yt.ot,n,!0);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let n=e[s];n.time!==r&&(l.pb=h,l.mb=h,r=n.time);let o=this.Yt.ot[s];o._t=sk(t.logicalToCoordinate(n.time)),void 0!==n.text&&n.text.length>0&&(o.ri={cb:n.text,_t:0,ut:0,Qi:0,$t:0});let a=this.ge.dataByIndex(n.time,0);null!==a&&function(t,e,i,s,n,r,h,l){let o=function(t,e,i){if(ln(e.position)&&void 0!==e.price)return e.price;if("value"in t&&"number"==typeof t.value)return t.value;if("open"in t&&"high"in t&&"low"in t&&"close"in t){if("inBar"===e.position)return t.close;if("aboveBar"===e.position)return i?t.low:t.high;if("belowBar"===e.position)return i?t.high:t.low}}(i,e,h.priceScale().options().invertScale);if(void 0===o)return;let a=ln(e.position),u=l.timeScale(),c=sT(e.size)?Math.max(e.size,0):1,d=h8(u.options().barSpacing)*c,f=d/2;switch(t.zr=d,e.position){case"inBar":case"atPriceMiddle":return t.ut=sk(h.priceToCoordinate(o)),void 0!==t.ri&&(t.ri.ut=t.ut+f+r+.6*n);case"aboveBar":case"atPriceTop":{let e=a?0:s.pb;return t.ut=sk(h.priceToCoordinate(o))-f-e,void 0!==t.ri&&(t.ri.ut=t.ut-f-.6*n,s.pb+=1.2*n),a||(s.pb+=d+r)}case"belowBar":case"atPriceBottom":{let e=a?0:s.mb;return t.ut=sk(h.priceToCoordinate(o))+f+e,void 0!==t.ri&&(t.ri.ut=t.ut+f+r+.6*n,s.mb+=1.2*n),a||(s.mb+=d+r)}}}(o,n,a,l,i.fontSize,h,this.ge,this.Vp)}this.xt=!1}}class lh{constructor(t){this.sh=null,this.wb=[],this.Cb=[],this.Pb=null,this.ge=null,this.Vp=null,this.yb=!0,this.kb=null,this.Tb=null,this.Rb=null,this.Db=!0,this.Ps={...h4,...t}}attached(t){this.Vb(),this.Vp=t.chart,this.ge=t.series,this.sh=new lr(this.ge,sk(this.Vp),this.Ps),this.lb=t.requestUpdate,this.ge.subscribeDataChanged(t=>this.Tg(t)),this.Db=!0,this.jM()}jM(){this.lb&&this.lb()}detached(){this.ge&&this.Pb&&this.ge.unsubscribeDataChanged(this.Pb),this.Vp=null,this.ge=null,this.sh=null,this.Pb=null}bb(t){this.Db=!0,this.wb=t,this.Vb(),this.yb=!0,this.Tb=null,this.jM()}Bb(){return this.wb}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.Ib()}hitTest(t,e){return this.sh?this.sh.renderer()?.jn(t,e)??null:null}autoscaleInfo(t,e){if(this.Ps.autoScale&&this.sh){let t=this.Eb();if(t)return{priceRange:null,margins:t}}return null}hr(t){var e;this.Ps=(e={...this.Ps,...t},{...h4,...e}),this.jM&&this.jM()}Eb(){let t=sk(this.Vp).timeScale().options().barSpacing;if(this.yb||t!==this.Rb){if(this.Rb=t,this.wb.length>0){let e=h7(t),i=1.5*h8(t)+2*e,s=this.Ab();this.kb={above:lt(i,s.aboveBar,s.inBar),below:lt(i,s.belowBar,s.inBar)}}else this.kb=null;this.yb=!1}return this.kb}Ab(){return null===this.Tb&&(this.Tb=this.wb.reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.Tb}Vb(){if(!this.Db||!this.Vp||!this.ge)return;let t=this.Vp.timeScale(),e=this.ge?.data();if(null==t.getVisibleLogicalRange()||!this.ge||0===e.length)return void(this.Cb=[]);let i=t.timeToIndex(sk(e[0].time),!0);this.Cb=this.wb.map((e,s)=>{let n=t.timeToIndex(e.time,!0),r=sk(this.ge).dataByIndex(n,n<i?1:-1),h={time:t.timeToIndex(sk(r).time,!1),position:e.position,shape:e.shape,color:e.color,id:e.id,xb:s,text:e.text,size:e.size,price:e.price,yw:e.time};if(("atPriceTop"===e.position||"atPriceBottom"===e.position||"atPriceMiddle"===e.position)&&void 0===e.price)throw Error(`Price is required for position ${e.position}`);return{...h,position:e.position,price:e.price}}),this.Db=!1}Ib(t){this.sh&&(this.Vb(),this.sh.bb(this.Cb),this.sh.Sb(this.Ps),this.sh.yt(t))}Tg(t){this.Db=!0,this.jM()}}class ll extends h5{constructor(t,e,i){super(t,e),i&&this.setMarkers(i)}setMarkers(t){this.ah.bb(t)}markers(){return this.ah.Bb()}}({...sS,color:"#2196f3"});var lo=t.i(95257);let la=sr(function(){let t,e,i,s,n,r,h,[l,o]=(0,z.useState)(!1),a=sm.analyticsMode,{chartContainerRef:u,chartRef:c,seriesRef:d,priceLineRef:f,isInitializedRef:p}=(t=(0,z.useRef)(null),e=(0,z.useRef)(null),i=(0,z.useRef)(null),{chartContainerRef:t,chartRef:e,seriesRef:i,priceLineRef:(0,z.useRef)(null),isInitializedRef:(0,z.useRef)(!1)}),{updateTimeScaleLayout:m}=(s=z.default.useRef(null),{updateTimeScaleLayout:(0,z.useCallback)(()=>{if(!c.current||!u.current)return;let t=u.current.clientWidth;if(t<=0)return;let e=Math.max(1,sm.chartData.length||1);if("finished"===sm.gameStatus){let i=s.current??Math.max(2,Math.min(10,t/e));c.current.applyOptions({timeScale:{timeVisible:!1,barSpacing:i,rightOffset:0}});try{c.current.timeScale().scrollToRealTime()}catch(t){}return}let i=t<768,n=i?10:300,r=Math.max(50,t-n)/e*(i?2:1);s.current=r;let h=n/r+(sm.currentBarProgress??0);c.current.applyOptions({timeScale:{timeVisible:!1,barSpacing:r,rightOffset:h}}),c.current.timeScale().scrollToPosition(h,!1)},[c,u])});return n=(0,z.useRef)("idle"),(0,z.useEffect)(()=>{let t=sm.gameStatus,e=n.current;("finished"===e||"idle"===e)&&"started"===t&&(p.current=!1,c.current&&(c.current.remove(),c.current=null,d.current=null,f.current=null)),"finished"===t&&c.current&&m(),n.current=t},[sm.gameStatus,m]),function(t,e,i,s,n){let{theme:r}=function(){let[t,e]=(0,z.useState)(lo.DEFAULT_THEME);return(0,z.useEffect)(()=>{let t=()=>document.documentElement.classList.contains(lo.ThemeName.Dark)?lo.ThemeName.Dark:localStorage.getItem("theme")||lo.DEFAULT_THEME,i=t();e(i),i===lo.ThemeName.Dark?document.documentElement.classList.add(lo.ThemeName.Dark):document.documentElement.classList.remove(lo.ThemeName.Dark);let s=new MutationObserver(()=>{e(t())});s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});let n=()=>{e(t())};window.addEventListener("storage",n);let r=()=>{e(t())};return window.addEventListener("themechange",r),()=>{s.disconnect(),window.removeEventListener("storage",n),window.removeEventListener("themechange",r)}},[]),{theme:t,toggleTheme:()=>{let i=t===lo.ThemeName.Light?lo.ThemeName.Dark:lo.ThemeName.Light;e(i),localStorage.setItem("theme",i),i===lo.ThemeName.Dark?document.documentElement.classList.add(lo.ThemeName.Dark):document.documentElement.classList.remove(lo.ThemeName.Dark),window.dispatchEvent(new Event("themechange"))}}}();(0,z.useEffect)(()=>{var h,l,o,a;let u;if(s.current||!t.current||0===sm.chartData.length)return;s.current=!0;let c=r===lo.ThemeName.Dark,d=c?"#ffffff":"#000000",f=c?"#ffffff":"#000000",p=(h=t.current,l={width:t.current.clientWidth,height:t.current.clientHeight,layout:{background:{color:"transparent"},textColor:"var(--foreground)"},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{timeVisible:!1}},o=new rj,a=rj.ld(l),u=new hZ(function(t){if(sR(t)){let e=document.getElementById(t);return sO(null!==e,`Cannot find element in DOM with id=${t}`),e}return t}(h),o,a),o.setOptions(u.options()),u);e.current=p,i.current=p.addSeries(h3,{upColor:d,downColor:c?"#000000":"#ffffff",borderVisible:!0,borderUpColor:d,borderDownColor:f,wickUpColor:d,wickDownColor:f,priceLineColor:"#000000",priceLineStyle:O.Dotted}),n();let m=()=>{t.current&&t.current.querySelectorAll('a[href*="tradingview"], [data-tradingview-widget], .tradingview-widget-container').forEach(t=>{t.style.display="none"})};m(),setTimeout(m,100);let g=()=>{t.current&&p&&(p.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight}),n())};window.addEventListener("resize",g);let v=new ResizeObserver(g);return t.current&&v.observe(t.current),()=>{window.removeEventListener("resize",g),v.disconnect(),p.remove(),e.current=null,i.current=null,s.current=!1}},[r,sm.chartData.length,n])}(u,c,d,p,m),(0,z.useEffect)(()=>{if(!d.current)return;let t=sf.currentOpenPosition;if(!t){f.current&&(d.current.removePriceLine(f.current),f.current=null);return}if(t){let e=t.openPrice,i="long"===t.type?"#04724d":"#710428";f.current&&d.current.removePriceLine(f.current),f.current=d.current.createPriceLine({price:e,color:i,lineWidth:3,lineStyle:0,axisLabelVisible:!1})}},[sf.currentOpenPosition]),(0,z.useEffect)(()=>{if(!d.current||0===sm.chartData.length)return;let t=sm.chartData.map(t=>({time:t.time/1e3,open:t.open,high:t.high,low:t.low,close:t.close}));d.current.setData(t),"finished"!==sm.gameStatus&&m()},[sm.chartData,m]),r=(0,z.useRef)(null),h=(0,z.useRef)(null),(0,z.useEffect)(()=>{if(!d.current)return;if(h.current!==d.current){var t,e;let i;h.current=d.current,t=d.current,e=[],i=new ll(t,new lh((void 0)??{})),e&&i.setMarkers(e),r.current=i}if("finished"!==sm.gameStatus){r.current&&r.current.setMarkers([]);return}let i=("bot"===a?sp:sf).closedPositions.filter(t=>void 0!==t.openTime&&void 0!==t.closeTime&&void 0!==t.closePrice).flatMap(t=>{let e="long"===t.type,i=[];return i.push({time:Math.floor(t.openTime/1e3),position:e?"belowBar":"aboveBar",shape:e?"arrowUp":"arrowDown",color:e?"#04724d":"#710428",size:1,price:t.openPrice,text:`${e?"BUY":"SELL"} ${t.openPrice.toFixed(2)}`}),i.push({time:Math.floor(t.closeTime/1e3),position:e?"aboveBar":"belowBar",shape:e?"arrowDown":"arrowUp",color:e?"#710428":"#04724d",size:1,price:t.closePrice,text:`${e?"SELL":"BUY"} ${t.closePrice.toFixed(2)}`}),i});r.current&&r.current.setMarkers(i)},[sm.gameStatus,a,sf.closedPositions,sp.closedPositions]),(0,z.useEffect)(()=>{if(sm.isLoading)return void o(!1);if(!sm.isLoading&&sm.chartData.length>0){let t=setTimeout(()=>{o(!0)},100);return()=>clearTimeout(t)}},[sm.isLoading,sm.chartData.length]),(0,j.jsxs)("div",{className:"h-full flex flex-col min-h-0 relative",children:["finished"===sm.gameStatus&&(0,j.jsx)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-20 flex items-center justify-center",children:(0,j.jsxs)("div",{className:"inline-flex bg-white/80 backdrop-blur-sm border border-gray-200 shadow-sm rounded-full p-1 gap-1",children:[(0,j.jsx)("button",{onClick:()=>sm.setAnalyticsMode("player"),className:`px-3.5 md:px-3 py-1 text-xs md:text-sm whitespace-nowrap font-semibold rounded-full transition ${"player"===a?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:" "}),(0,j.jsx)("button",{onClick:()=>sm.setAnalyticsMode("bot"),className:`px-3.5 md:px-3 py-1 text-xs md:text-sm whitespace-nowrap font-semibold rounded-full transition ${"bot"===a?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:""})]})}),(0,j.jsx)("div",{className:`absolute inset-0 p-8 flex items-center justify-center transition-opacity duration-300 ease-in-out ${sm.isLoading?"opacity-100 z-10":"opacity-0 z-0 pointer-events-none"}`,children:(0,j.jsx)("div",{className:"w-8 h-8 border-4 border-gray-300 border-t-black rounded-full animate-spin"})}),(0,j.jsx)("div",{ref:u,"data-candles-count":sm.chartData.length,className:`w-full flex-1 min-h-0 transition-opacity duration-500 ease-in-out ${l?"opacity-100":"opacity-0"} [&_*[data-tradingview-widget]]:hidden [&_a[href*='tradingview']]:hidden`})]})}),lu=[2,5,10,20,50,100];function lc(t){if(t<=1)return 45*t;{let e=lu.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e);return 55+lu.indexOf(e)/(lu.length-1)*45}}function ld(t){if(t<=45){let e=t/45;return{value:e,position:t,display:`${(100*e).toFixed(1)}%`}}{if(t<55)return{value:1,position:45,display:"100%"};let e=Math.min(Math.max(Math.round((t-55)/45*(lu.length-1)),0),lu.length-1),i=lu[e];return{value:i,position:55+e/(lu.length-1)*45,display:`${i}x`}}}function lf({value:t,onChange:e,balance:i}){let s=(0,z.useRef)(null),[n,r]=(0,z.useState)(()=>lc(t)),[h,l]=(0,z.useState)(null),[o,a]=(0,z.useState)(null),[u,c]=(0,z.useState)(null);(0,z.useEffect)(()=>{r(lc(t))},[t]);let d=(0,z.useCallback)(t=>{if(!s.current)return;let i=s.current.getBoundingClientRect(),n=ld(Math.max(0,Math.min(100,(t.clientX-i.left)/i.width*100)));r(n.position),e(n.value)},[e]),f=(0,z.useCallback)(t=>{if(!s.current)return;let e=s.current.getBoundingClientRect(),i=ld(Math.max(0,Math.min(100,(t.clientX-e.left)/e.width*100)));l(i.position),a(i.display),c(i.display)},[]),p=(0,z.useCallback)(()=>{l(null),a(null),c(null)},[]);return(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,j.jsx)("label",{className:"text-sm font-medium",children:" "}),(0,j.jsx)("span",{className:"text-sm font-semibold text-black",children:t<=1?`${(100*t).toFixed(1)}%`:`${t}x`})]}),(0,j.jsxs)("div",{ref:s,className:"relative w-full h-9 cursor-pointer",onClick:d,onMouseMove:f,onMouseLeave:p,children:[(0,j.jsxs)("div",{className:"absolute top-1/2 left-0 w-full h-2 bg-gray-200 rounded-lg transform -translate-y-1/2",children:[(0,j.jsx)("div",{className:"absolute left-0 h-full bg-black rounded-lg transition-all",style:{width:`${n}%`}}),(0,j.jsx)("div",{className:`absolute top-1/2 w-0.5 h-4 transform -translate-y-1/2 transition-all ${"100%"===u?"bg-blue-600 h-6":"bg-gray-400"}`,style:{left:"45%"}})]}),(0,j.jsx)("div",{className:"absolute top-1/2 w-5 h-5 bg-black rounded-full shadow-lg transform -translate-y-1/2 -translate-x-1/2 cursor-pointer transition-all hover:scale-110",style:{left:`${n}%`}}),lu.map((t,e)=>{let i=55+e/(lu.length-1)*45,s=`${t}x`;return(0,j.jsx)("div",{className:`absolute top-1/2 w-0.5 transform -translate-y-1/2 transition-all ${u===s?"bg-blue-600 h-6":"bg-gray-300 h-3"}`,style:{left:`${i}%`}},t)}),(0,j.jsx)("div",{className:`absolute top-1/2 w-0.5 transform -translate-y-1/2 transition-all ${"0%"===u?"bg-blue-600 h-6":"bg-gray-300 h-3"}`,style:{left:"0%"}}),o&&null!==h&&(0,j.jsxs)("div",{className:"absolute bottom-full mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap transform -translate-x-1/2 pointer-events-none z-10",style:{left:`${h}%`},children:[o,(0,j.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})}let lp="chartrush_position_size",lm={[lp]:1};function lg(){var t;let e;return t=lm[lp],null===(e=localStorage.getItem(lp))?t:"number"==typeof t?Number(e):"boolean"==typeof t?"true"===e:e}function lv({isOpen:t,onClose:e}){let[i,s]=(0,z.useState)(1),[n,r]=(0,z.useState)(1);(0,z.useEffect)(()=>{if(t){let t=lg();s(t),r(t)}},[t]);let h=()=>{s(n),e()};return t?(0,j.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold",children:""}),(0,j.jsx)("button",{onClick:h,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer",children:"X"})]}),(0,j.jsx)("div",{className:"p-6",children:(0,j.jsx)(lf,{value:i,onChange:t=>{s(t)},balance:1e4})}),(0,j.jsxs)("div",{className:"border-t border-gray-200 p-6 flex justify-end gap-3",children:[(0,j.jsx)("button",{onClick:h,className:"px-6 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg transition-all font-semibold cursor-pointer",children:""}),(0,j.jsx)("button",{onClick:()=>{localStorage.setItem(lp,String(i)),e()},className:"px-6 py-2 bg-black hover:bg-gray-800 text-white rounded-lg transition-all font-semibold cursor-pointer",children:""})]})]})}):null}let lb=sr(function(){let[t,e]=(0,z.useState)(5),[i,s]=(0,z.useState)(6e4),[n,r]=(0,z.useState)(!1),h=async()=>{let e=sa[t];await sm.prepareGame({interval:e,gameDurationMs:i,botDifficulty:t}),sm.startCountdown(()=>{sm.startGame()})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"border-t border-gray-200 px-6 py-4",children:(0,j.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-2 gap-3 md:flex md:items-end md:justify-center md:gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),(0,j.jsx)("select",{value:t,onChange:t=>e(Number(t.target.value)),className:"w-full md:w-48 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent appearance-none bg-white bg-[url('data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Cpath%20fill%3D%22%23374151%22%20d%3D%22M6%209L1%204h10z%22%2F%3E%3C%2Fsvg%3E')] bg-[length:12px_12px] bg-[right_0.5rem_center] bg-no-repeat",disabled:sm.isLoading,children:Array.from({length:10},(t,e)=>e+1).map(t=>(0,j.jsx)("option",{value:t,children:sc[t]},t))})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" "}),(0,j.jsx)("select",{value:i,onChange:t=>s(Number(t.target.value)),className:"w-full md:w-48 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent appearance-none bg-white bg-[url('data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Cpath%20fill%3D%22%23374151%22%20d%3D%22M6%209L1%204h10z%22%2F%3E%3C%2Fsvg%3E')] bg-[length:12px_12px] bg-[right_0.5rem_center] bg-no-repeat",disabled:sm.isLoading,children:so.map(t=>(0,j.jsx)("option",{value:t.value,children:t.label},t.value))})]}),(0,j.jsx)("button",{onClick:h,disabled:sm.isLoading,className:"w-full md:w-38 px-0 md:px-6 py-2 bg-black hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-all font-semibold cursor-pointer text-center whitespace-nowrap overflow-hidden text-ellipsis",children:" "}),(0,j.jsx)("button",{onClick:()=>r(!0),disabled:sm.isLoading,className:"w-full md:w-auto px-0 md:px-6 py-2 border border-gray-300 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-all font-semibold cursor-pointer text-center whitespace-nowrap overflow-hidden text-ellipsis",children:""})]})}),(0,j.jsx)(lv,{isOpen:n,onClose:()=>r(!1)})]})}),l_=sr(function(){let[t]=(0,z.useState)(()=>lg()),e=sf.getCurrentOpenPosition(),i=sf.getBalance(sm.currentPrice),s=sp.getRealizedBalance(),n=(0,z.useMemo)(()=>i*t,[t,i]),r=(0,z.useMemo)(()=>{let t=i-1e4;return{change:t,changePercent:t/1e4*100}},[i]),h=(0,z.useMemo)(()=>{let t=s-1e4;return{change:t,changePercent:t/1e4*100}},[s]),l=(0,z.useMemo)(()=>{if(!e)return null;let t=sf.getBalanceAtOpen(),i=0,s=(i="long"===e.type?(sm.currentPrice-e.openPrice)/e.openPrice*e.amount:(e.openPrice-sm.currentPrice)/e.openPrice*e.amount)/t*100;return{profit:i,changePercent:s}},[e,sm.currentPrice]),o=(0,z.useCallback)(()=>{n>0&&n<=100*i&&sf.openPosition("long",n,sm.currentPrice,sm.currentTime)},[n,i]),a=(0,z.useCallback)(()=>{n>0&&n<=100*i&&sf.openPosition("short",n,sm.currentPrice,sm.currentTime)},[n,i]),u=(0,z.useCallback)(()=>{e&&sf.closePosition(sm.currentPrice,sm.currentTime,e.id)},[e]);return(0,z.useEffect)(()=>{if(sm.chartData.length>0&&("started"===sm.gameStatus||"in_progress"===sm.gameStatus)){let t=sm.getAllChartData();sp.setChartData(t);let e=su[sm.botDifficulty];sp.setBotParams(e)}},[sm.chartData.length,sm.gameStatus]),(0,z.useEffect)(()=>{"in_progress"===sm.gameStatus&&sm.chartData.length>0&&sm.currentPrice>0&&sm.currentTime>0&&sp.updatePosition(sm.currentPrice,sm.currentTime)},[sm.currentPrice,sm.currentTime,sm.gameStatus,sm.chartData.length]),(0,z.useEffect)(()=>{i<=0&&"in_progress"===sm.gameStatus&&(e&&sf.closePosition(sm.currentPrice,sm.currentTime,e.id),sm.finishGame())},[i,e]),(0,z.useEffect)(()=>{let t=t=>{t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement||("ArrowUp"===t.key?(t.preventDefault(),e?"short"===e.type&&u():o()):"ArrowDown"===t.key&&(t.preventDefault(),e?"long"===e.type&&u():a()))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e,o,a,u]),(0,j.jsx)("div",{className:"border-t border-gray-200 px-4 py-4",children:(0,j.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-2 grid-rows-2 gap-3 md:flex md:items-center md:justify-center md:gap-10",children:[(0,j.jsx)("div",{className:"flex flex-col w-full md:w-48 h-[70px] md:h-auto justify-center order-1 md:order-1",children:e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"text-[10px] font-medium text-gray-600 uppercase tracking-wide text-right mb-0",children:" "}),(0,j.jsxs)("div",{className:`text-2xl font-bold text-right font-mono tabular-nums ${l&&l.profit>=0?"text-green":"text-red"}`,children:[l&&l.profit>=0?"+":"",l?.profit.toFixed(2)||"0.00"]}),(0,j.jsxs)("div",{className:`text-sm font-semibold mt-0 text-right font-mono tabular-nums whitespace-nowrap ${l&&l.changePercent>=0?"text-green":"text-red"}`,children:[l&&l.changePercent>=0?"+":"",l?.changePercent.toFixed(2)||"0.00","%"]})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"text-[10px] font-medium text-gray-600 uppercase tracking-wide text-right mb-0",children:" "}),(0,j.jsx)("div",{className:"text-2xl font-bold text-gray-900 text-right font-mono tabular-nums -my-1",children:i.toFixed(2)}),(0,j.jsxs)("div",{className:`text-sm font-semibold mt-0 text-right font-mono tabular-nums whitespace-nowrap ${r.change>=0?"text-green":"text-red"}`,children:[r.change>=0?"+":"",r.change.toFixed(2)," (",r.changePercent>=0?"+":"",r.changePercent.toFixed(2),"%)"]})]})}),(0,j.jsx)("div",{className:"col-span-2 flex items-center justify-center w-full order-3 md:order-2 md:col-span-1 md:w-[450px]",children:e?(0,j.jsxs)("button",{onClick:u,className:`w-full px-0 py-4 md:px-14 text-white rounded-lg transition-all font-bold text-base md:text-lg whitespace-nowrap text-center ${l&&l.profit>=0?"bg-green":"bg-red"}`,children:["  (","long"===e.type?"":"",")"]}):(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-3 w-full md:flex md:items-center md:justify-center",children:[(0,j.jsx)("button",{onClick:o,disabled:n<=0||n>100*i,className:"w-full px-0 py-4 md:px-14 bg-green disabled:bg-gray-500 disabled:cursor-not-allowed text-white rounded-lg transition-all font-bold text-base md:text-lg whitespace-nowrap text-center",children:"Long ()"}),(0,j.jsx)("button",{onClick:a,disabled:n<=0||n>100*i,className:"w-full px-0 py-4 md:px-14 bg-red disabled:bg-gray-500 disabled:cursor-not-allowed text-white rounded-lg transition-all font-bold text-base md:text-lg whitespace-nowrap text-center",children:"Short ()"})]})}),(0,j.jsxs)("div",{className:"flex flex-col w-full md:w-48 h-[70px] md:h-auto justify-center order-2 md:order-3",children:[(0,j.jsx)("div",{className:"text-[10px] font-medium text-gray-600 uppercase tracking-wide text-left mb-0",children:" "}),(0,j.jsx)("div",{className:"text-2xl font-bold text-gray-900 text-left font-mono tabular-nums -my-1",children:s.toFixed(2)}),(0,j.jsxs)("div",{className:`text-sm font-semibold mt-0 text-left font-mono tabular-nums whitespace-nowrap ${h.change>=0?"text-green":"text-red"}`,children:[h.change>=0?"+":"",h.change.toFixed(2)," (",h.changePercent>=0?"+":"",h.changePercent.toFixed(2),"%)"]})]})]})})}),lw=sr(function(){let t="bot"===sm.analyticsMode?sp:sf,e=t.getBalance(sm.currentPrice),i=e-1e4,s=i/1e4*100,n=t.transactions.length;return(0,j.jsx)("div",{className:"border-t border-gray-200 px-6 py-4 w-full",children:(0,j.jsx)("div",{className:"max-w-6xl mx-auto flex flex-col gap-4",children:(0,j.jsxs)("div",{className:"grid grid-cols-2 md:flex md:flex-row md:items-center md:justify-center gap-3 md:gap-6 w-full",children:[(0,j.jsxs)("div",{className:"flex flex-col w-full md:w-auto text-center md:text-left",children:[(0,j.jsx)("div",{className:"text-[9px] md:text-[10px] font-medium text-gray-600 uppercase tracking-wide mb-0",children:" "}),(0,j.jsx)("div",{className:"text-xl md:text-2xl font-bold text-gray-900 font-mono tabular-nums",children:"10000.00"})]}),(0,j.jsxs)("div",{className:"flex flex-col w-full md:w-auto text-center md:text-left",children:[(0,j.jsx)("div",{className:"text-[9px] md:text-[10px] font-medium text-gray-600 uppercase tracking-wide mb-0",children:" "}),(0,j.jsx)("div",{className:`text-xl md:text-2xl font-bold font-mono tabular-nums ${i>=0?"text-green":"text-red"}`,children:e.toFixed(2)})]}),(0,j.jsxs)("div",{className:"flex flex-col w-full md:w-auto text-center md:text-left",children:[(0,j.jsx)("div",{className:"text-[9px] md:text-[10px] font-medium text-gray-600 uppercase tracking-wide mb-0",children:""}),(0,j.jsxs)("div",{className:`text-xl md:text-2xl font-bold font-mono tabular-nums leading-tight ${i>=0?"text-green":"text-red"}`,children:[i>=0?"+":"",i.toFixed(2)," (",s>=0?"+":"",s.toFixed(2),"%)"]})]}),(0,j.jsxs)("div",{className:"flex flex-col w-full md:w-auto text-center md:text-left",children:[(0,j.jsx)("div",{className:"text-[9px] md:text-[10px] font-medium text-gray-600 uppercase tracking-wide mb-0",children:""}),(0,j.jsx)("div",{className:"text-xl md:text-2xl font-bold text-gray-900 font-mono tabular-nums",children:n})]}),(0,j.jsx)("div",{className:"w-full md:w-auto flex justify-center md:justify-start ml-0 md:ml-4 col-span-2",children:(0,j.jsx)("button",{onClick:()=>{window.location.href="/game"},className:"w-full md:w-auto px-5 md:px-6 py-2 bg-black hover:bg-gray-800 text-white rounded-lg transition-all font-semibold text-sm md:text-base",children:" "})})]})})})});function ly({className:t}){return(0,j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:(0,j.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}let lx=sr(function({isOpen:t,onClose:e}){if(!t)return null;let i=sf.getBalance(sm.currentPrice),s=sp.getBalance(sm.currentPrice),n=i-1e4,r=s-1e4,h=n/1e4*100,l=r/1e4*100,o=sf.transactions.reduce((t,e)=>t+(e.fee||0),0),a=sp.transactions.reduce((t,e)=>t+(e.fee||0),0),u=n-r,c=u/1e4*100,d=n>r,f=n===r,p=i<=0;return(0,j.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 overflow-y-auto",children:(0,j.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 sm:p-8 relative max-h-[90vh] overflow-y-auto",children:[(0,j.jsx)("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors cursor-pointer","aria-label":"",children:(0,j.jsx)(ly,{className:"w-6 h-6"})}),(0,j.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,j.jsx)("h2",{className:"text-2xl sm:text-4xl font-bold text-gray-900 mb-2",children:f?"!":d?"  !":"  "}),(0,j.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:f?" ":d?"   !":"   "})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,j.jsxs)("div",{className:`p-4 sm:p-6 rounded-xl border-2 ${d?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[(0,j.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:" "}),(0,j.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:i.toFixed(2)}),(0,j.jsxs)("div",{className:`text-lg sm:text-xl font-semibold ${n>=0?"text-green-600":"text-red-600"}`,children:[n>=0?"+":"",n.toFixed(2)," (",h>=0?"+":"",h.toFixed(2),"%)"]}),p&&(0,j.jsx)("div",{className:"text-sm font-semibold text-red-600 mt-2",children:" margin call"}),(0,j.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[": ",sf.transactions.length]}),(0,j.jsxs)("div",{className:"text-xs text-gray-500",children:[": ",o.toFixed(2)]})]}),(0,j.jsxs)("div",{className:`p-4 sm:p-6 rounded-xl border-2 ${!d&&!f?"border-red-500 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[(0,j.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:" "}),(0,j.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:s.toFixed(2)}),(0,j.jsxs)("div",{className:`text-lg sm:text-xl font-semibold ${r>=0?"text-green-600":"text-red-600"}`,children:[r>=0?"+":"",r.toFixed(2)," (",l>=0?"+":"",l.toFixed(2),"%)"]}),(0,j.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[": ",sp.transactions.length]}),(0,j.jsxs)("div",{className:"text-xs text-gray-500",children:[": ",a.toFixed(2)]})]})]}),(0,j.jsxs)("div",{className:"bg-gray-100 rounded-xl p-4 sm:p-6 mb-6",children:[(0,j.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:""}),(0,j.jsxs)("div",{className:`text-xl sm:text-2xl font-bold ${u>=0?"text-green-600":"text-red-600"}`,children:[u>=0?"+":"",u.toFixed(2)," (",c>=0?"+":"",c.toFixed(2),"%)"]}),(0,j.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 mt-2",children:f?" ":d?`    ${Math.abs(c).toFixed(2)}%`:`    ${Math.abs(c).toFixed(2)}%`})]}),(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsx)("button",{onClick:e,className:"w-full sm:w-auto px-6 sm:px-8 py-3 bg-black hover:bg-gray-800 text-white rounded-lg transition-all font-semibold cursor-pointer",children:""})})]})})}),lS=sr(function(){let t="idle"===sm.gameStatus,e="in_progress"===sm.gameStatus,i="finished"===sm.gameStatus,s=sm.countdownSeconds>0,[n,r]=(0,z.useState)(!1);return((0,z.useEffect)(()=>{i?r(!0):r(!1)},[i]),s)?(0,j.jsx)("div",{className:"w-full flex items-center justify-center py-8 md:min-h-0 md:h-full",children:(0,j.jsx)("div",{className:"text-6xl font-bold text-black",children:sm.countdownSeconds})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"w-full flex items-start justify-center h-auto py-2 md:items-center md:h-full md:py-0",children:[t&&(0,j.jsx)(lb,{}),e&&(0,j.jsx)(l_,{}),i&&(0,j.jsx)(lw,{})]}),(0,j.jsx)(lx,{isOpen:n,onClose:()=>r(!1)})]})}),lP=sr(function(){return(0,z.useEffect)(()=>{"idle"===sm.gameStatus&&sm.startDemoGame()},[]),(0,j.jsxs)("div",{className:"h-screen bg-white flex flex-col overflow-hidden relative",children:[(0,j.jsx)("div",{className:"flex-1 overflow-hidden min-h-0",children:(0,j.jsx)(la,{})}),(0,j.jsx)("div",{className:"flex-shrink-0 h-auto min-h-[160px] md:min-h-0 md:h-[100px]",children:(0,j.jsx)(lS,{})})]})});t.s(["default",0,lP],18058)}]);